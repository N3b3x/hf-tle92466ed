

<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/hf-tle92466ed-driver/development/assets/css/just-the-docs-default.css">

  <link rel="stylesheet" href="/hf-tle92466ed-driver/development/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet">

  <style id="jtd-nav-activation">
  

    
    .site-nav > ul.nav-list:first-child > li:not(:nth-child(4)) > a,
    .site-nav > ul.nav-list:first-child > li > ul > li a {
      background-image: none;
    }

    .site-nav > ul.nav-list:not(:first-child) a,
    .site-nav li.external a {
      background-image: none;
    }

    .site-nav > ul.nav-list:first-child > li:nth-child(4) > a {
      font-weight: 600;
      text-decoration: none;
    }.site-nav > ul.nav-list:first-child > li:nth-child(4) > button svg {
      transform: rotate(-90deg);
    }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list {
      display: block;
    }
  </style>

  

  
    <script src="/hf-tle92466ed-driver/development/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/hf-tle92466ed-driver/development/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Solenoid Control Test - TLE92466ED ESP32-C6 | HardFOC TLE92466ED Driver - development</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Solenoid Control Test - TLE92466ED ESP32-C6" />
<meta name="author" content="N3b3x" />
<meta property="og:locale" content="en" />
<meta name="description" content="C++23 driver for Infineon TLE92466ED Six-Channel Low-Side Solenoid Driver IC with comprehensive SPI interface, current control, and diagnostics" />
<meta property="og:description" content="C++23 driver for Infineon TLE92466ED Six-Channel Low-Side Solenoid Driver IC with comprehensive SPI interface, current control, and diagnostics" />
<link rel="canonical" href="https://n3b3x.github.io/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html" />
<meta property="og:url" content="https://n3b3x.github.io/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html" />
<meta property="og:site_name" content="HardFOC TLE92466ED Driver - development" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Solenoid Control Test - TLE92466ED ESP32-C6" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"N3b3x","url":"https://github.com/n3b3x"},"description":"C++23 driver for Infineon TLE92466ED Six-Channel Low-Side Solenoid Driver IC with comprehensive SPI interface, current control, and diagnostics","headline":"Solenoid Control Test - TLE92466ED ESP32-C6","url":"https://n3b3x.github.io/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html"}</script>
<!-- End Jekyll SEO tag -->


  <!-- =============================================================================
     Custom Head Content for HardFOC Driver Documentation
     =============================================================================
     This file is included in the <head> section of every page.
     It loads custom CSS and JavaScript for enhanced functionality.
     ============================================================================= -->

<!-- Custom CSS for enhanced styling and fixes -->
<link rel="stylesheet" href="/hf-tle92466ed-driver/development/assets/css/custom.css">

<!-- Custom JavaScript for interactive features -->
<script src="/hf-tle92466ed-driver/development/assets/js/custom.js" defer></script>



</head>

<body>
  <a class="skip-to-main" href="#main-content">Skip to main content</a>
  <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="svg-link" viewBox="0 0 24 24">
  <title>Link</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
  </svg>
</symbol>

  <symbol id="svg-menu" viewBox="0 0 24 24">
  <title>Menu</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
    <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
  </svg>
</symbol>

  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
  <title>Expand</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
    <polyline points="9 18 15 12 9 6"></polyline>
  </svg>
</symbol>

  <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE -->
<symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link">
  <title id="svg-external-link-title">(external link)</title>
  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>
</symbol>

  
    <symbol id="svg-doc" viewBox="0 0 24 24">
  <title>Document</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
  </svg>
</symbol>

    <symbol id="svg-search" viewBox="0 0 24 24">
  <title>Search</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
    <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
  </svg>
</symbol>

  
  
    <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md -->
<symbol id="svg-copy" viewBox="0 0 16 16">
  <title>Copy</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
  </svg>
</symbol>
<symbol id="svg-copied" viewBox="0 0 16 16">
  <title>Copied</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16">
    <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/>
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/>
  </svg>
</symbol>

  
</svg>

  
    <div class="side-bar">
  <div class="site-header" role="banner">
    <a href="/hf-tle92466ed-driver/development/" class="site-title lh-tight">
  HardFOC TLE92466ED Driver - development

</a>
    <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false">
      <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg>
    </button>
  </div>

  <nav aria-label="Main" id="site-nav" class="site-nav">
  
  
    <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in ğŸ”§ HardFOC TLE92466ED Driver category" aria-pressed="false">
        <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
      </button><a href="/hf-tle92466ed-driver/development/" class="nav-list-link">ğŸ”§ HardFOC TLE92466ED Driver</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in ğŸ“š Documentation category" aria-pressed="false">
        <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
      </button><a href="/hf-tle92466ed-driver/development/docs/" class="nav-list-link">ğŸ“š Documentation</a><ul class="nav-list"><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/docs/01_IC_Overview/" class="nav-list-link">ğŸ”Œ IC Overview</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/" class="nav-list-link">ğŸ“¡ SPI Protocol</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/docs/03_Register_Map/" class="nav-list-link">ğŸ“‹ Register Map</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/docs/04_Current_Control/" class="nav-list-link">âš¡ Current Control</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/docs/05_Channel_Modes/" class="nav-list-link">ğŸ›ï¸ Channel Modes</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/docs/06_Diagnostics/" class="nav-list-link">ğŸ›¡ï¸ Diagnostics</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/docs/07_Driver_API/" class="nav-list-link">ğŸ”§ Driver API</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/" class="nav-list-link">ğŸ”Œ HAL Implementation</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/docs/09_Usage_Examples/" class="nav-list-link">ğŸ’» Usage Examples</a></li></ul></li></ul></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html" class="nav-list-link">Driver Integration Test Suite - TLE92466ED ESP32-C6</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html" class="nav-list-link">ESP32 Examples Configuration Guide</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html" class="nav-list-link">Solenoid Control Test - TLE92466ED ESP32-C6</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/examples/esp32/components/hf_tle92466ed/" class="nav-list-link">TLE92466ED ESP-IDF Component</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/examples/esp32/docs/" class="nav-list-link">TLE92466ED ESP32 Examples Documentation</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/examples/esp32/" class="nav-list-link">TLE92466ED ESP32-C6 Examples</a></li><li class="nav-list-item"><a href="/hf-tle92466ed-driver/development/examples/esp32/docs/README_TEST_FRAMEWORK.html" class="nav-list-link">TLE92466ED Test Framework Documentation</a></li></ul>
  
</nav>




  
  
    <footer class="site-footer">
      This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  
</div>

  
  <div class="main" id="top">
    <div id="main-header" class="main-header">
  
    

<div class="search" role="search">
  <div class="search-input-wrap">
    <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search HardFOC TLE92466ED Driver - development" aria-label="Search HardFOC TLE92466ED Driver - development" autocomplete="off">
    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
  </div>
  <div id="search-results" class="search-results"></div>
</div>

  
  
  
    <nav aria-label="Auxiliary" class="aux-nav">
  <ul class="aux-nav-list">
    
      <li class="aux-nav-list-item">
        <a href="/hf-tle92466ed-driver/development/api/index.html" class="site-button"
          
        >
          ğŸ“– API Reference
        </a>
      </li>
    
      <li class="aux-nav-list-item">
        <a href="https://github.com/n3b3x/hf-tle92466ed-driver" class="site-button"
          
        >
          ğŸ“š GitHub Repository
        </a>
      </li>
    
      <li class="aux-nav-list-item">
        <a href="https://github.com/n3b3x/hf-tle92466ed-driver/issues" class="site-button"
          
        >
          ğŸ› Report Issues
        </a>
      </li>
    
      <li class="aux-nav-list-item">
        <a href="https://github.com/n3b3x/hf-tle92466ed-driver/stargazers" class="site-button"
          
        >
          â­ Star on GitHub
        </a>
      </li>
    
  </ul>
</nav>

  
</div>

    <div class="main-content-wrap">
      
      <div id="main-content" class="main-content">
        <main>
          
            <h1 id="solenoid-control-test---tle92466ed-esp32-c6">
  
  
    <a href="#solenoid-control-test---tle92466ed-esp32-c6" class="anchor-heading" aria-labelledby="solenoid-control-test---tle92466ed-esp32-c6"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Solenoid Control Test - TLE92466ED ESP32-C6
  
  
</h1>
    
<h2 id="table-of-contents">
  
  
    <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of Contents
  
  
</h2>
    

<ol>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#purpose">Purpose</a></li>
  <li><a href="#hardware-requirements">Hardware Requirements</a></li>
  <li><a href="#system-architecture">System Architecture</a></li>
  <li><a href="#hardware-setup">Hardware Setup</a></li>
  <li><a href="#configuration">Configuration</a></li>
  <li><a href="#building-and-running">Building and Running</a></li>
  <li><a href="#operation">Operation</a></li>
  <li><a href="#real-time-telemetry">Real-Time Telemetry</a></li>
  <li><a href="#control-algorithm">Control Algorithm</a></li>
  <li><a href="#troubleshooting">Troubleshooting</a></li>
  <li><a href="#performance-characteristics">Performance Characteristics</a></li>
  <li><a href="#safety-considerations">Safety Considerations</a></li>
  <li><a href="#related-documentation">Related Documentation</a></li>
</ol><hr />
<h2 id="overview">
  
  
    <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview
  
  
</h2>
    

<p>The <strong>Solenoid Control Test</strong> is a real hardware test application that demonstrates actual solenoid control using the TLE92466ED driver. This test uses <strong>ADC-based current control</strong> where an analog voltage input (0-3.3V) controls the current setpoint for two solenoids, with real-time telemetry monitoring.</p>
<h3 id="key-features">
  
  
    <a href="#key-features" class="anchor-heading" aria-labelledby="key-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Key Features
  
  
</h3>
    

<ul>
  <li><strong>Real Hardware Testing</strong>: Tests actual solenoids, not just driver logic</li>
  <li><strong>ADC-Based Control</strong>: Analog voltage input (0-3.3V) maps to current percentage (0-100%)</li>
  <li><strong>Dual Solenoid Setup</strong>: One single channel, one parallel pair</li>
  <li><strong>Independent Current Ranges</strong>: Each solenoid has different min/max but same percentage mapping</li>
  <li><strong>Real-Time Telemetry</strong>: Monitoring every 1 second</li>
  <li><strong>Continuous Operation</strong>: Runs indefinitely until reset</li>
</ul>
<h3 id="test-configuration">
  
  
    <a href="#test-configuration" class="anchor-heading" aria-labelledby="test-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Test Configuration
  
  
</h3>
    

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Solenoid Configuration                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Solenoid 1 (Single Channel):                               â”‚
â”‚    â””â”€ Channel: CH0                                          â”‚
â”‚    â””â”€ Mode: Single Channel (ICC)                           â”‚
â”‚    â””â”€ Current Range: 200-1500 mA                            â”‚
â”‚    â””â”€ Percentage Mapping: 0-100% â†’ 200-1500 mA             â”‚
â”‚                                                             â”‚
â”‚  Solenoid 2 (Parallel Pair):                                â”‚
â”‚    â””â”€ Channels: CH1/CH2 (Parallel)                          â”‚
â”‚    â””â”€ Mode: Parallel Pair (ICC)                             â”‚
â”‚    â””â”€ Current Range: 400-3000 mA                             â”‚
â”‚    â””â”€ Percentage Mapping: 0-100% â†’ 400-3000 mA              â”‚
â”‚                                                             â”‚
â”‚  Control Input:                                              â”‚
â”‚    â””â”€ ADC Pin: GPIO0 (ADC1_CH0)                             â”‚
â”‚    â””â”€ Voltage Range: 0-3.3V                                  â”‚
â”‚    â””â”€ Maps to: 0-100% current for both solenoids            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div><hr />
<h2 id="purpose">
  
  
    <a href="#purpose" class="anchor-heading" aria-labelledby="purpose"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Purpose
  
  
</h2>
    

<p>This test serves multiple purposes:</p>

<ol>
  <li><strong>Real Hardware Validation</strong>: Tests actual solenoid operation with real loads</li>
  <li><strong>Parallel Operation Verification</strong>: Validates parallel channel pairing works correctly</li>
  <li><strong>Current Control Accuracy</strong>: Tests current regulation with real solenoids</li>
  <li><strong>Telemetry Validation</strong>: Demonstrates real-time monitoring capabilities</li>
  <li><strong>System Integration</strong>: Tests complete system from ADC input to solenoid output</li>
  <li><strong>Performance Evaluation</strong>: Measures actual current regulation accuracy</li>
</ol>

<p><strong>Note</strong>: This test requires actual solenoids and proper power supplies. For driver-only testing without hardware, use the <strong>Driver Integration Test</strong>.</p><hr />
<h2 id="hardware-requirements">
  
  
    <a href="#hardware-requirements" class="anchor-heading" aria-labelledby="hardware-requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hardware Requirements
  
  
</h2>
    
<h3 id="required-components">
  
  
    <a href="#required-components" class="anchor-heading" aria-labelledby="required-components"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Required Components
  
  
</h3>
    

<ul>
  <li><strong>ESP32-C6-DevKitC-1</strong> development board</li>
  <li><strong>TLE92466ED</strong> evaluation board or custom PCB</li>
  <li><strong>Two Solenoids</strong> with appropriate current ratings:
    <ul>
      <li>Solenoid 1: 200-1500mA range</li>
      <li>Solenoid 2: 400-3000mA range (parallel pair)</li>
    </ul>
  </li>
  <li><strong>5.5-41V Power Supply</strong> for VBAT (5A+ recommended for parallel operation, typical: 12V or 24V automotive)</li>
  <li><strong>3.0-5.5V Power Supply</strong> for VIO (I/O level supply for SPI, typical: 3.3V or 5.0V)</li>
  <li><strong>5V Power Supply</strong> for VDD (internal logic supply) - <em>Required for IC operation</em></li>
  <li><strong>ADC Control Source</strong>: Potentiometer, DAC, or voltage source (0-3.3V)</li>
  <li><strong>Current Sense Resistors</strong> (if using external current monitoring)</li>
  <li><strong>Oscilloscope/Logic Analyzer</strong> (optional, for signal analysis)</li>
  <li>Connecting wires and appropriate connectors</li>
</ul>
<h3 id="power-supply-requirements">
  
  
    <a href="#power-supply-requirements" class="anchor-heading" aria-labelledby="power-supply-requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Power Supply Requirements
  
  
</h3>
    

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Power Supply Specifications                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  VDD (Internal Logic Supply):                               â”‚
â”‚    â””â”€ Voltage: 5V input to TLE92466ED                       â”‚
â”‚    â””â”€ Purpose: Powers central logic of the IC               â”‚
â”‚    â””â”€ Required: YES (for IC operation)                      â”‚
â”‚                                                             â”‚
â”‚  VIO (I/O Level Supply):                                    â”‚
â”‚    â””â”€ Voltage: 3.0V to 5.5V (input)                          â”‚
â”‚    â””â”€ Purpose: Sets I/O voltage levels for SPI              â”‚
â”‚    â””â”€ Typical: 3.3V or 5.0V                                 â”‚
â”‚    â””â”€ Current: 10-20mA                                       â”‚
â”‚    â””â”€ Required: YES (for SPI communication)                 â”‚
â”‚                                                             â”‚
â”‚  VBAT (Load Supply):                                       â”‚
â”‚    â””â”€ Voltage: 5.5V to 41V (recommended operating)          â”‚
â”‚    â””â”€ Typical: 12V or 24V automotive                        â”‚
â”‚    â””â”€ Current: 5A+ (for parallel operation)                  â”‚
â”‚    â””â”€ Required: YES (for solenoid operation)                â”‚
â”‚    â””â”€ Note: Must be capable of supplying peak currents       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="solenoid-specifications">
  
  
    <a href="#solenoid-specifications" class="anchor-heading" aria-labelledby="solenoid-specifications"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Solenoid Specifications
  
  
</h3>
    

<p><strong>Solenoid 1 (Single Channel)</strong>:</p>
<ul>
  <li>Recommended current range: 200-1500mA</li>
  <li>Typical resistance: 6-120Î©</li>
  <li>Power rating: 2.4-18W at 12V</li>
  <li>Must be rated for continuous operation</li>
</ul>

<p><strong>Solenoid 2 (Parallel Pair)</strong>:</p>
<ul>
  <li>Recommended current range: 400-3000mA</li>
  <li>Typical resistance: 3-60Î© (combined)</li>
  <li>Power rating: 4.8-36W at 12V</li>
  <li>Must be rated for continuous operation</li>
  <li>Requires proper current sharing between CH1 and CH2</li>
</ul><hr />
<h2 id="system-architecture">
  
  
    <a href="#system-architecture" class="anchor-heading" aria-labelledby="system-architecture"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> System Architecture
  
  
</h2>
    
<h3 id="block-diagram">
  
  
    <a href="#block-diagram" class="anchor-heading" aria-labelledby="block-diagram"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Block Diagram
  
  
</h3>
    

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        System Architecture                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Control    â”‚         â”‚   ESP32-C6        â”‚                   â”‚
â”‚  â”‚   Source     â”‚         â”‚                   â”‚                   â”‚
â”‚  â”‚              â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                   â”‚
â”‚  â”‚  Pot/DAC    â”‚â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚  â”‚ ADC (GPIO0)  â”‚ â”‚                   â”‚
â”‚  â”‚  0-3.3V     â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚         â”‚         â”‚                   â”‚
â”‚                            â”‚         â–¼         â”‚                   â”‚
â”‚                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                   â”‚
â”‚                            â”‚  â”‚   Control    â”‚ â”‚                   â”‚
â”‚                            â”‚  â”‚   Logic      â”‚ â”‚                   â”‚
â”‚                            â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                   â”‚
â”‚                            â”‚         â”‚         â”‚                   â”‚
â”‚                            â”‚         â–¼         â”‚                   â”‚
â”‚                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                   â”‚
â”‚                            â”‚  â”‚   TLE92466ED â”‚ â”‚                   â”‚
â”‚                            â”‚  â”‚   Driver     â”‚ â”‚                   â”‚
â”‚                            â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                   â”‚
â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                      â”‚                               â”‚
â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                            â”‚                    â”‚                    â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                    â”‚  TLE92466ED   â”‚  â”‚  TLE92466ED   â”‚            â”‚
â”‚                    â”‚     IC        â”‚  â”‚     IC        â”‚            â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                            â”‚                   â”‚                    â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                    â”‚  Solenoid 1   â”‚  â”‚  Solenoid 2   â”‚            â”‚
â”‚                    â”‚  (CH0)        â”‚  â”‚  (CH1/CH2)    â”‚            â”‚
â”‚                    â”‚  200-1500mA   â”‚  â”‚  400-3000mA   â”‚            â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="control-flow">
  
  
    <a href="#control-flow" class="anchor-heading" aria-labelledby="control-flow"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Control Flow
  
  
</h3>
    

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Control Flow Diagram                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ADC Reading (100ms)                                        â”‚
â”‚     â””â”€&gt; Read GPIO0 voltage (0-3.3V)                            â”‚
â”‚     â””â”€&gt; Convert to percentage (0-100%)                           â”‚
â”‚                                                                 â”‚
â”‚  2. Current Calculation                                         â”‚
â”‚     â””â”€&gt; Solenoid 1: percentage â†’ 200-1500mA                    â”‚
â”‚     â””â”€&gt; Solenoid 2: percentage â†’ 400-3000mA                     â”‚
â”‚                                                                 â”‚
â”‚  3. Current Update                                              â”‚
â”‚     â””â”€&gt; SetCurrentSetpoint(Solenoid 1)                          â”‚
â”‚     â””â”€&gt; SetCurrentSetpoint(Solenoid 2)                           â”‚
â”‚                                                                 â”‚
â”‚  4. Telemetry Collection (1 second)                             â”‚
â”‚     â””â”€&gt; Read device status                                       â”‚
â”‚     â””â”€&gt; Read channel diagnostics                                 â”‚
â”‚     â””â”€&gt; Read voltages (VBAT, VIO)                                â”‚
â”‚     â””â”€&gt; Read currents (setpoint, actual)                          â”‚
â”‚     â””â”€&gt; Read duty cycles                                         â”‚
â”‚     â””â”€&gt; Check faults and warnings                                â”‚
â”‚                                                                 â”‚
â”‚  5. Display Telemetry                                           â”‚
â”‚     â””â”€&gt; Format and print status                                  â”‚
â”‚                                                                 â”‚
â”‚  Loop: Steps 1-5 repeat continuously                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div><hr />
<h2 id="hardware-setup">
  
  
    <a href="#hardware-setup" class="anchor-heading" aria-labelledby="hardware-setup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hardware Setup
  
  
</h2>
    
<h3 id="complete-wiring-diagram">
  
  
    <a href="#complete-wiring-diagram" class="anchor-heading" aria-labelledby="complete-wiring-diagram"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Complete Wiring Diagram
  
  
</h3>
    

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Complete Wiring                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ESP32-C6                    TLE92466ED                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚                                                                      â”‚
â”‚  GPIO2  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; MISO                                   â”‚
â”‚  GPIO7  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; MOSI                                    â”‚
â”‚  GPIO6  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; SCLK                                   â”‚
â”‚  GPIO18 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; CS                                     â”‚
â”‚  GPIO21 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; RESN                                    â”‚
â”‚  GPIO20 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; EN                                     â”‚
â”‚  GPIO19 &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FAULTN                                 â”‚
â”‚  GPIO0  &lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [ADC Input]                            â”‚
â”‚                                                                      â”‚
â”‚  5V     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; VDD                                    â”‚
â”‚  3.3V   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; VIO                                    â”‚
â”‚  GND    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; GND                                     â”‚
â”‚                                                                      â”‚
â”‚  External Supply            TLE92466ED                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚                                                                      â”‚
â”‚  5.5-41V (12-24V typical) â”€â”€&gt; VBAT                                    â”‚
â”‚  GND    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; GND                                     â”‚
â”‚                                                                      â”‚
â”‚  Solenoid 1                TLE92466ED                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚                                                                      â”‚
â”‚  Solenoid+ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; OUT0 (CH0)                             â”‚
â”‚  Solenoid- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; GND (via sense)                        â”‚
â”‚                                                                      â”‚
â”‚  Solenoid 2                TLE92466ED                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚                                                                      â”‚
â”‚  Solenoid+ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt; OUT1 (CH1) â”€â”€â”                        â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€&gt; OUT2 (CH2)         â”‚
â”‚                          â”‚                 â”‚                        â”‚
â”‚  Solenoid- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€&gt; GND (via sense)   â”‚
â”‚                                                                      â”‚
â”‚  Control Source          ESP32-C6                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
â”‚                                                                      â”‚
â”‚  Potentiometer:                                                     â”‚
â”‚    3.3V â”€â”€[R1]â”€â”€â”€ GPIO0 â”€â”€[R2]â”€â”€â”€ GND                              â”‚
â”‚    (or DAC, voltage source, etc.)                                   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="pin-assignment-table">
  
  
    <a href="#pin-assignment-table" class="anchor-heading" aria-labelledby="pin-assignment-table"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Pin Assignment Table
  
  
</h3>
    

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>Function</th>
      <th>ESP32-C6 GPIO</th>
      <th>TLE92466ED Pin</th>
      <th>Direction</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>SPI MISO</strong></td>
      <td>GPIO2</td>
      <td>MISO</td>
      <td>Input</td>
      <td>Data from TLE92466ED</td>
    </tr>
    <tr>
      <td><strong>SPI MOSI</strong></td>
      <td>GPIO7</td>
      <td>MOSI</td>
      <td>Output</td>
      <td>Data to TLE92466ED</td>
    </tr>
    <tr>
      <td><strong>SPI SCLK</strong></td>
      <td>GPIO6</td>
      <td>SCLK</td>
      <td>Output</td>
      <td>1MHz SPI Clock</td>
    </tr>
    <tr>
      <td><strong>SPI CS</strong></td>
      <td>GPIO18</td>
      <td>CS</td>
      <td>Output</td>
      <td>Active Low</td>
    </tr>
    <tr>
      <td><strong>RESN</strong></td>
      <td>GPIO21</td>
      <td>RESN</td>
      <td>Output</td>
      <td>Reset pin (active low, must be HIGH)</td>
    </tr>
    <tr>
      <td><strong>EN</strong></td>
      <td>GPIO20</td>
      <td>EN</td>
      <td>Output</td>
      <td>Enable pin (active high)</td>
    </tr>
    <tr>
      <td><strong>FAULTN</strong></td>
      <td>GPIO19</td>
      <td>FAULTN</td>
      <td>Input</td>
      <td>Fault pin (active low)</td>
    </tr>
    <tr>
      <td><strong>ADC Input</strong></td>
      <td>GPIO0</td>
      <td>-</td>
      <td>Input</td>
      <td>Control voltage (0-3.3V)</td>
    </tr>
    <tr>
      <td><strong>VDD Supply</strong></td>
      <td>5V</td>
      <td>VDD</td>
      <td>Power</td>
      <td>5V (Required)</td>
    </tr>
    <tr>
      <td><strong>VIO Supply</strong></td>
      <td>3.3V/5V</td>
      <td>VIO</td>
      <td>Power</td>
      <td>3.0-5.5V (Required)</td>
    </tr>
    <tr>
      <td><strong>Load Supply</strong></td>
      <td>12-24V typical</td>
      <td>VBAT</td>
      <td>Power</td>
      <td>5.5-41V, 5A+ recommended (Required)</td>
    </tr>
    <tr>
      <td><strong>Ground</strong></td>
      <td>GND</td>
      <td>GND</td>
      <td>Ground</td>
      <td>Common reference</td>
    </tr>
  </tbody>
</table></div>
<h3 id="solenoid-connections">
  
  
    <a href="#solenoid-connections" class="anchor-heading" aria-labelledby="solenoid-connections"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Solenoid Connections
  
  
</h3>
    

<p><strong>Solenoid 1 (Single Channel - CH0)</strong>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>Solenoid Terminal+ â”€â”€â”€â”€&gt; TLE92466ED OUT0
Solenoid Terminal- â”€â”€â”€â”€&gt; GND (via current sense resistor if used)
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p><strong>Solenoid 2 (Parallel Pair - CH1/CH2)</strong>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>Solenoid Terminal+ â”€â”€â”€â”€â”¬â”€â”€â”€&gt; TLE92466ED OUT1 (CH1)
                       â””â”€â”€â”€&gt; TLE92466ED OUT2 (CH2)
Solenoid Terminal- â”€â”€â”€â”€&gt; GND (via current sense resistor if used)
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p><strong>Important Notes</strong>:</p>
<ul>
  <li>Both channels in parallel pair must be connected to the same solenoid</li>
  <li>Ensure proper current sharing between CH1 and CH2</li>
  <li>Use appropriate wire gauge for high currents (parallel operation)</li>
  <li>Add current sense resistors if external current monitoring is desired</li>
</ul>
<h3 id="adc-control-input-setup">
  
  
    <a href="#adc-control-input-setup" class="anchor-heading" aria-labelledby="adc-control-input-setup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ADC Control Input Setup
  
  
</h3>
    

<p><strong>Option 1: Potentiometer</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>3.3V â”€â”€[10kÎ© Pot]â”€â”€ GPIO0
              â”‚
             GND
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p><strong>Option 2: DAC Output</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>DAC Output (0-3.3V) â”€â”€&gt; GPIO0
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p><strong>Option 3: Voltage Source</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Variable Voltage Source (0-3.3V) â”€â”€&gt; GPIO0
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p><strong>ADC Configuration</strong>:</p>
<ul>
  <li>Pin: GPIO0 (ADC1_CH0)</li>
  <li>Range: 0-3.3V</li>
  <li>Resolution: 12-bit (0-4095)</li>
  <li>Attenuation: 12dB (full range)</li>
  <li>Sampling: 1kHz</li>
</ul><hr />
<h2 id="configuration">
  
  
    <a href="#configuration" class="anchor-heading" aria-labelledby="configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration
  
  
</h2>
    
<h3 id="solenoid-configuration-mainsolenoidcontroltestcpp">
  
  
    <a href="#solenoid-configuration-mainsolenoidcontroltestcpp" class="anchor-heading" aria-labelledby="solenoid-configuration-mainsolenoidcontroltestcpp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Solenoid Configuration (<code class="language-plaintext highlighter-rouge">main/SolenoidControlTest.cpp</code>)
  
  
</h3>
    

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="cm">/**
 * @brief Solenoid 1 Configuration (Single Channel)
 */</span>
<span class="k">struct</span> <span class="nc">Solenoid1Config</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">Channel</span> <span class="n">CHANNEL</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">::</span><span class="n">CH0</span><span class="p">;</span>        <span class="c1">// Single channel</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">uint16_t</span> <span class="n">MIN_CURRENT_MA</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>          <span class="c1">// Minimum current (mA)</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">uint16_t</span> <span class="n">MAX_CURRENT_MA</span> <span class="o">=</span> <span class="mi">1500</span><span class="p">;</span>         <span class="c1">// Maximum current (mA)</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">bool</span> <span class="n">PARALLEL_MODE</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>             <span class="c1">// Single channel mode</span>
<span class="p">};</span>

<span class="cm">/**
 * @brief Solenoid 2 Configuration (Parallel Pair)
 */</span>
<span class="k">struct</span> <span class="nc">Solenoid2Config</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">ParallelPair</span> <span class="n">PAIR</span> <span class="o">=</span> <span class="n">ParallelPair</span><span class="o">::</span><span class="n">CH1_CH2</span><span class="p">;</span> <span class="c1">// Parallel pair</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">Channel</span> <span class="n">PRIMARY_CHANNEL</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">::</span><span class="n">CH1</span><span class="p">;</span>     <span class="c1">// Primary channel</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">uint16_t</span> <span class="n">MIN_CURRENT_MA</span> <span class="o">=</span> <span class="mi">400</span><span class="p">;</span>              <span class="c1">// Minimum current (mA)</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">uint16_t</span> <span class="n">MAX_CURRENT_MA</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>             <span class="c1">// Maximum current (mA)</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">bool</span> <span class="n">PARALLEL_MODE</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>                  <span class="c1">// Parallel mode</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p><strong>To modify solenoid configuration</strong>: Edit these structs in <code class="language-plaintext highlighter-rouge">main/SolenoidControlTest.cpp</code></p>
<h3 id="adc-configuration">
  
  
    <a href="#adc-configuration" class="anchor-heading" aria-labelledby="adc-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ADC Configuration
  
  
</h3>
    

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="cm">/**
 * @brief ADC Configuration
 */</span>
<span class="k">struct</span> <span class="nc">ADCConfig</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">adc_unit_t</span> <span class="n">UNIT</span> <span class="o">=</span> <span class="n">ADC_UNIT_1</span><span class="p">;</span>           <span class="c1">// ADC unit (ADC1)</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">adc_channel_t</span> <span class="n">CHANNEL</span> <span class="o">=</span> <span class="n">ADC_CHANNEL_0</span><span class="p">;</span>  <span class="c1">// ADC channel (GPIO0)</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">adc_atten_t</span> <span class="n">ATTEN</span> <span class="o">=</span> <span class="n">ADC_ATTEN_DB_12</span><span class="p">;</span>    <span class="c1">// 0-3.3V range</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="n">adc_bitwidth_t</span> <span class="n">BITWIDTH</span> <span class="o">=</span> <span class="n">ADC_BITWIDTH_12</span><span class="p">;</span> <span class="c1">// 12-bit resolution</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">float</span> <span class="n">VREF_MV</span> <span class="o">=</span> <span class="mf">3300.0</span><span class="n">f</span><span class="p">;</span>                 <span class="c1">// Reference voltage (3.3V)</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">float</span> <span class="n">ADC_MAX</span> <span class="o">=</span> <span class="mf">4095.0</span><span class="n">f</span><span class="p">;</span>                 <span class="c1">// Maximum ADC value</span>
    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">int</span> <span class="n">GPIO_PIN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                        <span class="c1">// GPIO pin number</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p><strong>To change ADC pin</strong>: Modify <code class="language-plaintext highlighter-rouge">CHANNEL</code> and <code class="language-plaintext highlighter-rouge">GPIO_PIN</code> (ensure GPIO supports ADC)</p>
<h3 id="control-loop-timing">
  
  
    <a href="#control-loop-timing" class="anchor-heading" aria-labelledby="control-loop-timing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Control Loop Timing
  
  
</h3>
    

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">const</span> <span class="n">TickType_t</span> <span class="n">update_interval</span> <span class="o">=</span> <span class="n">pdMS_TO_TICKS</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>      <span class="c1">// 100ms current update</span>
<span class="k">const</span> <span class="n">TickType_t</span> <span class="n">telemetry_interval</span> <span class="o">=</span> <span class="n">pdMS_TO_TICKS</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>   <span class="c1">// 1 second telemetry</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p><strong>To modify timing</strong>: Edit these constants in <code class="language-plaintext highlighter-rouge">main/SolenoidControlTest.cpp</code></p><hr />
<h2 id="building-and-running">
  
  
    <a href="#building-and-running" class="anchor-heading" aria-labelledby="building-and-running"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Building and Running
  
  
</h2>
    
<h3 id="quick-start">
  
  
    <a href="#quick-start" class="anchor-heading" aria-labelledby="quick-start"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Quick Start
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nb">cd </span>examples/esp32

<span class="c"># Build the solenoid control test</span>
./scripts/build_app.sh solenoid_control_test Debug

<span class="c"># Flash to ESP32-C6</span>
./scripts/flash_app.sh solenoid_control_test Debug

<span class="c"># Monitor output</span>
./scripts/monitor_app.sh solenoid_control_test
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="manual-build">
  
  
    <a href="#manual-build" class="anchor-heading" aria-labelledby="manual-build"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Manual Build
  
  
</h3>
    

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="nb">cd </span>examples/esp32

<span class="c"># Set target</span>
idf.py set-target esp32c6

<span class="c"># Build with APP_TYPE=solenoid_control_test</span>
idf.py <span class="nt">-DAPP_TYPE</span><span class="o">=</span>solenoid_control_test build

<span class="c"># Flash</span>
idf.py <span class="nt">-p</span> /dev/ttyUSB0 flash

<span class="c"># Monitor</span>
idf.py <span class="nt">-p</span> /dev/ttyUSB0 monitor
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="build-requirements">
  
  
    <a href="#build-requirements" class="anchor-heading" aria-labelledby="build-requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build Requirements
  
  
</h3>
    

<p>The solenoid control test requires the <code class="language-plaintext highlighter-rouge">esp_adc</code> component, which is automatically added by CMake when <code class="language-plaintext highlighter-rouge">APP_TYPE=solenoid_control_test</code>.</p><hr />
<h2 id="operation">
  
  
    <a href="#operation" class="anchor-heading" aria-labelledby="operation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Operation
  
  
</h2>
    
<h3 id="startup-sequence">
  
  
    <a href="#startup-sequence" class="anchor-heading" aria-labelledby="startup-sequence"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Startup Sequence
  
  
</h3>
    

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Startup Sequence                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. Initialize HAL                                          â”‚
â”‚     â””â”€&gt; Create Esp32TleCommInterface                       â”‚
â”‚     â””â”€&gt; Initialize SPI bus                                  â”‚
â”‚     â””â”€&gt; Configure GPIO pins                                  â”‚
â”‚                                                             â”‚
â”‚  2. Initialize Driver                                       â”‚
â”‚     â””â”€&gt; Create TLE92466ED::Driver instance                  â”‚
â”‚     â””â”€&gt; Call Init() (resets device, verifies communication) â”‚
â”‚                                                             â”‚
â”‚  3. Initialize ADC                                          â”‚
â”‚     â””â”€&gt; Configure ADC1 channel 0 (GPIO0)                   â”‚
â”‚     â””â”€&gt; Set attenuation for 0-3.3V range                    â”‚
â”‚     â””â”€&gt; Enable calibration (if available)                    â”‚
â”‚                                                             â”‚
â”‚  4. Configure Solenoids                                     â”‚
â”‚     â””â”€&gt; Enter Config Mode                                   â”‚
â”‚     â””â”€&gt; Set Solenoid 1 to ICC mode (CH0)                    â”‚
â”‚     â””â”€&gt; Enable parallel operation for Solenoid 2 (CH1/CH2)  â”‚
â”‚     â””â”€&gt; Set Solenoid 2 to ICC mode (CH1)                    â”‚
â”‚     â””â”€&gt; Enter Mission Mode                                  â”‚
â”‚     â””â”€&gt; Enable outputs (EN pin)                             â”‚
â”‚                                                             â”‚
â”‚  5. Enable Solenoids                                        â”‚
â”‚     â””â”€&gt; Enable CH0 (Solenoid 1)                             â”‚
â”‚     â””â”€&gt; Enable CH1 (Solenoid 2, enables both in parallel)   â”‚
â”‚                                                             â”‚
â”‚  6. Start Control Loop                                      â”‚
â”‚     â””â”€&gt; Continuous operation begins                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="control-loop-operation">
  
  
    <a href="#control-loop-operation" class="anchor-heading" aria-labelledby="control-loop-operation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Control Loop Operation
  
  
</h3>
    

<p>The control loop runs continuously with the following timing:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Control Loop Timing                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Every 100ms:                                               â”‚
â”‚    â””â”€&gt; Read ADC voltage (GPIO0)                             â”‚
â”‚    â””â”€&gt; Convert to percentage (0-100%)                       â”‚
â”‚    â””â”€&gt; Calculate currents for both solenoids                â”‚
â”‚    â””â”€&gt; Update current setpoints                             â”‚
â”‚                                                             â”‚
â”‚  Every 1 second:                                            â”‚
â”‚    â””â”€&gt; Collect telemetry                                    â”‚
â”‚    â””â”€&gt; Display formatted telemetry report                   â”‚
â”‚                                                             â”‚
â”‚  Continuous:                                                â”‚
â”‚    â””â”€&gt; Monitor for faults                                    â”‚
â”‚    â””â”€&gt; Update currents based on ADC                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="current-calculation">
  
  
    <a href="#current-calculation" class="anchor-heading" aria-labelledby="current-calculation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Current Calculation
  
  
</h3>
    

<p>The ADC reading (0-3.3V) is mapped to a percentage (0-100%), which is then used to calculate the current for each solenoid:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Current Calculation Formula                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Step 1: ADC to Percentage                                  â”‚
â”‚    percentage = (ADC_voltage / 3.3V) Ã— 100%                 â”‚
â”‚                                                             â”‚
â”‚  Step 2: Percentage to Current                               â”‚
â”‚    Solenoid 1:                                               â”‚
â”‚      current = 200mA + (1500mA - 200mA) Ã— (percentage/100)  â”‚
â”‚      Range: 200-1500mA                                      â”‚
â”‚                                                             â”‚
â”‚    Solenoid 2:                                               â”‚
â”‚      current = 400mA + (3000mA - 400mA) Ã— (percentage/100)  â”‚
â”‚      Range: 400-3000mA                                     â”‚
â”‚                                                             â”‚
â”‚  Example:                                                    â”‚
â”‚    ADC = 1.65V (50%)                                        â”‚
â”‚    Solenoid 1: 200 + (1500-200)Ã—0.5 = 850mA                 â”‚
â”‚    Solenoid 2: 400 + (3000-400)Ã—0.5 = 1700mA                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div><hr />
<h2 id="real-time-telemetry">
  
  
    <a href="#real-time-telemetry" class="anchor-heading" aria-labelledby="real-time-telemetry"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Real-Time Telemetry
  
  
</h2>
    
<h3 id="telemetry-display-format">
  
  
    <a href="#telemetry-display-format" class="anchor-heading" aria-labelledby="telemetry-display-format"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Telemetry Display Format
  
  
</h3>
    

<p>Every 1 second, the system displays telemetry:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        REAL-TIME TELEMETRY                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
  ADC Input: 1650.0 mV (50.0%)
  Target Currents: Solenoid 1=850 mA, Solenoid 2=1700 mA

  Device Status:
    Mode: Mission | Init: Done | Fault Pin: OK
    VBAT: 12000 mV | VIO: 3300 mV

  Solenoid 1 (CH0):
    Setpoint: 850 mA | Actual: 845 mA | Duty: 16384 (0x4000)
    Current Error: -5 mA (-0.6%)
    âœ… Status: Normal

  Solenoid 2 (CH1):
    Setpoint: 1700 mA | Actual: 1695 mA | Duty: 32768 (0x8000)
    Current Error: -5 mA (-0.3%)
    âœ… Status: Normal
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="telemetry-data-explained">
  
  
    <a href="#telemetry-data-explained" class="anchor-heading" aria-labelledby="telemetry-data-explained"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Telemetry Data Explained
  
  
</h3>
    
<h4 id="device-level-telemetry">
  
  
    <a href="#device-level-telemetry" class="anchor-heading" aria-labelledby="device-level-telemetry"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Device-Level Telemetry
  
  
</h4>
    

<ul>
  <li><strong>Mode</strong>: Current device mode (Config or Mission)</li>
  <li><strong>Init</strong>: Initialization status (Done or Pending)</li>
  <li><strong>Fault Pin</strong>: Hardware fault pin state (OK or FAULT)</li>
  <li><strong>VBAT</strong>: VBAT supply voltage in millivolts</li>
  <li><strong>VIO</strong>: VIO supply voltage in millivolts</li>
  <li><strong>Device Faults</strong>: Any global fault conditions (UV/OV, temperature, clock, etc.)</li>
</ul>
<h4 id="per-solenoid-telemetry">
  
  
    <a href="#per-solenoid-telemetry" class="anchor-heading" aria-labelledby="per-solenoid-telemetry"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Per-Solenoid Telemetry
  
  
</h4>
    

<ul>
  <li><strong>Setpoint</strong>: Target current in milliamperes</li>
  <li><strong>Actual</strong>: Measured average current in milliamperes</li>
  <li><strong>Duty</strong>: PWM duty cycle (raw 16-bit value and hex)</li>
  <li><strong>Current Error</strong>: Difference between setpoint and actual (mA and percentage)</li>
  <li><strong>Faults</strong>: Channel-specific fault conditions</li>
  <li><strong>Warnings</strong>: Channel-specific warning conditions</li>
  <li><strong>Status</strong>: Overall channel status (Normal or with faults/warnings)</li>
</ul>
<h3 id="telemetry-interpretation">
  
  
    <a href="#telemetry-interpretation" class="anchor-heading" aria-labelledby="telemetry-interpretation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Telemetry Interpretation
  
  
</h3>
    
<h4 id="normal-operation">
  
  
    <a href="#normal-operation" class="anchor-heading" aria-labelledby="normal-operation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Normal Operation
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>âœ… Status: Normal
</pre></td></tr></tbody></table></div></code></pre></div></div>
<ul>
  <li>No faults or warnings detected</li>
  <li>Current regulation working correctly</li>
  <li>All systems operational</li>
</ul>
<h4 id="current-error-analysis">
  
  
    <a href="#current-error-analysis" class="anchor-heading" aria-labelledby="current-error-analysis"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Current Error Analysis
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>Current Error: -5 mA (-0.6%)
</pre></td></tr></tbody></table></div></code></pre></div></div>
<ul>
  <li><strong>Negative error</strong>: Actual current is less than setpoint</li>
  <li><strong>Positive error</strong>: Actual current is greater than setpoint</li>
  <li><strong>Small errors (&lt;5%)</strong>: Normal for current regulation</li>
  <li><strong>Large errors (&gt;10%)</strong>: May indicate load mismatch or regulation issues</li>
</ul>
<h4 id="fault-conditions">
  
  
    <a href="#fault-conditions" class="anchor-heading" aria-labelledby="fault-conditions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Fault Conditions
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>âš ï¸  Faults:
  - Over-current
  - Short to Ground
  - Open Load
</pre></td></tr></tbody></table></div></code></pre></div></div>
<ul>
  <li><strong>Over-current</strong>: Load drawing more than expected</li>
  <li><strong>Short to Ground</strong>: Load or wiring shorted</li>
  <li><strong>Open Load</strong>: No load connected or connection issue</li>
  <li><strong>Over-temperature</strong>: IC or load overheating</li>
</ul>
<h4 id="warning-conditions">
  
  
    <a href="#warning-conditions" class="anchor-heading" aria-labelledby="warning-conditions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Warning Conditions
  
  
</h4>
    
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>âš ï¸  Warnings:
  - Current Regulation Warning
  - PWM Regulation Warning
</pre></td></tr></tbody></table></div></code></pre></div></div>
<ul>
  <li><strong>Current Regulation Warning</strong>: Current regulation may be at limits</li>
  <li><strong>PWM Regulation Warning</strong>: PWM may be saturated</li>
  <li><strong>OT Warning</strong>: Approaching temperature limits</li>
</ul><hr />
<h2 id="control-algorithm">
  
  
    <a href="#control-algorithm" class="anchor-heading" aria-labelledby="control-algorithm"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Control Algorithm
  
  
</h2>
    
<h3 id="current-control-flow">
  
  
    <a href="#current-control-flow" class="anchor-heading" aria-labelledby="current-control-flow"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Current Control Flow
  
  
</h3>
    

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Current Control Algorithm                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ADC Reading                                             â”‚
â”‚     Input: GPIO0 voltage (0-3.3V)                           â”‚
â”‚     Process: 12-bit ADC conversion                          â”‚
â”‚     Output: Raw ADC value (0-4095)                          â”‚
â”‚                                                             â”‚
â”‚  2. Voltage Calculation                                      â”‚
â”‚     Input: Raw ADC value                                    â”‚
â”‚     Process: Convert to voltage (with calibration)          â”‚
â”‚     Output: Voltage in millivolts (0-3300mV)                â”‚
â”‚                                                             â”‚
â”‚  3. Percentage Calculation                                   â”‚
â”‚     Input: Voltage (mV)                                      â”‚
â”‚     Process: percentage = (voltage / 3300) Ã— 100              â”‚
â”‚     Output: Percentage (0.0-100.0%)                         â”‚
â”‚                                                             â”‚
â”‚  4. Current Calculation (Per Solenoid)                       â”‚
â”‚     Input: Percentage                                        â”‚
â”‚     Process:                                                 â”‚
â”‚       current = min + (max - min) Ã— (percentage / 100)      â”‚
â”‚     Output: Current in milliamperes                         â”‚
â”‚                                                             â”‚
â”‚  5. Current Update                                           â”‚
â”‚     Input: Calculated current                                â”‚
â”‚     Process: SetCurrentSetpoint(channel, current)            â”‚
â”‚     Output: Current setpoint updated in TLE92466ED           â”‚
â”‚                                                             â”‚
â”‚  6. Current Regulation (TLE92466ED)                          â”‚
â”‚     Input: Current setpoint                                  â”‚
â”‚     Process: ICC (Integrated Current Control)                â”‚
â”‚     Output: Regulated current to solenoid                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="parallel-operation">
  
  
    <a href="#parallel-operation" class="anchor-heading" aria-labelledby="parallel-operation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Parallel Operation
  
  
</h3>
    

<p>For Solenoid 2 (parallel pair), the current is set on the primary channel (CH1), and the TLE92466ED automatically shares the current between CH1 and CH2:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Parallel Channel Current Sharing                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Setpoint: 1700mA (on CH1)                                  â”‚
â”‚                                                             â”‚
â”‚  TLE92466ED automatically:                                  â”‚
â”‚    â””â”€&gt; Shares current between CH1 and CH2                   â”‚
â”‚    â””â”€&gt; Each channel: ~850mA                                 â”‚
â”‚    â””â”€&gt; Total: ~1700mA to solenoid                          â”‚
â”‚                                                             â”‚
â”‚  Current Sharing:                                           â”‚
â”‚    â””â”€&gt; Automatic balancing by TLE92466ED                    â”‚
â”‚    â””â”€&gt; No manual current splitting required                  â”‚
â”‚    â””â”€&gt; Both channels must be enabled                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div><hr />
<h2 id="troubleshooting">
  
  
    <a href="#troubleshooting" class="anchor-heading" aria-labelledby="troubleshooting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Troubleshooting
  
  
</h2>
    
<h3 id="common-issues">
  
  
    <a href="#common-issues" class="anchor-heading" aria-labelledby="common-issues"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Common Issues
  
  
</h3>
    
<h4 id="1-solenoids-not-responding-">
  
  
    <a href="#1-solenoids-not-responding-" class="anchor-heading" aria-labelledby="1-solenoids-not-responding-"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Solenoids Not Responding âŒ
  
  
</h4>
    

<p><strong>Symptom</strong>: No current flow, solenoids not activating</p>

<p><strong>Root Causes</strong>:</p>
<ul>
  <li>VBAT not connected or insufficient voltage</li>
  <li>EN pin not enabled</li>
  <li>Channels not enabled</li>
  <li>Device not in Mission Mode</li>
  <li>Solenoid wiring incorrect</li>
</ul>

<p><strong>Solutions</strong>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>Checklist:
â–¡ VBAT: 5.5-41V connected (typical 12-24V) and sufficient current capacity
â–¡ EN pin: HIGH (outputs enabled)
â–¡ Channels: Enabled via EnableChannel()
â–¡ Mode: Mission Mode (EnterMissionMode())
â–¡ Wiring: Solenoid+ to OUT, Solenoid- to GND
â–¡ RESN: HIGH (not in reset)
</pre></td></tr></tbody></table></div></code></pre></div></div><hr />
<h4 id="2-current-not-regulating-correctly-ï¸">
  
  
    <a href="#2-current-not-regulating-correctly-ï¸" class="anchor-heading" aria-labelledby="2-current-not-regulating-correctly-ï¸"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Current Not Regulating Correctly âš ï¸
  
  
</h4>
    

<p><strong>Symptom</strong>: Actual current doesnâ€™t match setpoint</p>

<p><strong>Root Causes</strong>:</p>
<ul>
  <li>Load resistance mismatch</li>
  <li>Power supply voltage too low</li>
  <li>Current limits exceeded</li>
  <li>Solenoid resistance out of range</li>
</ul>

<p><strong>Solutions</strong>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>1. Check load resistance:
   - Solenoid 1: R = VBAT / I_max = 12V / 1.5A = 8Î© minimum
   - Solenoid 2: R = VBAT / I_max = 12V / 3.0A = 4Î© minimum

2. Verify power supply:
   - VBAT voltage: 5.5V to 41V (typical 12-24V)
   - Current capacity: 5A+ for parallel operation

3. Check telemetry:
   - Current error should be &lt;5% for good regulation
   - Duty cycle should be &lt;90% for headroom
</pre></td></tr></tbody></table></div></code></pre></div></div><hr />
<h4 id="3-adc-reading-incorrect-ï¸">
  
  
    <a href="#3-adc-reading-incorrect-ï¸" class="anchor-heading" aria-labelledby="3-adc-reading-incorrect-ï¸"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. ADC Reading Incorrect âš ï¸
  
  
</h4>
    

<p><strong>Symptom</strong>: ADC voltage doesnâ€™t match control source</p>

<p><strong>Root Causes</strong>:</p>
<ul>
  <li>ADC pin not connected correctly</li>
  <li>Control source voltage out of range</li>
  <li>ADC calibration issue</li>
  <li>GPIO pin conflict</li>
</ul>

<p><strong>Solutions</strong>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>1. Verify connections:
   - Control source connected to GPIO0
   - Ground reference common

2. Check voltage range:
   - Must be 0-3.3V
   - Use voltage divider if needed

3. Verify ADC configuration:
   - GPIO0 supports ADC1_CH0
   - Attenuation set to 12dB (full range)
</pre></td></tr></tbody></table></div></code></pre></div></div><hr />
<h4 id="4-parallel-operation-not-working-">
  
  
    <a href="#4-parallel-operation-not-working-" class="anchor-heading" aria-labelledby="4-parallel-operation-not-working-"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. Parallel Operation Not Working âŒ
  
  
</h4>
    

<p><strong>Symptom</strong>: Solenoid 2 not working or current not shared</p>

<p><strong>Root Causes</strong>:</p>
<ul>
  <li>Parallel operation not enabled</li>
  <li>Only one channel enabled</li>
  <li>Wiring incorrect</li>
  <li>Current sharing imbalance</li>
</ul>

<p><strong>Solutions</strong>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>1. Verify configuration:
   - SetParallelOperation(CH1_CH2, true) called
   - Both CH1 and CH2 enabled (enabling CH1 enables both)
   - Device in Config Mode when configuring

2. Check wiring:
   - Solenoid+ connected to BOTH OUT1 and OUT2
   - Solenoid- connected to GND
   - Proper wire gauge for high current

3. Monitor telemetry:
   - Check diagnostics for both channels
   - Verify current is being shared
</pre></td></tr></tbody></table></div></code></pre></div></div><hr />
<h4 id="5-faults-detected-ï¸">
  
  
    <a href="#5-faults-detected-ï¸" class="anchor-heading" aria-labelledby="5-faults-detected-ï¸"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5. Faults Detected âš ï¸
  
  
</h4>
    

<p><strong>Symptom</strong>: Telemetry shows faults or warnings</p>

<p><strong>Over-current</strong>:</p>
<ul>
  <li>Load drawing too much current</li>
  <li>Reduce setpoint or check load resistance</li>
  <li>Verify power supply can deliver required current</li>
</ul>

<p><strong>Short to Ground</strong>:</p>
<ul>
  <li>Load or wiring shorted</li>
  <li>Check continuity</li>
  <li>Inspect for solder bridges or damaged wiring</li>
</ul>

<p><strong>Open Load</strong>:</p>
<ul>
  <li>No load connected (expected if testing without solenoid)</li>
  <li>Loose connection</li>
  <li>Load resistance too high</li>
</ul>

<p><strong>Over-temperature</strong>:</p>
<ul>
  <li>IC or load overheating</li>
  <li>Add heatsink</li>
  <li>Reduce duty cycle</li>
  <li>Lower ambient temperature</li>
  <li>Check for adequate airflow</li>
</ul><hr />
<h2 id="performance-characteristics">
  
  
    <a href="#performance-characteristics" class="anchor-heading" aria-labelledby="performance-characteristics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Performance Characteristics
  
  
</h2>
    
<h3 id="control-loop-performance">
  
  
    <a href="#control-loop-performance" class="anchor-heading" aria-labelledby="control-loop-performance"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Control Loop Performance
  
  
</h3>
    

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Value</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Current Update Rate</strong></td>
      <td>10 Hz (100ms)</td>
      <td>Fast enough for smooth control</td>
    </tr>
    <tr>
      <td><strong>Telemetry Update Rate</strong></td>
      <td>1 Hz (1 second)</td>
      <td>Status display</td>
    </tr>
    <tr>
      <td><strong>ADC Sampling Rate</strong></td>
      <td>1 kHz</td>
      <td>12-bit resolution</td>
    </tr>
    <tr>
      <td><strong>Current Regulation Response</strong></td>
      <td>&lt;100ms</td>
      <td>TLE92466ED ICC response time</td>
    </tr>
    <tr>
      <td><strong>Telemetry Latency</strong></td>
      <td>&lt;50ms</td>
      <td>Time to read all telemetry</td>
    </tr>
  </tbody>
</table></div>
<h3 id="current-regulation-accuracy">
  
  
    <a href="#current-regulation-accuracy" class="anchor-heading" aria-labelledby="current-regulation-accuracy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Current Regulation Accuracy
  
  
</h3>
    

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>Condition</th>
      <th>Typical Error</th>
      <th>Maximum Error</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Normal Operation</strong></td>
      <td>Â±2-5%</td>
      <td>Â±10%</td>
    </tr>
    <tr>
      <td><strong>Low Current (&lt;500mA)</strong></td>
      <td>Â±5-10%</td>
      <td>Â±15%</td>
    </tr>
    <tr>
      <td><strong>High Current (&gt;1000mA)</strong></td>
      <td>Â±2-5%</td>
      <td>Â±10%</td>
    </tr>
    <tr>
      <td><strong>Parallel Operation</strong></td>
      <td>Â±3-7%</td>
      <td>Â±12%</td>
    </tr>
  </tbody>
</table></div>

<p><strong>Note</strong>: Accuracy depends on load characteristics, power supply stability, and temperature.</p>
<h3 id="power-consumption">
  
  
    <a href="#power-consumption" class="anchor-heading" aria-labelledby="power-consumption"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Power Consumption
  
  
</h3>
    

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>Component</th>
      <th>Typical Current</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>ESP32-C6 (Idle)</strong></td>
      <td>20-30mA</td>
      <td>Without WiFi/BLE</td>
    </tr>
    <tr>
      <td><strong>ESP32-C6 (Active)</strong></td>
      <td>50-80mA</td>
      <td>During operation</td>
    </tr>
    <tr>
      <td><strong>TLE92466ED (VDD)</strong></td>
      <td>-</td>
      <td>5V input (powers central logic)</td>
    </tr>
    <tr>
      <td><strong>TLE92466ED (VIO)</strong></td>
      <td>10-20mA</td>
      <td>I/O level supply (for SPI)</td>
    </tr>
    <tr>
      <td><strong>Solenoid 1 (Max)</strong></td>
      <td>1500mA</td>
      <td>At maximum setpoint</td>
    </tr>
    <tr>
      <td><strong>Solenoid 2 (Max)</strong></td>
      <td>3000mA</td>
      <td>At maximum setpoint (parallel)</td>
    </tr>
  </tbody>
</table></div><hr />
<h2 id="safety-considerations">
  
  
    <a href="#safety-considerations" class="anchor-heading" aria-labelledby="safety-considerations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Safety Considerations
  
  
</h2>
    
<h3 id="electrical-safety">
  
  
    <a href="#electrical-safety" class="anchor-heading" aria-labelledby="electrical-safety"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Electrical Safety
  
  
</h3>
    

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Safety Guidelines                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  âš ï¸  HIGH VOLTAGE WARNING                                   â”‚
â”‚    â””â”€&gt; VBAT can be up to 41V (recommended operating)        â”‚
â”‚    â””â”€&gt; Use appropriate safety measures                      â”‚
â”‚    â””â”€&gt; Ensure proper grounding                              â”‚
â”‚                                                             â”‚
â”‚  âš ï¸  HIGH CURRENT WARNING                                   â”‚
â”‚    â””â”€&gt; Parallel operation can draw 3A+                       â”‚
â”‚    â””â”€&gt; Use appropriate wire gauge                           â”‚
â”‚    â””â”€&gt; Ensure connectors are rated for current             â”‚
â”‚                                                             â”‚
â”‚  âš ï¸  THERMAL CONSIDERATIONS                                 â”‚
â”‚    â””â”€&gt; TLE92466ED can get hot during operation              â”‚
â”‚    â””â”€&gt; Add heatsink if needed                               â”‚
â”‚    â””â”€&gt; Monitor temperature via telemetry                   â”‚
â”‚                                                             â”‚
â”‚  âš ï¸  SHORT CIRCUIT PROTECTION                               â”‚
â”‚    â””â”€&gt; TLE92466ED has built-in protection                   â”‚
â”‚    â””â”€&gt; Monitor FAULTN pin                                    â”‚
â”‚    â””â”€&gt; Check telemetry for fault conditions                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h3 id="operational-safety">
  
  
    <a href="#operational-safety" class="anchor-heading" aria-labelledby="operational-safety"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Operational Safety
  
  
</h3>
    

<ol>
  <li><strong>Start with Low Currents</strong>: Begin testing at minimum current setpoints</li>
  <li><strong>Monitor Telemetry</strong>: Watch for faults and warnings</li>
  <li><strong>Check Temperatures</strong>: Ensure adequate cooling</li>
  <li><strong>Verify Wiring</strong>: Double-check all connections before powering on</li>
  <li><strong>Use Fuses</strong>: Add appropriate fuses in power supply lines</li>
  <li><strong>Emergency Stop</strong>: Have a way to quickly disable power (EN pin or power supply)</li>
</ol><hr />
<h2 id="related-documentation">
  
  
    <a href="#related-documentation" class="anchor-heading" aria-labelledby="related-documentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Related Documentation
  
  
</h2>
    
<h3 id="esp32-examples">
  
  
    <a href="#esp32-examples" class="anchor-heading" aria-labelledby="esp32-examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ESP32 Examples
  
  
</h3>
    
<ul>
  <li><a href="/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html">Driver Integration Test</a> - Driver API validation (no hardware)</li>
  <li><a href="/hf-tle92466ed-driver/development/examples/esp32/main/TLE92466ED_TestFramework.hpp">Test Framework Reference</a> - Framework API</li>
  <li><a href="/hf-tle92466ed-driver/development/examples/esp32/main/TLE92466ED_TestConfig.hpp">Hardware Configuration</a> - Pin and parameter config</li>
  <li><a href="/hf-tle92466ed-driver/development/examples/esp32/main/Esp32TleCommInterface.hpp">ESP32-C6 CommInterface</a> - CommInterface implementation</li>
</ul>
<h3 id="driver-documentation">
  
  
    <a href="#driver-documentation" class="anchor-heading" aria-labelledby="driver-documentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Driver Documentation
  
  
</h3>
    
<ul>
  <li><a href="/hf-tle92466ed-driver/development/docs/07_Driver_API/">Driver API Reference</a> - Complete API documentation</li>
  <li><a href="/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/">CommInterface Implementation Guide</a> - Porting to new platforms</li>
  <li><a href="/hf-tle92466ed-driver/development/docs/03_Register_Map/">Register Map</a> - TLE92466ED register details</li>
  <li><a href="/hf-tle92466ed-driver/development/docs/06_Diagnostics/">Diagnostics</a> - Fault detection and handling</li>
</ul>
<h3 id="hardware-documentation">
  
  
    <a href="#hardware-documentation" class="anchor-heading" aria-labelledby="hardware-documentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hardware Documentation
  
  
</h3>
    
<ul>
  <li><a href="../../../Datasheet/">TLE92466ED Datasheet</a> - Complete IC specifications</li>
  <li><a href="https://www.espressif.com/sites/default/files/documentation/esp32-c6_technical_reference_manual_en.pdf">ESP32-C6 Technical Reference</a> - MCU documentation</li>
</ul><hr />
<h2 id="notes">
  
  
    <a href="#notes" class="anchor-heading" aria-labelledby="notes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Notes
  
  
</h2>
    

<ul>
  <li>This test requires actual solenoids and proper power supplies</li>
  <li>VBAT is <strong>required</strong> for solenoid operation (unlike driver integration test)</li>
  <li>Both solenoids use the same ADC percentage but different current ranges</li>
  <li>Parallel operation automatically shares current between channels</li>
  <li>Telemetry updates every 1 second</li>
  <li>Control loop updates every 100ms for responsive current control</li>
  <li>The test runs continuously until reset or power cycle</li>
</ul><hr />

<p><strong>Example</strong>: Solenoid Control Test<br />
<strong>Platform</strong>: ESP32-C6<br />
<strong>Framework</strong>: FreeRTOS<br />
<strong>Status</strong>: âœ… Production Ready<br />
<strong>Hardware Required</strong>: TLE92466ED IC + Two Solenoids + Power Supplies</p>

          

          
            
          
        </main>
        

  <hr>
  <footer>
    

    <!-- =============================================================================
     Custom Footer Content for HardFOC Driver Documentation
     =============================================================================
     This footer is displayed at the bottom of every page.
     ============================================================================= -->

<footer class="site-footer">
  <div class="site-footer-credits">
    <p>Built with â¤ï¸ using <a href="https://just-the-docs.github.io/just-the-docs/">Just the Docs</a></p>
    <p>
      <a href="https://github.com/n3b3x/hf-tle92466ed-driver/development/blob/main/LICENSE">GPL v3 License</a> â€¢ 
      <a href="https://github.com/n3b3x/hf-tle92466ed-driver/development">View on GitHub</a>
    </p>
  </div>
</footer>



    
  </footer>


      </div>
    </div>
    
      
<button id="search-button" class="search-button btn-reset" aria-label="Focus on search">
  <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-search"></use></svg>
</button>


<div class="search-overlay"></div>

    
  </div>

  
</body>
</html>

