{"0": {
    "doc": "ğŸ“š Documentation",
    "title": "TLE92466ED Driver Documentation",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/#tle92466ed-driver-documentation",
    
    "relUrl": "/docs/#tle92466ed-driver-documentation"
  },"1": {
    "doc": "ğŸ“š Documentation",
    "title": "Quick Navigation",
    "content": "This documentation provides complete information about the TLE92466ED IC and its C++ driver implementation. ",
    "url": "/hf-tle92466ed-driver/development/docs/#quick-navigation",
    
    "relUrl": "/docs/#quick-navigation"
  },"2": {
    "doc": "ğŸ“š Documentation",
    "title": "Documentation Structure",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 . | docs/ â”œâ”€â”€ 00_INDEX.md â† You are here â”œâ”€â”€ 01_IC_Overview.md Device specifications and architecture â”œâ”€â”€ 02_SPI_Protocol.md 32-bit SPI communication with CRC â”œâ”€â”€ 03_Register_Map.md Complete register reference â”œâ”€â”€ 04_Current_Control.md ICC (Integrated Current Control) system â”œâ”€â”€ 05_Channel_Modes.md Operation modes and configuration â”œâ”€â”€ 06_Diagnostics.md Fault detection and monitoring â”œâ”€â”€ 07_Driver_API.md C++ driver interface reference â”œâ”€â”€ 08_HAL_Implementation.md Hardware abstraction guide â””â”€â”€ 09_Usage_Examples.md Practical implementation examples . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/#documentation-structure",
    
    "relUrl": "/docs/#documentation-structure"
  },"3": {
    "doc": "ğŸ“š Documentation",
    "title": "Document Purpose",
    "content": "| Document | Content | Use Case | . | IC_Overview | Device capabilities, pin functions, electrical specs | Understanding hardware | . | SPI_Protocol | 32-bit frame structure, CRC calculation | Low-level communication | . | Register_Map | All 108 registers with bit fields | Register programming | . | Current_Control | ICC configuration, PWM, dither | Precision current control | . | Channel_Modes | Config/Mission modes, parallel operation | System configuration | . | Diagnostics | Fault flags, protection features | System monitoring | . | Driver_API | C++ class methods and types | Software integration | . | HAL_Implementation | Platform-specific SPI interface | Hardware porting | . | Usage_Examples | Complete working code | Quick start | . ",
    "url": "/hf-tle92466ed-driver/development/docs/#document-purpose",
    
    "relUrl": "/docs/#document-purpose"
  },"4": {
    "doc": "ğŸ“š Documentation",
    "title": "Quick Start Guide",
    "content": "For immediate implementation: . | Hardware Setup: Review 01_IC_Overview.md for pin connections | HAL Creation: Follow 08_HAL_Implementation.md to create your platform HAL | Basic Usage: Copy code from 09_Usage_Examples.md | Advanced Features: Consult specific feature documentation as needed | . ",
    "url": "/hf-tle92466ed-driver/development/docs/#quick-start-guide",
    
    "relUrl": "/docs/#quick-start-guide"
  },"5": {
    "doc": "ğŸ“š Documentation",
    "title": "Key Specifications",
    "content": ". | Device: TLE92466ED Six-Channel Low-Side Solenoid Driver | Channels: 6 independent outputs | Current Control: 0-2A (single), 0-4A (parallel) | Resolution: 15-bit (0.061mA steps) | SPI: 32-bit frames with CRC-8 | C++ Standard: C++23 | Driver Version: 2.0.0 | . ",
    "url": "/hf-tle92466ed-driver/development/docs/#key-specifications",
    
    "relUrl": "/docs/#key-specifications"
  },"6": {
    "doc": "ğŸ“š Documentation",
    "title": "Reference Information",
    "content": ". | Datasheet: Infineon TLE92466ED Rev. 1.2 (2022-02-01) | Driver Source: inc/TLE92466ED.hpp, src/TLE92466ED.cpp | Examples: examples/basic_usage.cpp | Build System: CMake 3.15+ | . ",
    "url": "/hf-tle92466ed-driver/development/docs/#reference-information",
    
    "relUrl": "/docs/#reference-information"
  },"7": {
    "doc": "ğŸ“š Documentation",
    "title": "Support &amp; Resources",
    "content": ". | Compiler Requirements: GCC 12.0+, Clang 16.0+, MSVC 19.33+ (C++23) | Dependencies: None (freestanding-compatible) | License: Public Domain | . Navigation: Next: IC Overview â†’ . ",
    "url": "/hf-tle92466ed-driver/development/docs/#support--resources",
    
    "relUrl": "/docs/#support--resources"
  },"8": {
    "doc": "ğŸ“š Documentation",
    "title": "ğŸ“š Documentation",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/",
    
    "relUrl": "/docs/"
  },"9": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "TLE92466ED IC Overview",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#tle92466ed-ic-overview",
    
    "relUrl": "/docs/01_IC_Overview/#tle92466ed-ic-overview"
  },"10": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Device Description",
    "content": "The TLE92466ED is a sophisticated six-channel low-side solenoid driver IC designed for automotive and industrial applications requiring precise current control of inductive loads. ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#device-description",
    
    "relUrl": "/docs/01_IC_Overview/#device-description"
  },"11": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Device Classification",
    "content": "| 1 2 3 . | Device Family: Infineon PROFETâ„¢ + (Protected High-Current Switch) Type: Low-Side Switch with Current Control Application: Solenoid actuators, valves, relays . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#device-classification",
    
    "relUrl": "/docs/01_IC_Overview/#device-classification"
  },"12": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Key Features",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#key-features",
    
    "relUrl": "/docs/01_IC_Overview/#key-features"
  },"13": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Current Control System",
    "content": ". | Integrated Current Controller (ICC) with 15-bit resolution | Range: 0-2000 mA (single channel), 0-4000 mA (parallel mode) | Resolution: 0.061 mA per LSB (single), 0.122 mA (parallel) | Dither support for precise current shaping (up to 1800 mA amplitude) | PWM-based regulation with configurable frequency | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#current-control-system",
    
    "relUrl": "/docs/01_IC_Overview/#current-control-system"
  },"14": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Channel Configuration",
    "content": ". | 6 independent output channels | Parallel operation pairs: CH0/CH3, CH1/CH2, CH4/CH5 | Per-channel configuration and diagnostics | Individual enable/disable control | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#channel-configuration",
    
    "relUrl": "/docs/01_IC_Overview/#channel-configuration"
  },"15": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Protection &amp; Diagnostics",
    "content": ". | Open load detection (ON and OFF states) | Short to ground detection | Over-current protection (configurable threshold) | Over-temperature monitoring (warning + error) | Supply voltage monitoring (VBAT, VIO, VDD) | Load current feedback | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#protection--diagnostics",
    
    "relUrl": "/docs/01_IC_Overview/#protection--diagnostics"
  },"16": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Communication &amp; Safety",
    "content": ". | 32-bit SPI with 8-bit CRC (SAE J1850) | SPI watchdog for communication monitoring | Clock watchdog for oscillator verification | Unique 48-bit chip identification | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#communication--safety",
    
    "relUrl": "/docs/01_IC_Overview/#communication--safety"
  },"17": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Device Pinout",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 . | TLE92466ED â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” VBAT (1) â”€â”€â”€â”€â”¤ 1 32 â”œâ”€â”€â”€â”€ GND (32) OUT0 (2) â”€â”€â”€â”€â”¤ 2 31 â”œâ”€â”€â”€â”€ OUT5 (31) OUT1 (3) â”€â”€â”€â”€â”¤ 3 30 â”œâ”€â”€â”€â”€ OUT4 (30) OUT2 (4) â”€â”€â”€â”€â”¤ 4 29 â”œâ”€â”€â”€â”€ OUT3 (29) RESN (5) â”€â”€â”€â”€â”¤ 5 28 â”œâ”€â”€â”€â”€ CSN (28) CSN (6) â”€â”€â”€â”€â”¤ 6 27 â”œâ”€â”€â”€â”€ SCK (27) SCK (7) â”€â”€â”€â”€â”¤ 7 26 â”œâ”€â”€â”€â”€ SI (26) SI (8) â”€â”€â”€â”€â”¤ 8 25 â”œâ”€â”€â”€â”€ VIO (25) VIO (9) â”€â”€â”€â”€â”¤ 9 24 â”œâ”€â”€â”€â”€ SO (24) SO (10) â”€â”€â”€â”¤ 10 23 â”œâ”€â”€â”€â”€ EN (23) EN (11) â”€â”€â”€â”¤ 11 22 â”œâ”€â”€â”€â”€ DRV0 (22) DRV0 (12) â”€â”€â”€â”¤ 12 21 â”œâ”€â”€â”€â”€ DRV1 (21) DRV1 (13) â”€â”€â”€â”¤ 13 20 â”œâ”€â”€â”€â”€ FAULTN (20) FAULTN (14) â”€â”€â”€â”¤ 14 19 â”œâ”€â”€â”€â”€ VDD (19) VDD (15) â”€â”€â”€â”¤ 15 18 â”œâ”€â”€â”€â”€ GND (18) GND (16) â”€â”€â”€â”¤ 16 17 â”œâ”€â”€â”€â”€ VBAT (17) â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ PG-DSO-32 Package . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#device-pinout",
    
    "relUrl": "/docs/01_IC_Overview/#device-pinout"
  },"18": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Pin Functions",
    "content": "| Pin | Name | Type | Function | . | 1, 17 | VBAT | Power | Battery voltage supply (5.5V - 41V) | . | 2-4, 29-31 | OUT0-5 | Output | Low-side switch outputs | . | 5 | RESN | Input | Active-low reset (disables outputs, resets registers) | . | 6, 28 | CSN | Input | SPI chip select (active low) | . | 7, 27 | SCK | Input | SPI clock (up to 10 MHz) | . | 8, 26 | SI | Input | SPI data input (MOSI) | . | 9, 25 | VIO | Power | SPI I/O voltage (3.3V or 5.0V) | . | 10, 24 | SO | Output | SPI data output (MISO) | . | 11, 23 | EN | Input | Global enable (active high) | . | 12, 22 | DRV0 | Input | External drive input 0 | . | 13, 21 | DRV1 | Input | External drive input 1 | . | 14, 20 | FAULTN | Output | Active-low fault indication (open drain) | . | 15, 19 | VDD | Power | Internal 5V supply output | . | 16, 18, 32 | GND | Ground | Ground connection | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#pin-functions",
    
    "relUrl": "/docs/01_IC_Overview/#pin-functions"
  },"19": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Electrical Specifications",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#electrical-specifications",
    
    "relUrl": "/docs/01_IC_Overview/#electrical-specifications"
  },"20": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Absolute Maximum Ratings",
    "content": "| Parameter | Min | Max | Unit | . | VBAT (Battery Voltage) | -0.3 | 45 | V | . | VIO (I/O Voltage) | -0.3 | 6 | V | . | VDD Load Current | - | 10 | mA | . | Output Current (per channel) | - | 2 | A | . | Output Current (parallel) | - | 4 | A | . | Junction Temperature | -40 | 175 | Â°C | . | Storage Temperature | -55 | 150 | Â°C | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#absolute-maximum-ratings",
    
    "relUrl": "/docs/01_IC_Overview/#absolute-maximum-ratings"
  },"21": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Recommended Operating Conditions",
    "content": "| Parameter | Min | Typ | Max | Unit | . | VBAT (Battery Voltage) | 5.5 | 12/24 | 41 | V | . | VIO (I/O Voltage) | 3.0 | 3.3/5.0 | 5.5 | V | . | Junction Temperature | -40 | - | 150 | Â°C | . | SPI Clock Frequency | 0.1 | - | 10 | MHz | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#recommended-operating-conditions",
    
    "relUrl": "/docs/01_IC_Overview/#recommended-operating-conditions"
  },"22": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Current Control Specifications",
    "content": "| Parameter | Min | Typ | Max | Unit | Notes | . | Current Range (single) | 0 | - | 2000 | mA | Per channel | . | Current Range (parallel) | 0 | - | 4000 | mA | Paired channels | . | Current Resolution | - | 0.061 | - | mA | 15-bit | . | Current Accuracy | - | Â±5 | Â±10 | % | At 25Â°C | . | Dither Amplitude | 0 | - | 1800 | mA | Configurable | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#current-control-specifications",
    
    "relUrl": "/docs/01_IC_Overview/#current-control-specifications"
  },"23": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Slew Rate Control",
    "content": "| Setting | Value | Application | . | 00b | 1.0 V/Âµs | Low EMI, slow switching | . | 01b | 2.5 V/Âµs | Standard operation | . | 10b | 5.0 V/Âµs | Fast switching | . | 11b | 10.0 V/Âµs | Maximum speed | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#slew-rate-control",
    
    "relUrl": "/docs/01_IC_Overview/#slew-rate-control"
  },"24": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Functional Block Diagram",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 . | TLE92466ED Architecture â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ 5V Reg â”‚â”€â”€â”€â”€â–¶â”‚ Clock Gen â”‚â”€â”€â”€â”€â–¶â”‚ SPI Interface â”‚ â”‚ â”‚ â”‚ (VDD) â”‚ â”‚ &amp; Watchdog â”‚ â”‚ 32-bit CRC â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Control Logic &amp; State Machine â”‚ â”‚ â”‚ â”‚ (Config Mode / Mission Mode Management) â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”â”‚ â”‚ â”‚ Channel 0 â”‚ â”‚ Channel 1 â”‚ ... â”‚ Channel 5 â”‚â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚ â”‚ â”‚ â”‚ ICC â”‚ â”‚ â”‚ â”‚ ICC â”‚ â”‚ â”‚ â”‚ ICC â”‚ â”‚â”‚ â”‚ â”‚ â”‚ PWM â”‚ â”‚ â”‚ â”‚ PWM â”‚ â”‚ â”‚ â”‚ PWM â”‚ â”‚â”‚ â”‚ â”‚ â”‚ Dither â”‚ â”‚ â”‚ â”‚ Dither â”‚ â”‚ â”‚ â”‚ Dither â”‚ â”‚â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚â”‚ â”‚ â”‚ â”‚ Driver â”‚ â”‚ â”‚ â”‚ Driver â”‚ â”‚ â”‚ â”‚ Driver â”‚ â”‚â”‚ â”‚ â”‚ â”‚ Stage â”‚ â”‚ â”‚ â”‚ Stage â”‚ â”‚ â”‚ â”‚ Stage â”‚ â”‚â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚â”‚ â”‚ â”‚ â”‚Diag &amp; â”‚ â”‚ â”‚ â”‚Diag &amp; â”‚ â”‚ â”‚ â”‚Diag &amp; â”‚ â”‚â”‚ â”‚ â”‚ â”‚Feedback â”‚ â”‚ â”‚ â”‚Feedback â”‚ â”‚ â”‚ â”‚Feedback â”‚ â”‚â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”˜â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â–¼ â–¼ â–¼ â”‚ â”‚ OUT0 OUT1 OUT5 â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â–¼ â–¼ â–¼ Load 0 Load 1 Load 5 . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#functional-block-diagram",
    
    "relUrl": "/docs/01_IC_Overview/#functional-block-diagram"
  },"25": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Typical Application Circuit",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 . | Microcontroller TLE92466ED â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ VCC (3.3/5V) â”€â”€â”¤ VCC â”‚ â”‚ VIO â”€â”€â”€â”€â”€â”¼â”€â”€ VCC â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ SPI_CS CSNâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ CSN â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ SPI_CLK SCKâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ SCK â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ SPI_MOSI SIâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ SI â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ SPI_MISO SOâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ SO â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ GPIO ENâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ EN â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ GPIO RESN â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ RESN â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ GPIO FAULTNâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ FAULTN â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ GND â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ GND â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ VBAT â”€â”€â”€â”€â”¼â”€â”€ 12/24V â”‚ â”‚ â”‚ OUT0 â”€â”€â”€â”€â”¼â”€â”€â” â”‚ OUT1 â”€â”€â”€â”€â”¼â”€â”€â”¤ â”‚ OUT2 â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€ Solenoids â”‚ OUT3 â”€â”€â”€â”€â”¼â”€â”€â”¤ (Inductive) â”‚ OUT4 â”€â”€â”€â”€â”¼â”€â”€â”¤ â”‚ OUT5 â”€â”€â”€â”€â”¼â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ External Components: - Decoupling: 100nF ceramic + 10ÂµF electrolytic on VBAT - VIO decoupling: 100nF ceramic - Pull-up on FAULTN: 10kÎ© to VIO - Pull-down on RESN: 10kÎ© to GND (optional) . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#typical-application-circuit",
    
    "relUrl": "/docs/01_IC_Overview/#typical-application-circuit"
  },"26": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Operating Modes",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#operating-modes",
    
    "relUrl": "/docs/01_IC_Overview/#operating-modes"
  },"27": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Mode Structure",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 . | Power-On Reset â”‚ â–¼ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Config Mode â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ - Configure â”‚ â”‚ â”‚ - Set modes â”‚ OP_MODE=0 â”‚ â”‚ - Parallel â”‚ â”‚ â”‚ - No outputs â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ OP_MODE=1 â”‚ â”‚ â”‚ â–¼ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ Mission Mode â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ - Enable CH â”‚ â”‚ â”‚ - Outputs ON â”‚ Faults or â”‚ â”‚ - Monitor â”‚ Reset â”‚ â”‚ - Control â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#mode-structure",
    
    "relUrl": "/docs/01_IC_Overview/#mode-structure"
  },"28": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Config Mode",
    "content": ". | Purpose: Configuration and initialization | Access: Register writes to mode-locked registers | Outputs: All channels disabled | Use Cases: Startup configuration, mode changes, parallel setup | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#config-mode",
    
    "relUrl": "/docs/01_IC_Overview/#config-mode"
  },"29": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Mission Mode",
    "content": ". | Purpose: Normal operation | Access: Channel enable/disable, current control | Outputs: Enabled channels active | Use Cases: Runtime operation, current control, monitoring | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#mission-mode",
    
    "relUrl": "/docs/01_IC_Overview/#mission-mode"
  },"30": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Power Sequencing",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 . | Time â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ VBAT â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”˜ VIO â”€â”€â”€â”€â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ RESN â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ tRES â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SPI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” Access â”‚ Communication ready â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Notes: - tRES (min): 1 Âµs pulse width - Power-up delay: ~1 ms after VBAT/VIO stable - SPI accessible after tPOR + tRES . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#power-sequencing",
    
    "relUrl": "/docs/01_IC_Overview/#power-sequencing"
  },"31": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Performance Characteristics",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#performance-characteristics",
    
    "relUrl": "/docs/01_IC_Overview/#performance-characteristics"
  },"32": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Current Control Accuracy",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 . | Output Current vs Setpoint (Typical, 25Â°C) Iout â”‚ â•± 2Aâ”‚ â•± â”‚ â•± 1.5Aâ”‚ â•± â”‚ â•± 1Aâ”‚ â•± â”‚ â•± 0.5Aâ”‚ â•± â”‚ â•± 0Aâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Setpoint 0 0.5A 1A 1.5A 2A Accuracy: Â±5% typical, Â±10% maximum . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#current-control-accuracy",
    
    "relUrl": "/docs/01_IC_Overview/#current-control-accuracy"
  },"33": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "Temperature Characteristics",
    "content": ". | Operating: -40Â°C to +150Â°C junction | Over-temperature warning: ~165Â°C | Over-temperature error: ~175Â°C | Thermal shutdown: Automatic channel disable | . | Navigation: â† Index | Next: SPI Protocol â†’ | . ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/#temperature-characteristics",
    
    "relUrl": "/docs/01_IC_Overview/#temperature-characteristics"
  },"34": {
    "doc": "ğŸ”Œ IC Overview",
    "title": "ğŸ”Œ IC Overview",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/01_IC_Overview/",
    
    "relUrl": "/docs/01_IC_Overview/"
  },"35": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "SPI Protocol",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/#spi-protocol",
    
    "relUrl": "/docs/02_SPI_Protocol/#spi-protocol"
  },"36": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "Overview",
    "content": "The TLE92466ED uses a 32-bit SPI protocol with 8-bit CRC (SAE J1850) for robust communication. This is a full-duplex, synchronous serial interface operating in SPI Mode 0. ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/#overview",
    
    "relUrl": "/docs/02_SPI_Protocol/#overview"
  },"37": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "Protocol Specifications",
    "content": "| Parameter | Value | Notes | . | Frame Size | 32 bits | Single transaction | . | CRC | 8-bit SAE J1850 | Polynomial 0x1D | . | Mode | 0 (CPOL=0, CPHA=0) | Data sampled on rising edge | . | Frequency | 100 kHz - 10 MHz | Typical: 1-2 MHz | . | Bit Order | MSB first | Most significant bit first | . | CS Polarity | Active low | Pull low during transfer | . ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/#protocol-specifications",
    
    "relUrl": "/docs/02_SPI_Protocol/#protocol-specifications"
  },"38": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "Frame Structure",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/#frame-structure",
    
    "relUrl": "/docs/02_SPI_Protocol/#frame-structure"
  },"39": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "32-Bit Frame Layout",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 . | Bit Position: 31 30 29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 ... 0 â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” MOSI (Write): â”‚ CRC (8) â”‚ ADDR (7) â”‚R/Wâ”‚ DATA (16) â”‚ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” MISO (Reply): â”‚ CRC (8) â”‚RM â”‚ STATUS(5) â”‚R/Wâ”‚ DATA (16) â”‚ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Field Breakdown: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Bits [31:24] â”‚ CRC â”‚ 8-bit CRC checksum (SAE J1850) â”‚ â”‚ Bits [23:17] â”‚ ADDRESS â”‚ 7-bit register address (MOSI) â”‚ â”‚ Bits [23:22] â”‚ RPLY_MOD â”‚ Reply mode indicator (MISO) â”‚ â”‚ Bits [21:17] â”‚ STATUS â”‚ 5-bit status field (MISO) â”‚ â”‚ Bit [16] â”‚ R/W â”‚ 1=Write, 0=Read â”‚ â”‚ Bits [15:0] â”‚ DATA â”‚ 16-bit data payload â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ```text ### MOSI (Master Out, Slave In) - Write Frame ```text Write Transaction Format: 31 24 23 17 16 15 0 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ CRC (8) â”‚ ADDR (7) â”‚ 1 â”‚ DATA (16) â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Computed Target Write Value to checksum register flag write Example: Write 0x1234 to register 0x0002 (GLOBAL_CONFIG) Step 1: Build frame without CRC Bits [23:17] = 0x01 (0x0002 &gt;&gt; 3 = 0x01, upper 7 bits) Bit [16] = 1 (Write operation) Bits [15:0] = 0x1234 (Data to write) Step 2: Calculate CRC on bits [23:0] Input: 0x00 0x02 0x34 (3 bytes, address + R/W + data) CRC : 0xXX (computed) Step 3: Complete frame [31:24] = CRC, [23:0] = 0x012341234 ```text ### MOSI (Master Out, Slave In) - Read Frame ```text Read Transaction Format: 31 24 23 17 16 15 0 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ CRC (8) â”‚ Don't Care â”‚ 0 â”‚ ADDRESS (16) â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Computed Ignored Read Full register checksum flag address Example: Read register 0x0100 (CH0 SETPOINT) Step 1: Build frame without CRC Bits [23:17] = Don't care Bit [16] = 0 (Read operation) Bits [15:0] = 0x0100 (Register address) Step 2: Calculate CRC on bits [23:0] Input: 0x00 0x00 0x01 0x00 (3 bytes) CRC : 0xXX (computed) Step 3: Complete frame [31:24] = CRC, [23:0] = 0x00000100 ```text ### MISO (Master In, Slave Out) - Reply Frame Types #### Type 1: 16-Bit Reply Frame (Standard) ```text 31 24 23 22 21 17 16 15 0 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ CRC (8) â”‚ 0â”‚ 0â”‚ STATUS (5) â”‚R/Wâ”‚ DATA (16) â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Computed Reply Status Echo Register checksum Mode flags R/W contents Reply Mode [23:22] = 00b: Standard 16-bit data Status [21:17]: Error/status indication R/W [16]: Echoes request R/W bit Data [15:0]: Register value or last write acknowledgment ```text #### Type 2: 22-Bit Reply Frame (Extended Data) ```text 31 24 23 22 21 0 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ CRC (8) â”‚ 0â”‚ 1â”‚ EXTENDED DATA (22) â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Computed Reply Extended feedback data checksum Mode (e.g., current measurements) Reply Mode [23:22] = 01b: Extended 22-bit data Used for: High-resolution feedback registers ```text #### Type 3: Critical Fault Frame ```text 31 24 23 22 21 0 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ CRC (8) â”‚ 1â”‚ 0â”‚ Don't Care â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Computed Reply Undefined checksum Mode Reply Mode [23:22] = 10b: Critical fault condition Indicates: Severe hardware fault, device in safe state ```text ## SPI Status Codes ### Status Field [21:17] Encoding ```text Status Bits: 5-bit field in MISO reply â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Code â”‚ Meaning â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚00000 â”‚ No error - transaction successful â”‚ â”‚00001 â”‚ SPI frame error - invalid frame format â”‚ â”‚00010 â”‚ Parity/CRC error - checksum mismatch â”‚ â”‚00011 â”‚ Write to read-only register - access denied â”‚ â”‚00100 â”‚ Internal bus fault - hardware issue â”‚ â”‚00101 â”‚ Internal bus fault - alternate code â”‚ â”‚00110 â”‚ Internal bus fault - alternate code â”‚ â”‚xxxxx â”‚ Other codes reserved â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Priority: Lower encoding = higher priority (If multiple errors, lowest code is reported) ```text ## CRC Calculation ### SAE J1850 CRC-8 Algorithm ```text Polynomial: 0x1D (x^8 + x^4 + x^3 + x^2 + 1) Init Value: 0xFF Final XOR: 0xFF Bit Order: MSB first Algorithm Pseudocode: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ function calculate_crc8(data[], length): â”‚ â”‚ crc = 0xFF // Initialize â”‚ â”‚ for each byte in data: â”‚ â”‚ crc = crc XOR byte // Mix in data byte â”‚ â”‚ for bit = 0 to 7: // Process 8 bits â”‚ â”‚ if crc &amp; 0x80: // Check MSB â”‚ â”‚ crc = (crc &lt;&lt; 1) XOR 0x1D â”‚ â”‚ else: â”‚ â”‚ crc = (crc &lt;&lt; 1) â”‚ â”‚ return crc XOR 0xFF // Final inversion â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ```text ### CRC Calculation Example ```text Example: Calculate CRC for write to GLOBAL_CONFIG Frame contents (before CRC): Address [23:17] = 0x01 R/W [16] = 1 Data [15:0] = 0x4005 Bytes to CRC (bits [23:0] = 3 bytes): Byte 0: 0x02 (bits [23:16]) Byte 1: 0x40 (bits [15:8]) Byte 2: 0x05 (bits [7:0]) Step-by-step: crc = 0xFF Process 0x02: crc = 0xFF XOR 0x02 = 0xFD [bit processing yields] crc = 0xC5 Process 0x40: crc = 0xC5 XOR 0x40 = 0x85 [bit processing yields] crc = 0x7A Process 0x05: crc = 0x7A XOR 0x05 = 0x7F [bit processing yields] crc = 0x23 Final XOR: crc = 0x23 XOR 0xFF = 0xDC Result: CRC = 0xDC Complete frame: 0xDC024005 ```text ## Communication Timing ### SPI Timing Diagram ```text CSN â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ tCSS tCSH SCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜ tSCKH tSCKL 32 clock cycles SI/SO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ B31â”‚ B30â”‚ B29â”‚ ... â”‚ B2 â”‚ B1 â”‚ B0 â”œâ”€â”€â”€â”€â”€â”€ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜ tSU tH Timing Parameters: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â” â”‚ Parameter â”‚ Min â”‚ Typical â”‚ Max â”‚ Unit â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ â”‚ tSCK (Clock period)â”‚ 100 â”‚ - â”‚ - â”‚ ns â”‚ â”‚ tCSS (CS setup) â”‚ 50 â”‚ - â”‚ - â”‚ ns â”‚ â”‚ tCSH (CS hold) â”‚ 50 â”‚ - â”‚ - â”‚ ns â”‚ â”‚ tSU (Data setup) â”‚ 20 â”‚ - â”‚ - â”‚ ns â”‚ â”‚ tH (Data hold) â”‚ 20 â”‚ - â”‚ - â”‚ ns â”‚ â”‚ tCSI (CS inactive) â”‚ 100 â”‚ - â”‚ - â”‚ ns â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜ ```text ### Transaction Sequence ```text Complete Read/Write Sequence: Transaction 1: Write Command â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MCU â†’ IC: [WRITE CMD: 0xXX + CRC + ADDR + DATA] IC â†’ MCU: [RESPONSE: Previous register state] Transaction 2: Read Back (optional verify) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MCU â†’ IC: [READ CMD: 0xXX + CRC + ADDR] IC â†’ MCU: [RESPONSE: Current register state] Timing: CSN â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ T1 T2 Notes: - Response to write contains previous value - Read returns current value from addressed register - Minimum 100ns between transactions ```text ## Transaction Examples ### Example 1: Initialize Global Configuration ```text Objective: Enable CRC, watchdogs, 3.3V VIO Register: GLOBAL_CONFIG (0x0002) Value: 0x4005 (CLK_WD_EN | SPI_WD_EN | CRC_EN) Transaction Breakdown: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Step 1: Build MOSI frame â”‚ â”‚ Address: 0x0002 â†’ [23:17] = 0x00, [16] = 1 (write) â”‚ â”‚ Data: 0x4005 â”‚ â”‚ Bytes for CRC: [0x02, 0x40, 0x05] â”‚ â”‚ CRC: 0xDC (calculated) â”‚ â”‚ Complete: 0xDC024005 â”‚ â”‚ â”‚ â”‚ Step 2: SPI Transfer â”‚ â”‚ MOSI: 0xDC024005 â”‚ â”‚ MISO: 0xXXXXXXXX (previous register value + status) â”‚ â”‚ â”‚ â”‚ Step 3: Verify (optional) â”‚ â”‚ Read back GLOBAL_CONFIG to confirm â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/#32-bit-frame-layout",
    
    "relUrl": "/docs/02_SPI_Protocol/#32-bit-frame-layout"
  },"40": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "Example 2: Read Channel Status",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 . | Objective: Read CH0 current setpoint Register: CH0_SETPOINT (0x0100) Transaction Breakdown: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Step 1: Build MOSI frame â”‚ â”‚ Address: 0x0100 â†’ [15:0] = 0x0100, [16] = 0 (read) â”‚ â”‚ Bytes for CRC: [0x00, 0x01, 0x00] â”‚ â”‚ CRC: 0xXX (calculated) â”‚ â”‚ Complete: 0xXX000100 â”‚ â”‚ â”‚ â”‚ Step 2: SPI Transfer â”‚ â”‚ MOSI: 0xXX000100 â”‚ â”‚ MISO: 0xYY000567 (register value = 0x0567) â”‚ â”‚ â””â”€â”¬â”€â”˜ â”‚ â”‚ CRC â”‚ â”‚ â”‚ â”‚ Step 3: Verify CRC &amp; Extract Data â”‚ â”‚ Status [21:17]: Check for errors â”‚ â”‚ Data [15:0]: 0x0567 = current setpoint â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/#example-2-read-channel-status",
    
    "relUrl": "/docs/02_SPI_Protocol/#example-2-read-channel-status"
  },"41": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "Example 3: Error Handling",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 . | Scenario: Write to read-only register Transaction: MOSI: Write to ICVID (0x0200, read-only) MISO: Status = 0b00011 (Write to RO register) Response Handling: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Parse MISO frame: â”‚ â”‚ [31:24]: CRC â†’ Verify â”‚ â”‚ [23:22]: Reply Mode = 00 (normal) â”‚ â”‚ [21:17]: Status = 0b00011 â†’ ERROR! â”‚ â”‚ [16]: R/W echo â”‚ â”‚ [15:0]: Undefined (ignore) â”‚ â”‚ â”‚ â”‚ Error Response: â”‚ â”‚ - Retry not recommended â”‚ â”‚ - Check register address â”‚ â”‚ - Verify register is writable â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/#example-3-error-handling",
    
    "relUrl": "/docs/02_SPI_Protocol/#example-3-error-handling"
  },"42": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "Best Practices",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/#best-practices",
    
    "relUrl": "/docs/02_SPI_Protocol/#best-practices"
  },"43": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "Transaction Management",
    "content": ". | CRC Verification: Always verify outgoing CRC before transmission, verify incoming CRC after reception, and reject frames with CRC mismatch. | Status Checking: After every transaction, parse the status field [21:17], handle errors appropriately, and log unexpected status codes. | Timing Compliance: Ensure the minimum CS inactive time is 100 ns, maintain proper setup and hold times, and keep the clock frequency within limits. | Error Recovery: On error, check the CRC first, verify the register address, retry with exponential backoff (maximum three attempts), and reset communication if the issue persists. | . ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/#transaction-management",
    
    "relUrl": "/docs/02_SPI_Protocol/#transaction-management"
  },"44": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "Performance Optimization",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 . | Recommended SPI Frequency: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Application â”‚ Frequency â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Debug/Development â”‚ 100-500 kHz (easier to debug) â”‚ â”‚ Normal Operation â”‚ 1-2 MHz (good balance) â”‚ â”‚ High Performance â”‚ 5-10 MHz (maximum throughput) â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Transaction Rate: - 32 bits @ 1 MHz = 32 Âµs per transaction - +100ns CS gap = ~33 Âµs total - Max rate: ~30,000 transactions/second . | . | Navigation: â† IC Overview | Next: Register Map â†’ | . ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/#performance-optimization",
    
    "relUrl": "/docs/02_SPI_Protocol/#performance-optimization"
  },"45": {
    "doc": "ğŸ“¡ SPI Protocol",
    "title": "ğŸ“¡ SPI Protocol",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/02_SPI_Protocol/",
    
    "relUrl": "/docs/02_SPI_Protocol/"
  },"46": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Register Map",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#register-map",
    
    "relUrl": "/docs/03_Register_Map/#register-map"
  },"47": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Register Organization",
    "content": "The TLE92466ED contains 108 registers organized into two categories: . ```text Register Space (10-bit addressing: 0x000 - 0x3FF) . â”œâ”€â”€ Central/Global Registers (0x0000 - 0x0207) â”‚ â”œâ”€â”€ Control &amp; Config (0x0000 - 0x0019) â”‚ â”œâ”€â”€ Diagnostics (0x000A - 0x0018) â”‚ â”œâ”€â”€ Test &amp; BIST (0x003F) â”‚ â””â”€â”€ Feedback &amp; ID (0x0200 - 0x0207) â”‚ â””â”€â”€ Per-Channel Registers (0x0100 - 0x01BF) â”œâ”€â”€ Channel 0: 0x0100 - 0x011F â”œâ”€â”€ Channel 1: 0x0120 - 0x013F â”œâ”€â”€ Channel 2: 0x0140 - 0x015F â”œâ”€â”€ Channel 3: 0x0160 - 0x017F â”œâ”€â”€ Channel 4: 0x0180 - 0x019F â””â”€â”€ Channel 5: 0x01A0 - 0x01BF . Channel Address Calculation: Base = 0x0100 + (Channel_Number Ã— 0x0020) Register = Base + Offset ```text . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#register-organization",
    
    "relUrl": "/docs/03_Register_Map/#register-organization"
  },"48": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Register Access Types",
    "content": "| Type | Description | Behavior | . | r | Read-only | Write has no effect | . | rw | Read/Write | Standard read and write | . | rwh | Read/Write, clear on write 1 | Write 1 to clear (fault flags) | . | rh | Read, hardware sets | Software read-only, HW updates | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#register-access-types",
    
    "relUrl": "/docs/03_Register_Map/#register-access-types"
  },"49": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Central Registers Summary",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#central-registers-summary",
    
    "relUrl": "/docs/03_Register_Map/#central-registers-summary"
  },"50": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Control &amp; Configuration",
    "content": "| Address | Name | Type | Default | Description | . | 0x0000 | CH_CTRL | rw | 0x0000 | Channel control and mode | . | 0x0002 | GLOBAL_CONFIG | rw | 0x4005 | Global configuration | . | 0x0006 | VBAT_TH | rwh | 0xFF19 | VBAT thresholds | . | 0x0007 | FB_FRZ | rw | 0x0000 | Feedback freeze control | . | 0x0008 | FB_UPD | rw | 0x0000 | Feedback update control | . | 0x0009 | WD_RELOAD | rw | 0x0000 | SPI watchdog reload | . | 0x0019 | CLK_DIV | rw | 0x0000 | Clock divider | . | 0x003F | SFF_BIST | rw | 0x0000 | Built-in self-test | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#control--configuration",
    
    "relUrl": "/docs/03_Register_Map/#control--configuration"
  },"51": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Diagnostics",
    "content": "| Address | Name | Type | Default | Description | . | 0x0003 | GLOBAL_DIAG0 | rwh/rw | 0x0600 | Global diagnostics 0 | . | 0x0004 | GLOBAL_DIAG1 | rwh/rw | 0x0000 | Global diagnostics 1 | . | 0x0005 | GLOBAL_DIAG2 | rwh/rw | 0x0000 | Global diagnostics 2 | . | 0x000A-F | DIAG_ERR_CHGRx | rh | 0x0000 | Channel error flags (6) | . | 0x0010-15 | DIAG_WARN_CHGRx | rh | 0x0000 | Channel warning flags (6) | . | 0x0016 | FAULT_MASK0 | rw | 0x0000 | Fault mask register 0 | . | 0x0017 | FAULT_MASK1 | rw | 0x0000 | Fault mask register 1 | . | 0x0018 | FAULT_MASK2 | rw | 0x0000 | Fault mask register 2 | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#diagnostics",
    
    "relUrl": "/docs/03_Register_Map/#diagnostics"
  },"52": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Feedback &amp; Status",
    "content": "| Address | Name | Type | Default | Description | . | 0x0200 | ICVID | r | - | IC version and ID | . | 0x0201 | PIN_STAT | rh | varies | Pin status feedback | . | 0x0202 | FB_STAT | rh | varies | Feedback status | . | 0x0203 | FB_VOLTAGE1 | rh | varies | VBAT voltage | . | 0x0204 | FB_VOLTAGE2 | rh | varies | VIO/VDD voltage | . | 0x0205-7 | CHIPID0-2 | r | unique | Unique chip ID (48-bit) | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#feedback--status",
    
    "relUrl": "/docs/03_Register_Map/#feedback--status"
  },"53": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Per-Channel Registers Summary",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#per-channel-registers-summary",
    
    "relUrl": "/docs/03_Register_Map/#per-channel-registers-summary"
  },"54": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Control &amp; Setpoint",
    "content": "| Offset | Name | Type | Default | Description | . | 0x0000 | SETPOINT | rwh | 0x0000 | Current setpoint (15-bit) | . | 0x0001 | CTRL | rw | 0x4600 | Channel control | . | 0x000C | MODE | rw | 0x0000 | Channel operation mode | . | 0x000D | TON | rw | 0x0000 | Direct drive on-time | . | 0x000E | CTRL_INT_THRESH | rw | 0x0003 | Integrator threshold | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#control--setpoint",
    
    "relUrl": "/docs/03_Register_Map/#control--setpoint"
  },"55": {
    "doc": "ğŸ“‹ Register Map",
    "title": "ICC &amp; PWM",
    "content": "| Offset | Name | Type | Default | Description | . | 0x0002 | PERIOD | rw | 0x0000 | PWM frequency control | . | 0x0003 | INTEGRATOR_LIMIT | rw | 0x43FF | Integrator limits | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#icc--pwm",
    
    "relUrl": "/docs/03_Register_Map/#icc--pwm"
  },"56": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Dither",
    "content": "| Offset | Name | Type | Default | Description | . | 0x0004 | DITHER_CLK_DIV | rw | 0x0000 | Dither clock divider | . | 0x0005 | DITHER_STEP | rw | 0x0000 | Dither steps | . | 0x0006 | DITHER_CTRL | rw | 0x0000 | Dither control | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#dither",
    
    "relUrl": "/docs/03_Register_Map/#dither"
  },"57": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Configuration &amp; Feedback",
    "content": "| Offset | Name | Type | Default | Description | . | 0x0007 | CH_CONFIG | rwh | 0x0003 | Channel configuration | . | 0x0200 | FB_DC | rh | varies | Duty cycle feedback | . | 0x0201 | FB_VBAT | rh | varies | VBAT feedback | . | 0x0202 | FB_I_AVG | rh | varies | Average current | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#configuration--feedback",
    
    "relUrl": "/docs/03_Register_Map/#configuration--feedback"
  },"58": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Detailed Register Descriptions",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#detailed-register-descriptions",
    
    "relUrl": "/docs/03_Register_Map/#detailed-register-descriptions"
  },"59": {
    "doc": "ğŸ“‹ Register Map",
    "title": "CH_CTRL (0x0000) - Channel Control",
    "content": "text Bits: 15 14 13 12 11-6 5 4 3 2 1 0 â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”‚OP â”‚PR â”‚PR â”‚PR â”‚Res â”‚EN â”‚EN â”‚EN â”‚EN â”‚EN â”‚EN â”‚ â”‚MODâ”‚1_2â”‚0_3â”‚4_5â”‚ â”‚CH5â”‚CH4â”‚CH3â”‚CH2â”‚CH1â”‚CH0â”‚ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ text . | Bit | Field | Type | Description | . | 15 | OP_MODE | rw | 0=Config Mode, 1=Mission Mode | . | 14 | CH_PAR_1_2 | rw | Parallel channels 1/2 | . | 13 | CH_PAR_0_3 | rw | Parallel channels 0/3 | . | 12 | CH_PAR_4_5 | rw | Parallel channels 4/5 | . | 5-0 | EN_CHx | rw | Enable channel x (Mission mode only) | . Notes: . | Channel enable requires Mission Mode | Parallel configuration requires Config Mode | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#ch_ctrl-0x0000---channel-control",
    
    "relUrl": "/docs/03_Register_Map/#ch_ctrl-0x0000---channel-control"
  },"60": {
    "doc": "ğŸ“‹ Register Map",
    "title": "GLOBAL_CONFIG (0x0002) - Global Configuration",
    "content": "text Bits: 15 14 13 12 11-6 5 4 3 2 1 0 â”Œâ”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”‚Resâ”‚VIOâ”‚UV â”‚OT â”‚Res â”‚V15â”‚V15â”‚Rsâ”‚CRCâ”‚SPIâ”‚CLKâ”‚ â”‚ â”‚SELâ”‚OV â”‚TSTâ”‚ â”‚OV â”‚UV â”‚ â”‚EN â”‚WD â”‚WD â”‚ â””â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ text . | Bit | Field | Description | . | 14 | VIO_SEL | VIO voltage: 0=3.3V, 1=5.0V | . | 13 | UV_OV_SWAP | Test UV/OV swap | . | 12 | OT_TEST | Test over-temperature | . | 5 | V1V5_OV_TEST | Test 1.5V OV detection | . | 4 | V1V5_UV_TEST | Test 1.5V UV detection | . | 2 | CRC_EN | Enable CRC checking | . | 1 | SPI_WD_EN | Enable SPI watchdog | . | 0 | CLK_WD_EN | Enable clock watchdog | . Default: 0x4005 (CRC + watchdogs enabled, 3.3V VIO) . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#global_config-0x0002---global-configuration",
    
    "relUrl": "/docs/03_Register_Map/#global_config-0x0002---global-configuration"
  },"61": {
    "doc": "ğŸ“‹ Register Map",
    "title": "SETPOINT (0x0100 + ChÃ—0x20) - Current Setpoint",
    "content": "text Bits: 15 14 0 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚AUTO_LIMITâ”‚ TARGET (15-bit) â”‚ â”‚ _DIS â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ text . | Bits | Field | Description | . | 14:0 | TARGET | Current setpoint value | . | 15 | AUTO_LIMIT_DIS | Disable auto-limit feature | . Current Calculation: text Single mode: I_set = 2000mA Ã— TARGET / 32767 Parallel mode: I_set = 4000mA Ã— TARGET / 32767 Resolution: 0.061mA (single), 0.122mA (parallel) text . Example Values: . | TARGET | Current (Single) | Current (Parallel) | . | 0x0000 | 0 mA | 0 mA | . | 0x1000 | 250 mA | 500 mA | . | 0x4000 | 1000 mA | 2000 mA | . | 0x6000 | 1500 mA | 3000 mA | . | 0x7FFF | 2000 mA | 4000 mA | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#setpoint-0x0100--ch0x20---current-setpoint",
    
    "relUrl": "/docs/03_Register_Map/#setpoint-0x0100--ch0x20---current-setpoint"
  },"62": {
    "doc": "ğŸ“‹ Register Map",
    "title": "CH_CONFIG (0x0107 + ChÃ—0x20) - Channel Configuration",
    "content": "text Bits: 15 14 13 12 7 6 4 3 2 1 0 â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â” â”‚OFFâ”‚OFFâ”‚OC_DG â”‚ OL_TH_FIX â”‚OL_TH â”‚IDAGâ”‚SLEWâ”‚ â”‚DG1â”‚DG0â”‚ _EN â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜ text . | Bits | Field | Description | . | 1:0 | SLEWR | Slew rate: 00=1V/Âµs, 01=2.5V/Âµs, 10=5V/Âµs, 11=10V/Âµs | . | 3:2 | I_DIAG | OFF diagnostic current: 00=80ÂµA, 01=190ÂµA, 10=720ÂµA, 11=1250ÂµA | . | 6:4 | OL_TH | Open load threshold (relative to setpoint, 0=disabled, 1-7=1/8 to 7/8) | . | 12:7 | OL_TH_FIXED | Fixed open load threshold | . | 13 | OC_DIAG_EN | Enable OC diagnosis in OFF state | . | 15:14 | OFF_DIAG_CH | OFF diagnostic control: 00=enabled, 01=LS only, 10=HS only | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#ch_config-0x0107--ch0x20---channel-configuration",
    
    "relUrl": "/docs/03_Register_Map/#ch_config-0x0107--ch0x20---channel-configuration"
  },"63": {
    "doc": "ğŸ“‹ Register Map",
    "title": "MODE (0x010C + ChÃ—0x20) - Channel Mode",
    "content": "text Bits: 15 4 3 0 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Reserved â”‚ CH_MODE â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ text . | Value | Mode | Description | . | 0x0 | Off | Channel disabled | . | 0x1 | ICC | Integrated Current Control (main mode) | . | 0x2 | Direct SPI | Direct drive via TON register | . | 0x3 | Direct DRV0 | Direct drive via DRV0 pin | . | 0x4 | Direct DRV1 | Direct drive via DRV1 pin | . | 0xC | Measurement | Free-running measurement mode | . Note: Mode changes require Config Mode . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#mode-0x010c--ch0x20---channel-mode",
    
    "relUrl": "/docs/03_Register_Map/#mode-0x010c--ch0x20---channel-mode"
  },"64": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Register Access Patterns",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#register-access-patterns",
    
    "relUrl": "/docs/03_Register_Map/#register-access-patterns"
  },"65": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Initialization Sequence",
    "content": "```text . | Power-on / Reset â”œâ”€ Device in Config Mode (OP_MODE=0) â””â”€ All channels disabled . | Configure Global Settings â”œâ”€ Write GLOBAL_CONFIG (CRC, watchdogs, VIO) â”œâ”€ Write VBAT_TH (voltage thresholds) â””â”€ Write WD_RELOAD (if SPI watchdog enabled) . | Configure Channels (per channel) â”œâ”€ Write MODE (select ICC/Direct/etc.) â”œâ”€ Write CH_CONFIG (slew, diagnostics) â”œâ”€ Write SETPOINT (current target) â”œâ”€ Write PERIOD (if using ICC PWM) â””â”€ Write DITHER_xxx (if using dither) . | Enter Mission Mode â””â”€ Write CH_CTRL with OP_MODE=1 . | Enable Channels â””â”€ Write CH_CTRL with EN_CHx=1 ```text . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#initialization-sequence",
    
    "relUrl": "/docs/03_Register_Map/#initialization-sequence"
  },"66": {
    "doc": "ğŸ“‹ Register Map",
    "title": "Runtime Monitoring",
    "content": "```text Periodic Reads: â”œâ”€ GLOBAL_DIAG0 (supply faults, temperature) â”œâ”€ DIAG_ERR_CHGRx (channel error flags) â”œâ”€ DIAG_WARN_CHGRx (channel warnings) â”œâ”€ FB_I_AVG (actual current per channel) â”œâ”€ FB_DC (duty cycle per channel) â””â”€ FB_VOLTAGE1/2 (supply voltages) . Watchdog Service: â””â”€ Write WD_RELOAD periodically (if enabled) ```text . | Navigation: â† SPI Protocol | Next: Current Control â†’ | . ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/#runtime-monitoring",
    
    "relUrl": "/docs/03_Register_Map/#runtime-monitoring"
  },"67": {
    "doc": "ğŸ“‹ Register Map",
    "title": "ğŸ“‹ Register Map",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/03_Register_Map/",
    
    "relUrl": "/docs/03_Register_Map/"
  },"68": {
    "doc": "âš¡ Current Control",
    "title": "Current Control (ICC)",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#current-control-icc",
    
    "relUrl": "/docs/04_Current_Control/#current-control-icc"
  },"69": {
    "doc": "âš¡ Current Control",
    "title": "Integrated Current Controller",
    "content": "The ICC (Integrated Current Controller) is the primary current regulation system providing precise 15-bit current control. ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#integrated-current-controller",
    
    "relUrl": "/docs/04_Current_Control/#integrated-current-controller"
  },"70": {
    "doc": "âš¡ Current Control",
    "title": "ICC Architecture",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 . | Current Control Loop: Setpoint â”€â”€â”€â–¶â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” (15-bit) â”‚ Difference â”‚â”€â”€â”€â”€â–¶â”‚Integratorâ”‚â”€â”€â”€â”€â–¶â”‚ PWM â”‚ â”‚ Amp â”‚ â”‚ (ICC) â”‚ â”‚ Driver â”‚ â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â””â”€â”€â”€â”€â”¤ Current â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ Sense â”‚ Output â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ PWM Frequency: Configurable via PERIOD register Dither Overlay: Optional current modulation Regulation: Closed-loop with integrator . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#icc-architecture",
    
    "relUrl": "/docs/04_Current_Control/#icc-architecture"
  },"71": {
    "doc": "âš¡ Current Control",
    "title": "Current Resolution",
    "content": "15-Bit Precision: . | Single Mode: 0-2000 mA / 32767 steps = 0.061 mA/step | Parallel Mode: 0-4000 mA / 32767 steps = 0.122 mA/step | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#current-resolution",
    
    "relUrl": "/docs/04_Current_Control/#current-resolution"
  },"72": {
    "doc": "âš¡ Current Control",
    "title": "Setpoint Configuration",
    "content": "Formula: . | 1 2 . | TARGET = (I_desired Ã— 32767) / I_max Where: I_max = 2000mA (single) or 4000mA (parallel) . | . Examples: . | Desired Current | TARGET Value | Hex | . | 100 mA | 1638 | 0x0666 | . | 500 mA | 8192 | 0x2000 | . | 1000 mA | 16384 | 0x4000 | . | 1500 mA | 24576 | 0x6000 | . | 2000 mA | 32767 | 0x7FFF | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#setpoint-configuration",
    
    "relUrl": "/docs/04_Current_Control/#setpoint-configuration"
  },"73": {
    "doc": "âš¡ Current Control",
    "title": "PWM Frequency Control",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#pwm-frequency-control",
    
    "relUrl": "/docs/04_Current_Control/#pwm-frequency-control"
  },"74": {
    "doc": "âš¡ Current Control",
    "title": "PERIOD Register Configuration",
    "content": "| 1 2 3 4 5 . | Bits: 15 12 11 10 8 7 0 â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚PWM_CTLâ”‚LOW â”‚PERIOD â”‚ PERIOD â”‚ â”‚_PARAM â”‚FREQâ”‚ _EXP â”‚ _MANT â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . | . Formula: . | 1 2 3 4 . | Standard: T_pwm = PERIOD_MANT Ã— 2^PERIOD_EXP Ã— (1/f_sys) Low Freq: T_pwm = PERIOD_MANT Ã— 8 Ã— 2^PERIOD_EXP Ã— (1/f_sys) Where f_sys â‰ˆ 8 MHz (internal clock) . | . Example Calculations: . | MANT | EXP | Low Freq | Frequency | Period | . | 100 | 0 | No | 80 kHz | 12.5 Âµs | . | 100 | 4 | No | 5 kHz | 200 Âµs | . | 50 | 6 | Yes | 312.5 Hz | 3.2 ms | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#period-register-configuration",
    
    "relUrl": "/docs/04_Current_Control/#period-register-configuration"
  },"75": {
    "doc": "âš¡ Current Control",
    "title": "Dither Support",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#dither-support",
    
    "relUrl": "/docs/04_Current_Control/#dither-support"
  },"76": {
    "doc": "âš¡ Current Control",
    "title": "Dither Waveform",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 . | Current vs Time (Dither Enabled): I_max â” â•±â–”â–”â–”â–”â–”â–”â–”â•² â•±â–”â–”â–”â–”â–”â–”â–”â•² â”‚ â•± â•² â•± â•² I_set â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Oâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â•² â•± â•² â•± I_min â”˜ â•²___________â•± â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Time â—„â”€â”€â”€â”€â”€ T_dither â”€â”€â”€â”€â”€â–¶ Components: - Steps: Number of increments in quarter period - Flat: Hold time at peak/valley - Step Size: Amplitude of each increment . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#dither-waveform",
    
    "relUrl": "/docs/04_Current_Control/#dither-waveform"
  },"77": {
    "doc": "âš¡ Current Control",
    "title": "Configuration Registers",
    "content": ". | DITHER_CLK_DIV: Reference clock period | DITHER_STEP: Steps and flat period | DITHER_CTRL: Step size and control | . Dither Amplitude: . | 1 . | I_dither = STEPS Ã— STEP_SIZE Ã— 2A / 32767 . | . Dither Period: . | 1 . | T_dither = [4Ã—STEPS + 2Ã—FLAT] Ã— t_ref_clk . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#configuration-registers",
    
    "relUrl": "/docs/04_Current_Control/#configuration-registers"
  },"78": {
    "doc": "âš¡ Current Control",
    "title": "Dither Use Cases",
    "content": "| Application | Configuration | Purpose | . | Solenoid Positioning | Small steps, high freq | Precise position control | . | Valve Control | Medium steps, low freq | Smooth flow transitions | . | Noise Reduction | Random steps | Break up acoustic noise | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#dither-use-cases",
    
    "relUrl": "/docs/04_Current_Control/#dither-use-cases"
  },"79": {
    "doc": "âš¡ Current Control",
    "title": "Integrator Control",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#integrator-control",
    
    "relUrl": "/docs/04_Current_Control/#integrator-control"
  },"80": {
    "doc": "âš¡ Current Control",
    "title": "INTEGRATOR_LIMIT Register",
    "content": "| 1 2 3 4 5 . | Bits: 15 14 10 9 0 â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚Rsâ”‚AUTO_LIM_VALUE â”‚ LIM_VALUE â”‚ â”‚ â”‚ _ABS â”‚ _ABS â”‚ â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . | . Purpose: . | Prevents integrator windup | Faster settling after setpoint changes | Two limits: Normal and Auto (after setpoint change) | . Recommended Values: . | Normal operation: 0x3FF (maximum) | Fast response: 0x1FF (reduced) | Auto-limit: 0x0FF (aggressive) | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#integrator_limit-register",
    
    "relUrl": "/docs/04_Current_Control/#integrator_limit-register"
  },"81": {
    "doc": "âš¡ Current Control",
    "title": "Current Measurement",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#current-measurement",
    
    "relUrl": "/docs/04_Current_Control/#current-measurement"
  },"82": {
    "doc": "âš¡ Current Control",
    "title": "Feedback Mechanism",
    "content": "| 1 2 3 4 5 6 7 . | Measurement Path: Load Current â”€â”€â–¶ Sense â”€â”€â–¶ ADC â”€â”€â–¶ Filter â”€â”€â–¶ FB_I_AVG â”‚ â”œâ”€â”€â–¶ Min/Max â”€â”€â–¶ FB_IMIN_IMAX â”‚ â””â”€â”€â–¶ DC Calc â”€â”€â–¶ FB_DC . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#feedback-mechanism",
    
    "relUrl": "/docs/04_Current_Control/#feedback-mechanism"
  },"83": {
    "doc": "âš¡ Current Control",
    "title": "Feedback Registers (Per Channel)",
    "content": "| Register | Content | Update Rate | . | FB_I_AVG | Average current over dither period | Dither period | . | FB_DC | PWM duty cycle (0-100%) | PWM period | . | FB_VBAT | Average VBAT | Configurable | . | FB_IMIN_IMAX | Min/Max current | Dither period | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#feedback-registers-per-channel",
    
    "relUrl": "/docs/04_Current_Control/#feedback-registers-per-channel"
  },"84": {
    "doc": "âš¡ Current Control",
    "title": "Parallel Operation",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#parallel-operation",
    
    "relUrl": "/docs/04_Current_Control/#parallel-operation"
  },"85": {
    "doc": "âš¡ Current Control",
    "title": "Channel Pairing",
    "content": "| 1 2 3 4 5 6 7 8 9 . | Available Pairs: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ CH0 â”‚ CH3 â”‚ â—€â”€â”€ Can be paralleled (4A) â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ CH1 â”‚ CH2 â”‚ â—€â”€â”€ Can be paralleled (4A) â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ CH4 â”‚ CH5 â”‚ â—€â”€â”€ Can be paralleled (4A) â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . | . Configuration: . | Enter Config Mode | Set CH_PAR_x_y bit in CH_CTRL | Configure both channels identically | Enter Mission Mode | Enable both channels | . Current Calculation (Parallel): . | 1 2 . | I_total = 4000mA Ã— TARGET / 32767 Max: 4000 mA (4A) . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#channel-pairing",
    
    "relUrl": "/docs/04_Current_Control/#channel-pairing"
  },"86": {
    "doc": "âš¡ Current Control",
    "title": "ICC Tuning Guidelines",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#icc-tuning-guidelines",
    
    "relUrl": "/docs/04_Current_Control/#icc-tuning-guidelines"
  },"87": {
    "doc": "âš¡ Current Control",
    "title": "Response Time vs Stability",
    "content": "| 1 2 3 4 5 6 7 8 . | Fast Response Stability (High Gains) (Low Gains) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚ â”‚ â”‚ â”‚ Unstable Aggressive Balanced Slow Recommended: Balanced (middle range) . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#response-time-vs-stability",
    
    "relUrl": "/docs/04_Current_Control/#response-time-vs-stability"
  },"88": {
    "doc": "âš¡ Current Control",
    "title": "Parameter Recommendations",
    "content": "| Load Type | PWM_CTRL_PARAM | INT_THRESH | Response | . | Resistive | 0x8 | 0x100 | Fast | . | Inductive (low L) | 0x6 | 0x80 | Medium | . | Inductive (high L) | 0x4 | 0x40 | Slow | . | Solenoid | 0x5 | 0x60 | Balanced | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#parameter-recommendations",
    
    "relUrl": "/docs/04_Current_Control/#parameter-recommendations"
  },"89": {
    "doc": "âš¡ Current Control",
    "title": "Tuning Process",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 . | 1. Start with default values â”œâ”€ PWM_CTRL_PARAM = 0x6 â”œâ”€ INT_THRESH = 0x80 â””â”€ INTEGRATOR_LIMIT = 0x3FF 2. Observe step response â””â”€ Apply setpoint step change 3. Adjust based on behavior â”œâ”€ Oscillation? â†’ Reduce PWM_CTRL_PARAM â”œâ”€ Too slow? â†’ Increase PWM_CTRL_PARAM â””â”€ Overshoot? â†’ Reduce INT_THRESH 4. Fine-tune integrator limits â””â”€ Reduce for faster settling . | . | Navigation: â† Register Map | Next: Channel Modes â†’ | . ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/#tuning-process",
    
    "relUrl": "/docs/04_Current_Control/#tuning-process"
  },"90": {
    "doc": "âš¡ Current Control",
    "title": "âš¡ Current Control",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/04_Current_Control/",
    
    "relUrl": "/docs/04_Current_Control/"
  },"91": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Channel Modes",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#channel-modes",
    
    "relUrl": "/docs/05_Channel_Modes/#channel-modes"
  },"92": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Operation Modes Overview",
    "content": "The TLE92466ED supports multiple channel operation modes, each designed for specific applications. Modes are configured per-channel in Config Mode. ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#operation-modes-overview",
    
    "relUrl": "/docs/05_Channel_Modes/#operation-modes-overview"
  },"93": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode Architecture",
    "content": "```text Device Modes: Channel Modes: . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 . | â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Config Mode â”‚ â”‚ 0x0: Off â”‚ â”‚ â”‚ â”‚ 0x1: ICC â”‚ â”‚ - Configure â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 0x2: Direct SPI â”‚ â”‚ - Set modes â”‚ â”‚ 0x3: Direct DRV0â”‚ â”‚ - No outputs â”‚ â”‚ 0x4: Direct DRV1â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ 0xC: Measurementâ”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ OP_MODE=1 â–¼ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Mission Mode â”‚ â”‚ â”‚ â”‚ - Enable CH â”‚ â”‚ - Outputs ON â”‚ â”‚ - Control â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ```text . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-architecture",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-architecture"
  },"94": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Device Operating Modes",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#device-operating-modes",
    
    "relUrl": "/docs/05_Channel_Modes/#device-operating-modes"
  },"95": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Config Mode (OP_MODE=0)",
    "content": "Purpose: Configuration and initialization . Characteristics: . | All channels disabled (outputs OFF) | Mode-locked registers writable | Parallel operation configurable | Channel modes changeable | . Use Cases: . | Initial device setup | Changing channel modes | Configuring parallel operation | Reconfiguring after faults | . Restrictions: . | Channels cannot be enabled | No output switching possible | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#config-mode-op_mode0",
    
    "relUrl": "/docs/05_Channel_Modes/#config-mode-op_mode0"
  },"96": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mission Mode (OP_MODE=1)",
    "content": "Purpose: Normal operation . Characteristics: . | Channels can be enabled | Outputs controllable | Real-time current control | Diagnostics active | . Use Cases: . | Normal operation | Current control | Real-time monitoring | . Restrictions: . | Mode-locked registers read-only | Cannot change channel modes | Cannot configure parallel operation | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mission-mode-op_mode1",
    
    "relUrl": "/docs/05_Channel_Modes/#mission-mode-op_mode1"
  },"97": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode Switching",
    "content": "```text Transition Sequence: . | 1 2 3 4 5 6 7 8 9 10 11 . | Config â†’ Mission: 1. Write CH_CTRL with OP_MODE=1 2. Device transitions (immediate) 3. Channels can now be enabled 4. System ready for operation Mission â†’ Config: 1. Write CH_CTRL with OP_MODE=0 2. All channels disabled automatically 3. Device transitions (immediate) 4. Configuration registers unlocked ```text . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-switching",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-switching"
  },"98": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Channel Operation Modes",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#channel-operation-modes",
    
    "relUrl": "/docs/05_Channel_Modes/#channel-operation-modes"
  },"99": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode 0x0: Off",
    "content": "Description: Channel disabled . Configuration: cpp driver.set_channel_mode(Channel::CH0, ChannelMode::OFF); text . Behavior: . | Output stage disabled | No current flow | Diagnostics inactive (except OFF-state) | Lowest power consumption | . Use Cases: . | Unused channels | Disable during fault | Power saving | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-0x0-off",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-0x0-off"
  },"100": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode 0x1: ICC (Integrated Current Control)",
    "content": "Description: Precision current regulation . Configuration: cpp driver.set_channel_mode(Channel::CH0, ChannelMode::ICC); driver.set_current_setpoint(Channel::CH0, 1500); // 1.5A text . Behavior: . | Closed-loop current control | PWM-based regulation | 15-bit resolution (0.061mA steps) | Dither support | Current feedback available | . Control Loop: text Setpoint â†’ Difference â†’ Integrator â†’ PWM â†’ Output â–² â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€ Sense â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ text . Use Cases: . | Solenoid actuators (primary use) | Valve control | Precise current applications | Variable force control | . Parameters: . | SETPOINT: Current target (15-bit) | PERIOD: PWM frequency | INTEGRATOR_LIMIT: Windup prevention | DITHER_xxx: Current shaping | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-0x1-icc-integrated-current-control",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-0x1-icc-integrated-current-control"
  },"101": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode 0x2: Direct Drive (SPI)",
    "content": "Description: Time-based output control via SPI . Configuration: cpp driver.set_channel_mode(Channel::CH0, ChannelMode::DIRECT_DRIVE_SPI); // Configure on-time in TON register text . Behavior: . | Output ON for specified duration | No current regulation | Time configured in TON register | Repeated automatically | . Timing: ```text t_on = [(TON_MANT + 1) Ã— 2^EXP] Ã— (1/f_sys) . | 1 2 . | Where: EXP from DITHER_CLK_DIV register f_sys â‰ˆ 8 MHz ```text . | . Use Cases: . | Simple ON/OFF control | Pulsed operation | Fixed duty cycle | No current feedback needed | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-0x2-direct-drive-spi",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-0x2-direct-drive-spi"
  },"102": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode 0x3: Direct Drive (DRV0 Pin)",
    "content": "Description: External hardware control via DRV0 pin . Configuration: cpp driver.set_channel_mode(Channel::CH0, ChannelMode::DIRECT_DRIVE_DRV0); text . Behavior: . | Output follows DRV0 pin state | Hardware-controlled timing | Low latency response | No SPI communication needed | . Pin Control: ```text DRV0 Pin: â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ . | 1 2 3 . | Output: â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ (Follows DRV0) ```text . | . Use Cases: . | External PWM control | Hardware sequencing | Emergency override | Minimal software overhead | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-0x3-direct-drive-drv0-pin",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-0x3-direct-drive-drv0-pin"
  },"103": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode 0x4: Direct Drive (DRV1 Pin)",
    "content": "Description: External hardware control via DRV1 pin . Configuration: cpp driver.set_channel_mode(Channel::CH0, ChannelMode::DIRECT_DRIVE_DRV1); text . Behavior: Same as DRV0 but using DRV1 pin . Use Cases: . | Dual external control | Independent hardware sequencing | Multi-source control | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-0x4-direct-drive-drv1-pin",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-0x4-direct-drive-drv1-pin"
  },"104": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode 0xC: Free-Running Measurement",
    "content": "Description: Continuous current measurement without output . Configuration: cpp driver.set_channel_mode(Channel::CH0, ChannelMode::FREE_RUN_MEAS); text . Behavior: . | Output disabled | Current sensing active | 2^16 samples collected | Feedback registers updated | . Use Cases: . | Load characterization | Diagnostic measurements | System calibration | Fault analysis | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-0xc-free-running-measurement",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-0xc-free-running-measurement"
  },"105": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Parallel Operation",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#parallel-operation",
    
    "relUrl": "/docs/05_Channel_Modes/#parallel-operation"
  },"106": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Channel Pairing",
    "content": "The TLE92466ED allows three parallel pairs: . ```text â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ CH0 â”‚ CH3 â”‚ â—„â”€â”€ Pair 0/3 (4A max) â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ CH1 â”‚ CH2 â”‚ â—„â”€â”€ Pair 1/2 (4A max) â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ CH4 â”‚ CH5 â”‚ â—„â”€â”€ Pair 4/5 (4A max) â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ . | 1 2 3 4 . | Configuration: CH_CTRL register - Bit 14: CH_PAR_1_2 - Bit 13: CH_PAR_0_3 - Bit 12: CH_PAR_4_5 ```text . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#channel-pairing",
    
    "relUrl": "/docs/05_Channel_Modes/#channel-pairing"
  },"107": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Parallel Configuration Sequence",
    "content": "```text . | Enter Config Mode â””â”€ Write CH_CTRL with OP_MODE=0 . | Configure Parallel Pair (e.g., CH0/CH3) â””â”€ Set CH_PAR_0_3 bit in CH_CTRL . | Configure Both Channels Identically â”œâ”€ Same MODE (typically ICC) â”œâ”€ Same SETPOINT â”œâ”€ Same CH_CONFIG â””â”€ Same PWM/Dither settings . | Enter Mission Mode â””â”€ Write CH_CTRL with OP_MODE=1 . | Enable Both Channels â””â”€ Set EN_CH0 and EN_CH3 in CH_CTRL ```text . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#parallel-configuration-sequence",
    
    "relUrl": "/docs/05_Channel_Modes/#parallel-configuration-sequence"
  },"108": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Parallel Mode Considerations",
    "content": "Current Calculation: ```text Single: I_max = 2000 mA Parallel: I_max = 4000 mA . TARGET value same for both, but total current doubles ```text . Load Connection: ```text Parallel Connection: . | 1 2 3 4 5 6 7 8 9 10 11 12 13 . | VBAT â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”Œâ”€â”€â”´â”€â”€â” â”Œâ”€â”€â”´â”€â”€â” â”‚ â”‚ CH0 â”‚ â”‚ CH3 â”‚ â”‚ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”Œâ”€â”€â”´â”€â”€â” â”‚ â”‚Load â”‚ (Heavy, 0-4A) â”‚ â””â”€â”€â”¬â”€â”€â”˜ â”‚ â”‚ â”‚ GNDâ—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ```text . | . Restrictions: . | Only predefined pairs can be paralleled | Both channels must have identical configuration | Parallel configuration only in Config Mode | Cannot mix modes in parallel pair | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#parallel-mode-considerations",
    
    "relUrl": "/docs/05_Channel_Modes/#parallel-mode-considerations"
  },"109": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode Selection Guidelines",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-selection-guidelines",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-selection-guidelines"
  },"110": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Decision Matrix",
    "content": "| Application | Mode | Rationale | . | Solenoid actuator | ICC | Precise force control | . | Proportional valve | ICC + Dither | Smooth positioning | . | On/off valve | Direct SPI | Simple control | . | PWM-controlled load | Direct DRV0/1 | Hardware timing | . | Heavy solenoid (&gt;2A) | ICC + Parallel | High current | . | System diagnostic | Measurement | Characterization | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#decision-matrix",
    
    "relUrl": "/docs/05_Channel_Modes/#decision-matrix"
  },"111": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode Switching at Runtime",
    "content": "Not Allowed in Mission Mode: . | Cannot change channel mode without Config Mode | Must return to Config Mode first | . Proper Sequence: ```text . | Disable channel (clear EN_CHx) | Enter Config Mode (OP_MODE=0) | Change mode (write MODE register) | Reconfigure channel parameters | Enter Mission Mode (OP_MODE=1) | Enable channel (set EN_CHx) ```text | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-switching-at-runtime",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-switching-at-runtime"
  },"112": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Mode Configuration Examples",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#mode-configuration-examples",
    
    "relUrl": "/docs/05_Channel_Modes/#mode-configuration-examples"
  },"113": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Example 1: ICC with Dither",
    "content": "```cpp // Enter Config Mode driver.enter_config_mode(); . // Configure channel for ICC mode driver.set_channel_mode(Channel::CH0, ChannelMode::ICC); . // Set 1.2A current with dither driver.set_current_setpoint(Channel::CH0, 1200); driver.configure_dither(Channel::CH0, 100, // step_size 20, // num_steps 5); // flat_steps . // Enter Mission Mode and enable driver.enter_mission_mode(); driver.enable_channel(Channel::CH0, true); ```text . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#example-1-icc-with-dither",
    
    "relUrl": "/docs/05_Channel_Modes/#example-1-icc-with-dither"
  },"114": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Example 2: Parallel Operation",
    "content": "```cpp // Enter Config Mode driver.enter_config_mode(); . // Enable parallel operation CH0/CH3 driver.set_parallel_operation(ParallelPair::CH0_CH3, true); . // Configure both channels identically ChannelConfig config{ .mode = ChannelMode::ICC, .current_setpoint_ma = 3000, // 3A total .slew_rate = SlewRate::MEDIUM_2V5_US }; . driver.configure_channel(Channel::CH0, config); driver.configure_channel(Channel::CH3, config); . // Enter Mission Mode and enable both driver.enter_mission_mode(); driver.enable_channel(Channel::CH0, true); driver.enable_channel(Channel::CH3, true); ```text . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#example-2-parallel-operation",
    
    "relUrl": "/docs/05_Channel_Modes/#example-2-parallel-operation"
  },"115": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "Example 3: Direct Drive",
    "content": "```cpp // Enter Config Mode driver.enter_config_mode(); . // Configure for direct drive via SPI driver.set_channel_mode(Channel::CH0, ChannelMode::DIRECT_DRIVE_SPI); . // Configure on-time (example: 10ms) // TON_MANT Ã— 2^EXP Ã— (1/8MHz) = 10ms // TON_MANT = 500, EXP = 4: 500 Ã— 16 / 8MHz â‰ˆ 1ms . // Enter Mission Mode and enable driver.enter_mission_mode(); driver.enable_channel(Channel::CH0, true); ```text . | Navigation: â† Current Control | Next: Diagnostics â†’ | . ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/#example-3-direct-drive",
    
    "relUrl": "/docs/05_Channel_Modes/#example-3-direct-drive"
  },"116": {
    "doc": "ğŸ›ï¸ Channel Modes",
    "title": "ğŸ›ï¸ Channel Modes",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/05_Channel_Modes/",
    
    "relUrl": "/docs/05_Channel_Modes/"
  },"117": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Diagnostics &amp; Protection",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#diagnostics--protection",
    
    "relUrl": "/docs/06_Diagnostics/#diagnostics--protection"
  },"118": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Diagnostic System Overview",
    "content": "The TLE92466ED provides comprehensive diagnostics for fault detection, protection, and system monitoring. ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#diagnostic-system-overview",
    
    "relUrl": "/docs/06_Diagnostics/#diagnostic-system-overview"
  },"119": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Diagnostic Architecture",
    "content": "```text Diagnostic Flow: . | 1 2 3 4 5 6 7 8 9 10 11 12 13 . | Channels (6) â”€â”€â”¬â”€â”€â–¶ Per-Channel Errors â”€â”€â–¶ DIAG_ERR_CHGRx â”‚ â”œâ”€â”€â–¶ Per-Channel Warnings â”€â–¶ DIAG_WARN_CHGRx â”‚ â””â”€â”€â–¶ Feedback Values â”€â”€â”€â”€â”€â”€â–¶ FB_xxx registers Global â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â–¶ Supply Faults â”€â”€â”€â”€â”€â”€â”€â”€â–¶ GLOBAL_DIAG0 â”‚ â”œâ”€â”€â–¶ Internal Faults â”€â”€â”€â”€â”€â”€â–¶ GLOBAL_DIAG1 â”‚ â””â”€â”€â–¶ Memory Faults â”€â”€â”€â”€â”€â”€â”€â”€â–¶ GLOBAL_DIAG2 Fault Output â”€â”€â–¶ FAULTN Pin (open drain, active low) ```text . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#diagnostic-architecture",
    
    "relUrl": "/docs/06_Diagnostics/#diagnostic-architecture"
  },"120": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Global Diagnostics",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#global-diagnostics",
    
    "relUrl": "/docs/06_Diagnostics/#global-diagnostics"
  },"121": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "GLOBAL_DIAG0 - Supply &amp; Temperature",
    "content": "| Bit | Flag | Type | Description | . | 14 | SPI_WD_ERR | Error | SPI watchdog timeout | . | 10 | POR_EVENT | Event | Power-on reset occurred | . | 9 | RES_EVENT | Event | External reset (RESN pin) | . | 8 | COTWARN | Warning | Central over-temperature warning | . | 7 | COTERR | Error | Central over-temperature error | . | 6 | CLK_NOK | Error | Clock fault detected | . | 5 | VDD_OV | Error | VDD overvoltage | . | 4 | VDD_UV | Error | VDD undervoltage | . | 3 | VIO_OV | Error | VIO overvoltage | . | 2 | VIO_UV | Error | VIO undervoltage | . | 1 | VBAT_OV | Error | VBAT overvoltage | . | 0 | VBAT_UV | Error | VBAT undervoltage | . Clearing: Write 1 to clear (rwh type) . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#global_diag0---supply--temperature",
    
    "relUrl": "/docs/06_Diagnostics/#global_diag0---supply--temperature"
  },"122": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "GLOBAL_DIAG1 - Internal Supplies",
    "content": "| Bit | Flag | Description | . | 15 | HVADC_ERR | HV ADC error | . | 6 | VPRE_OV | Pre-regulator OV | . | 5 | REF_OV | Reference OV | . | 4 | REF_UV | Reference UV | . | 3 | VDD2V5_OV | 2.5V supply OV | . | 2 | VDD2V5_UV | 2.5V supply UV | . | 1 | VR_IREF_OV | Bias current OV | . | 0 | VR_IREF_UV | Bias current UV | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#global_diag1---internal-supplies",
    
    "relUrl": "/docs/06_Diagnostics/#global_diag1---internal-supplies"
  },"123": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "GLOBAL_DIAG2 - Memory &amp; ECC",
    "content": "| Bit | Flag | Description | . | 4 | OTP_VIRGIN | OTP not configured | . | 3 | OTP_ECC_ERR | OTP multi-bit error | . | 1 | REG_ECC_ERR | Register ECC error | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#global_diag2---memory--ecc",
    
    "relUrl": "/docs/06_Diagnostics/#global_diag2---memory--ecc"
  },"124": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Channel Diagnostics",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#channel-diagnostics",
    
    "relUrl": "/docs/06_Diagnostics/#channel-diagnostics"
  },"125": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "DIAG_ERR_CHGRx - Error Flags",
    "content": "Per-channel error register (one per channel): . | Bit | Flag | Description | Action | . | 4 | OLSG | Open load or short to ground | Check load connection | . | 3 | OTE | Over-temperature error | Reduce current/improve cooling | . | 2 | OL | Open load | Check load connection | . | 1 | SG | Short to ground | Check wiring | . | 0 | OC | Over-current | Reduce setpoint/check load | . Reading: cpp auto diag = driver.get_channel_diagnostics(Channel::CH0); if (diag-&gt;overcurrent) { // Handle OC fault } text . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#diag_err_chgrx---error-flags",
    
    "relUrl": "/docs/06_Diagnostics/#diag_err_chgrx---error-flags"
  },"126": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "DIAG_WARN_CHGRx - Warning Flags",
    "content": "| Bit | Flag | Description | . | 3 | OLSG_WARN | OLSG warning | . | 2 | PWM_REG_WARN | PWM regulation warning | . | 1 | I_REG_WARN | Current regulation warning | . | 0 | OTW | Over-temperature warning | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#diag_warn_chgrx---warning-flags",
    
    "relUrl": "/docs/06_Diagnostics/#diag_warn_chgrx---warning-flags"
  },"127": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Protection Features",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#protection-features",
    
    "relUrl": "/docs/06_Diagnostics/#protection-features"
  },"128": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Over-Current Protection",
    "content": "Detection: ```text I_load &gt; I_setpoint + margin . | 1 2 3 . | Threshold: Configurable per channel Response: Immediate shutdown Recovery: Clear fault, re-enable ```text . | . Configuration: . | Automatic in ICC mode | Threshold based on setpoint | Fast response (&lt;10Âµs) | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#over-current-protection",
    
    "relUrl": "/docs/06_Diagnostics/#over-current-protection"
  },"129": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Open Load Detection",
    "content": "ON-State Detection: ```text I_load &lt; OL_TH Ã— I_setpoint . | 1 . | Where: OL_TH = 1/8 to 7/8 (configurable) ```text . | . OFF-State Detection: text Diagnostic current applied Voltage measured Load impedance calculated text . Configuration: cpp // Set OL threshold to 3/8 of setpoint ChannelConfig config{ .open_load_threshold = 3 // 3/8 threshold }; driver.configure_channel(Channel::CH0, config); text . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#open-load-detection",
    
    "relUrl": "/docs/06_Diagnostics/#open-load-detection"
  },"130": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Short to Ground Detection",
    "content": "Detection Method: . | Current rises above setpoint | Voltage drops below threshold | Immediate detection | . Response: . | Channel disabled | SG flag set | FAULTN pin asserted (if enabled) | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#short-to-ground-detection",
    
    "relUrl": "/docs/06_Diagnostics/#short-to-ground-detection"
  },"131": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Over-Temperature Protection",
    "content": "Two Levels: . | Warning (OTW): ~165Â°C . | Warning flag set | Operation continues | Reduce load recommended | . | Error (OTE): ~175Â°C . | Channel disabled | Error flag set | Cooling required | . | . Temperature Monitoring: text Tj (Junction) â”€â”€â–¶ Comparison â”€â”€â–¶ Flags â”‚ â”‚ â”‚ â”œâ”€â”€â–¶ OTW (165Â°C) â”‚ â””â”€â”€â–¶ OTE (175Â°C) â”‚ â–¼ Thermal Shutdown (auto-recovery) text . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#over-temperature-protection",
    
    "relUrl": "/docs/06_Diagnostics/#over-temperature-protection"
  },"132": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Supply Voltage Monitoring",
    "content": "VBAT Monitoring: ```text Configurable thresholds: UV: V_BAT_UV = VBAT_UV_TH Ã— 0.16208V OV: V_BAT_OV = VBAT_OV_TH Ã— 0.16208V . Example: UV=7V, OV=40V VBAT_UV_TH = 7V / 0.16208V â‰ˆ 43 (0x2B) VBAT_OV_TH = 40V / 0.16208V â‰ˆ 247 (0xF7) ```text . Configuration: cpp driver.set_vbat_thresholds( 43, // UV threshold (7V) 247 // OV threshold (40V) ); text . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#supply-voltage-monitoring",
    
    "relUrl": "/docs/06_Diagnostics/#supply-voltage-monitoring"
  },"133": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Watchdog Systems",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#watchdog-systems",
    
    "relUrl": "/docs/06_Diagnostics/#watchdog-systems"
  },"134": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "SPI Watchdog",
    "content": "Purpose: Detect communication loss . Operation: text WD_RELOAD counter â”€â”€â–¶ Decrement â”€â”€â–¶ Timeout? â–² â”‚ â”‚ â”œâ”€â–¶ No: Continue â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ Reload â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â–¶ Yes: Fault text . Configuration: ```cpp // Enable and reload periodically driver.reload_spi_watchdog(1000); . // In main loop: while (running) { driver.reload_spi_watchdog(1000); // â€¦ other operations } ```text . Timeout Calculation: ```text t_timeout = WD_TIME / f_spi_wd . Where: f_spi_wd configurable ```text . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#spi-watchdog",
    
    "relUrl": "/docs/06_Diagnostics/#spi-watchdog"
  },"135": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Clock Watchdog",
    "content": "Purpose: Monitor oscillator . Detection: . | Internal oscillator failure | Clock frequency deviation | Automatic detection | . Response: . | CLK_NOK flag set | Device enters safe state | All outputs disabled | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#clock-watchdog",
    
    "relUrl": "/docs/06_Diagnostics/#clock-watchdog"
  },"136": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Fault Masking",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#fault-masking",
    
    "relUrl": "/docs/06_Diagnostics/#fault-masking"
  },"137": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "FAULT_MASK Registers",
    "content": "Control which faults assert the FAULTN pin: . FAULT_MASK0 (0x0016): text Per-channel error masking: Bit 0: CH0_ERR_MASK Bit 1: CH1_ERR_MASK ... Bit 5: CH5_ERR_MASK text . FAULT_MASK1 (0x0017): text Per-channel warning masking: Bit 0: CH0_WARN_MASK Bit 1: CH1_WARN_MASK ... Bit 5: CH5_WARN_MASK text . FAULT_MASK2 (0x0018): ```text Global fault masking: . | Supply faults | Temperature faults | Communication faults ```text | . Usage: ```cpp // Mask CH0 warnings from FAULTN write_register(FAULT_MASK1, (1 Â«Â 0)); . // Enable all error reporting write_register(FAULT_MASK0, 0x0000); ```text . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#fault_mask-registers",
    
    "relUrl": "/docs/06_Diagnostics/#fault_mask-registers"
  },"138": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Diagnostic Monitoring Strategy",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#diagnostic-monitoring-strategy",
    
    "relUrl": "/docs/06_Diagnostics/#diagnostic-monitoring-strategy"
  },"139": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Polling Approach",
    "content": "```cpp void monitor_system() { // Check global status auto status = driver.get_device_status(); . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 . | if (status-&gt;any_fault) { // Handle global faults if (status-&gt;vbat_uv) { log(\"VBAT undervoltage!\"); } if (status-&gt;ot_error) { log(\"Over-temperature!\"); } } // Check each active channel for (int ch = 0; ch &lt; 6; ch++) { auto diag = driver.get_channel_diagnostics(Channel(ch)); if (diag-&gt;overcurrent) { log(\"CH%d: Over-current!\", ch); driver.enable_channel(Channel(ch), false); } if (diag-&gt;open_load) { log(\"CH%d: Open load!\", ch); } if (diag-&gt;short_to_ground) { log(\"CH%d: Short to ground!\", ch); driver.enable_channel(Channel(ch), false); } } } ```text . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#polling-approach",
    
    "relUrl": "/docs/06_Diagnostics/#polling-approach"
  },"140": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Interrupt-Driven Approach",
    "content": "```cpp // FAULTN pin interrupt handler void FAULTN_IRQHandler() { // Read global diagnostics uint16_t diag0 = read_register(GLOBAL_DIAG0); . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 . | // Identify fault source if (diag0 &amp; VBAT_UV) { handle_vbat_fault(); } // Check channel faults for (int ch = 0; ch &lt; 6; ch++) { uint16_t ch_err = read_register(DIAG_ERR_CHGR0 + ch); if (ch_err) { handle_channel_fault(ch, ch_err); } } // Clear faults driver.clear_faults(); } ```text . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#interrupt-driven-approach",
    
    "relUrl": "/docs/06_Diagnostics/#interrupt-driven-approach"
  },"141": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Fault Recovery Procedures",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#fault-recovery-procedures",
    
    "relUrl": "/docs/06_Diagnostics/#fault-recovery-procedures"
  },"142": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Over-Current Recovery",
    "content": "```text . | Disable affected channel | Read actual current (FB_I_AVG) | Check if transient or persistent | Reduce setpoint if needed | Clear fault flags | Re-enable with lower current | Monitor for recurrence ```text | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#over-current-recovery",
    
    "relUrl": "/docs/06_Diagnostics/#over-current-recovery"
  },"143": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Open Load Recovery",
    "content": "```text . | Verify load connection | Check wiring integrity | Confirm load not damaged | Clear fault flags | Re-enable channel | Adjust OL threshold if false positive ```text | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#open-load-recovery",
    
    "relUrl": "/docs/06_Diagnostics/#open-load-recovery"
  },"144": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Temperature Recovery",
    "content": "```text . | Disable channel immediately (automatic) | Allow cooling period (&gt;10s) | Check thermal management | Reduce current setpoint | Clear fault flags | Re-enable with lower current | Monitor temperature (OTW flag) ```text | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#temperature-recovery",
    
    "relUrl": "/docs/06_Diagnostics/#temperature-recovery"
  },"145": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Supply Fault Recovery",
    "content": "```text . | Check supply voltage | Verify within operating range | Check supply stability | Adjust thresholds if transient | Clear fault flags | Resume operation ```text | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#supply-fault-recovery",
    
    "relUrl": "/docs/06_Diagnostics/#supply-fault-recovery"
  },"146": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Best Practices",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#best-practices",
    
    "relUrl": "/docs/06_Diagnostics/#best-practices"
  },"147": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Monitoring Frequency",
    "content": "```text Recommended polling rates: . | Critical channels: 10 Hz (100ms) | Normal channels: 1 Hz (1s) | Global status: 1 Hz (1s) | FAULTN pin: Interrupt-driven (immediate) ```text | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#monitoring-frequency",
    
    "relUrl": "/docs/06_Diagnostics/#monitoring-frequency"
  },"148": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Fault Logging",
    "content": "```cpp struct FaultLog { uint32_t timestamp; Channel channel; uint16_t error_flags; uint16_t current_setpoint; uint16_t actual_current; uint16_t vbat; }; . // Log faults for analysis void log_fault(const FaultLog&amp; log); ```text . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#fault-logging",
    
    "relUrl": "/docs/06_Diagnostics/#fault-logging"
  },"149": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "Preventive Measures",
    "content": ". | Set appropriate thresholds | Monitor warnings before errors | Implement graceful degradation | Log all fault events | Periodic system health checks | . | Navigation: â† Channel Modes | Next: Driver API â†’ | . ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/#preventive-measures",
    
    "relUrl": "/docs/06_Diagnostics/#preventive-measures"
  },"150": {
    "doc": "ğŸ›¡ï¸ Diagnostics",
    "title": "ğŸ›¡ï¸ Diagnostics",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/06_Diagnostics/",
    
    "relUrl": "/docs/06_Diagnostics/"
  },"151": {
    "doc": "ğŸ”§ Driver API",
    "title": "Driver API Reference",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#driver-api-reference",
    
    "relUrl": "/docs/07_Driver_API/#driver-api-reference"
  },"152": {
    "doc": "ğŸ”§ Driver API",
    "title": "Driver Class Overview",
    "content": "The TLE92466ED::Driver class provides the complete C++ interface for controlling the IC. ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#driver-class-overview",
    
    "relUrl": "/docs/07_Driver_API/#driver-class-overview"
  },"153": {
    "doc": "ğŸ”§ Driver API",
    "title": "Class Declaration",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 . | namespace TLE92466ED { class Driver { public: explicit Driver(HAL&amp; hal) noexcept; ~Driver() noexcept; // No copying, no moving (contains reference) Driver(const Driver&amp;) = delete; Driver&amp; operator=(const Driver&amp;) = delete; Driver(Driver&amp;&amp;) = delete; Driver&amp; operator=(Driver&amp;&amp;) = delete; // Initialization [[nodiscard]] DriverResult&lt;void&gt; init() noexcept; // Mode control [[nodiscard]] DriverResult&lt;void&gt; enter_mission_mode() noexcept; [[nodiscard]] DriverResult&lt;void&gt; enter_config_mode() noexcept; [[nodiscard]] bool is_mission_mode() const noexcept; // Channel control [[nodiscard]] DriverResult&lt;void&gt; enable_channel(Channel, bool) noexcept; [[nodiscard]] DriverResult&lt;void&gt; set_channel_mode(Channel, ChannelMode) noexcept; // Current control [[nodiscard]] DriverResult&lt;void&gt; set_current_setpoint(Channel, uint16_t, bool=false) noexcept; // Diagnostics [[nodiscard]] DriverResult&lt;DeviceStatus&gt; get_device_status() noexcept; [[nodiscard]] DriverResult&lt;ChannelDiagnostics&gt; get_channel_diagnostics(Channel) noexcept; // ... more methods }; } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#class-declaration",
    
    "relUrl": "/docs/07_Driver_API/#class-declaration"
  },"154": {
    "doc": "ğŸ”§ Driver API",
    "title": "Core Types",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#core-types",
    
    "relUrl": "/docs/07_Driver_API/#core-types"
  },"155": {
    "doc": "ğŸ”§ Driver API",
    "title": "DriverError Enumeration",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 . | enum class DriverError : uint8_t { None = 0, NotInitialized, HardwareError, InvalidChannel, InvalidParameter, DeviceNotResponding, WrongDeviceID, RegisterError, CRCError, FaultDetected, ConfigurationError, TimeoutError, WrongMode, SPIFrameError, WriteToReadOnly }; . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#drivererror-enumeration",
    
    "relUrl": "/docs/07_Driver_API/#drivererror-enumeration"
  },"156": {
    "doc": "ğŸ”§ Driver API",
    "title": "DriverResult Template",
    "content": "| 1 2 3 4 5 6 . | template&lt;typename T&gt; using DriverResult = std::expected&lt;T, DriverError&gt;; // Usage: DriverResult&lt;void&gt; init(); // Returns void or error DriverResult&lt;uint16_t&gt; get_voltage(); // Returns value or error . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#driverresult-template",
    
    "relUrl": "/docs/07_Driver_API/#driverresult-template"
  },"157": {
    "doc": "ğŸ”§ Driver API",
    "title": "Channel Enumeration",
    "content": "| 1 2 3 4 5 6 7 8 9 . | enum class Channel : uint8_t { CH0 = 0, CH1 = 1, CH2 = 2, CH3 = 3, CH4 = 4, CH5 = 5, COUNT = 6 }; . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#channel-enumeration",
    
    "relUrl": "/docs/07_Driver_API/#channel-enumeration"
  },"158": {
    "doc": "ğŸ”§ Driver API",
    "title": "ChannelMode Enumeration",
    "content": "| 1 2 3 4 5 6 7 8 . | enum class ChannelMode : uint8_t { OFF = 0x0, ICC = 0x1, DIRECT_DRIVE_SPI = 0x2, DIRECT_DRIVE_DRV0 = 0x3, DIRECT_DRIVE_DRV1 = 0x4, FREE_RUN_MEAS = 0xC }; . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#channelmode-enumeration",
    
    "relUrl": "/docs/07_Driver_API/#channelmode-enumeration"
  },"159": {
    "doc": "ğŸ”§ Driver API",
    "title": "Initialization Methods",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#initialization-methods",
    
    "relUrl": "/docs/07_Driver_API/#initialization-methods"
  },"160": {
    "doc": "ğŸ”§ Driver API",
    "title": "init()",
    "content": "Initialize driver and verify device. | 1 . | DriverResult&lt;void&gt; init() noexcept; . | . Description: Performs complete initialization sequence including HAL setup, device verification, and default configuration. Returns: Success or error code . Example: . | 1 2 3 4 5 6 . | Driver driver(hal); if (auto result = driver.init(); !result) { // Handle error log(\"Init failed: %d\", static_cast&lt;int&gt;(result.error())); return; } . | . Sequence: . | Initialize HAL | Wait for power-up | Verify device ID | Apply default configuration | Clear power-on faults | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#init",
    
    "relUrl": "/docs/07_Driver_API/#init"
  },"161": {
    "doc": "ğŸ”§ Driver API",
    "title": "Mode Control Methods",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#mode-control-methods",
    
    "relUrl": "/docs/07_Driver_API/#mode-control-methods"
  },"162": {
    "doc": "ğŸ”§ Driver API",
    "title": "enter_mission_mode()",
    "content": "Transition to Mission Mode (enables channel control). | 1 . | DriverResult&lt;void&gt; enter_mission_mode() noexcept; . | . Preconditions: Driver initialized . Example: . | 1 2 . | driver.enter_mission_mode(); // Channels can now be enabled . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#enter_mission_mode",
    
    "relUrl": "/docs/07_Driver_API/#enter_mission_mode"
  },"163": {
    "doc": "ğŸ”§ Driver API",
    "title": "enter_config_mode()",
    "content": "Transition to Config Mode (allows configuration). | 1 . | DriverResult&lt;void&gt; enter_config_mode() noexcept; . | . Side Effects: All channels automatically disabled . Example: . | 1 2 3 . | driver.enter_config_mode(); // Configuration registers now writable driver.set_channel_mode(Channel::CH0, ChannelMode::ICC); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#enter_config_mode",
    
    "relUrl": "/docs/07_Driver_API/#enter_config_mode"
  },"164": {
    "doc": "ğŸ”§ Driver API",
    "title": "Channel Control Methods",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#channel-control-methods",
    
    "relUrl": "/docs/07_Driver_API/#channel-control-methods"
  },"165": {
    "doc": "ğŸ”§ Driver API",
    "title": "enable_channel()",
    "content": "Enable or disable a channel. | 1 . | DriverResult&lt;void&gt; enable_channel(Channel channel, bool enabled) noexcept; . | . Parameters: . | channel: Channel to control | enabled: true=enable, false=disable | . Preconditions: Must be in Mission Mode . Example: . | 1 2 3 4 5 . | // Enable channel 0 driver.enable_channel(Channel::CH0, true); // Disable channel 1 driver.enable_channel(Channel::CH1, false); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#enable_channel",
    
    "relUrl": "/docs/07_Driver_API/#enable_channel"
  },"166": {
    "doc": "ğŸ”§ Driver API",
    "title": "set_channel_mode()",
    "content": "Configure channel operation mode. | 1 . | DriverResult&lt;void&gt; set_channel_mode(Channel channel, ChannelMode mode) noexcept; . | . Preconditions: Must be in Config Mode . Example: . | 1 2 3 . | driver.enter_config_mode(); driver.set_channel_mode(Channel::CH0, ChannelMode::ICC); driver.enter_mission_mode(); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#set_channel_mode",
    
    "relUrl": "/docs/07_Driver_API/#set_channel_mode"
  },"167": {
    "doc": "ğŸ”§ Driver API",
    "title": "set_parallel_operation()",
    "content": "Configure parallel channel operation. | 1 . | DriverResult&lt;void&gt; set_parallel_operation(ParallelPair pair, bool enabled) noexcept; . | . Parameters: . | pair: CH0_CH3, CH1_CH2, or CH4_CH5 | enabled: true=parallel, false=independent | . Preconditions: Must be in Config Mode . Example: . | 1 2 . | driver.enter_config_mode(); driver.set_parallel_operation(ParallelPair::CH0_CH3, true); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#set_parallel_operation",
    
    "relUrl": "/docs/07_Driver_API/#set_parallel_operation"
  },"168": {
    "doc": "ğŸ”§ Driver API",
    "title": "Current Control Methods",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#current-control-methods",
    
    "relUrl": "/docs/07_Driver_API/#current-control-methods"
  },"169": {
    "doc": "ğŸ”§ Driver API",
    "title": "set_current_setpoint()",
    "content": "Set target current for a channel. | 1 2 3 4 . | DriverResult&lt;void&gt; set_current_setpoint( Channel channel, uint16_t current_ma, bool parallel_mode = false) noexcept; . | . Parameters: . | channel: Channel to configure | current_ma: Desired current in milliamperes (0-2000 single, 0-4000 parallel) | parallel_mode: true if channel is in parallel mode | . Example: . | 1 2 3 4 5 . | // Set 1.5A on single channel driver.set_current_setpoint(Channel::CH0, 1500); // Set 3.5A on parallel channels driver.set_current_setpoint(Channel::CH0, 3500, true); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#set_current_setpoint",
    
    "relUrl": "/docs/07_Driver_API/#set_current_setpoint"
  },"170": {
    "doc": "ğŸ”§ Driver API",
    "title": "get_current_setpoint()",
    "content": "Read configured current setpoint. | 1 2 3 . | DriverResult&lt;uint16_t&gt; get_current_setpoint( Channel channel, bool parallel_mode = false) noexcept; . | . Returns: Current in mA or error . Example: . | 1 2 3 4 . | auto current = driver.get_current_setpoint(Channel::CH0); if (current) { log(\"Setpoint: %d mA\", *current); } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#get_current_setpoint",
    
    "relUrl": "/docs/07_Driver_API/#get_current_setpoint"
  },"171": {
    "doc": "ğŸ”§ Driver API",
    "title": "configure_pwm_period()",
    "content": "Configure PWM frequency for ICC. | 1 2 3 4 5 . | DriverResult&lt;void&gt; configure_pwm_period( Channel channel, uint8_t period_mantissa, uint8_t period_exponent, bool low_freq_range = false) noexcept; . | . Example: . | 1 2 . | // Configure for ~5kHz PWM driver.configure_pwm_period(Channel::CH0, 100, 4, false); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#configure_pwm_period",
    
    "relUrl": "/docs/07_Driver_API/#configure_pwm_period"
  },"172": {
    "doc": "ğŸ”§ Driver API",
    "title": "configure_dither()",
    "content": "Configure current dither parameters. | 1 2 3 4 5 . | DriverResult&lt;void&gt; configure_dither( Channel channel, uint16_t step_size, uint8_t num_steps, uint8_t flat_steps) noexcept; . | . Example: . | 1 2 . | // Add 200mA dither amplitude driver.configure_dither(Channel::CH0, 100, 20, 5); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#configure_dither",
    
    "relUrl": "/docs/07_Driver_API/#configure_dither"
  },"173": {
    "doc": "ğŸ”§ Driver API",
    "title": "Diagnostics Methods",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#diagnostics-methods",
    
    "relUrl": "/docs/07_Driver_API/#diagnostics-methods"
  },"174": {
    "doc": "ğŸ”§ Driver API",
    "title": "get_device_status()",
    "content": "Read global device status. | 1 . | DriverResult&lt;DeviceStatus&gt; get_device_status() noexcept; . | . Returns: DeviceStatus structure or error . Example: . | 1 2 3 4 5 6 7 8 9 . | auto status = driver.get_device_status(); if (status) { if (status-&gt;any_fault) { log(\"Fault detected!\"); } if (status-&gt;ot_warning) { log(\"Over-temperature warning\"); } } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#get_device_status",
    
    "relUrl": "/docs/07_Driver_API/#get_device_status"
  },"175": {
    "doc": "ğŸ”§ Driver API",
    "title": "get_channel_diagnostics()",
    "content": "Read channel diagnostic information. | 1 . | DriverResult&lt;ChannelDiagnostics&gt; get_channel_diagnostics(Channel channel) noexcept; . | . Returns: ChannelDiagnostics structure or error . Example: . | 1 2 3 4 5 6 7 . | auto diag = driver.get_channel_diagnostics(Channel::CH0); if (diag) { if (diag-&gt;overcurrent) { log(\"OC fault on CH0\"); } log(\"Current: %d mA\", diag-&gt;average_current); } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#get_channel_diagnostics",
    
    "relUrl": "/docs/07_Driver_API/#get_channel_diagnostics"
  },"176": {
    "doc": "ğŸ”§ Driver API",
    "title": "get_average_current()",
    "content": "Read measured average current. | 1 2 3 . | DriverResult&lt;uint16_t&gt; get_average_current( Channel channel, bool parallel_mode = false) noexcept; . | . Returns: Current in mA or error . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#get_average_current",
    
    "relUrl": "/docs/07_Driver_API/#get_average_current"
  },"177": {
    "doc": "ğŸ”§ Driver API",
    "title": "clear_faults()",
    "content": "Clear all latched fault flags. | 1 . | DriverResult&lt;void&gt; clear_faults() noexcept; . | . Example: . | 1 . | driver.clear_faults(); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#clear_faults",
    
    "relUrl": "/docs/07_Driver_API/#clear_faults"
  },"178": {
    "doc": "ğŸ”§ Driver API",
    "title": "Configuration Methods",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#configuration-methods",
    
    "relUrl": "/docs/07_Driver_API/#configuration-methods"
  },"179": {
    "doc": "ğŸ”§ Driver API",
    "title": "configure_global()",
    "content": "Apply global configuration. | 1 . | DriverResult&lt;void&gt; configure_global(const GlobalConfig&amp; config) noexcept; . | . Preconditions: Must be in Config Mode . Example: . | 1 2 3 4 5 6 . | GlobalConfig config{ .crc_enabled = true, .spi_watchdog_enabled = true, .vio_5v = false }; driver.configure_global(config); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#configure_global",
    
    "relUrl": "/docs/07_Driver_API/#configure_global"
  },"180": {
    "doc": "ğŸ”§ Driver API",
    "title": "configure_channel()",
    "content": "Apply complete channel configuration. | 1 2 3 . | DriverResult&lt;void&gt; configure_channel( Channel channel, const ChannelConfig&amp; config) noexcept; . | . Example: . | 1 2 3 4 5 6 . | ChannelConfig config{ .mode = ChannelMode::ICC, .current_setpoint_ma = 1500, .slew_rate = SlewRate::MEDIUM_2V5_US }; driver.configure_channel(Channel::CH0, config); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#configure_channel",
    
    "relUrl": "/docs/07_Driver_API/#configure_channel"
  },"181": {
    "doc": "ğŸ”§ Driver API",
    "title": "Watchdog Methods",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#watchdog-methods",
    
    "relUrl": "/docs/07_Driver_API/#watchdog-methods"
  },"182": {
    "doc": "ğŸ”§ Driver API",
    "title": "reload_spi_watchdog()",
    "content": "Reload SPI watchdog counter. | 1 . | DriverResult&lt;void&gt; reload_spi_watchdog(uint16_t reload_value) noexcept; . | . Usage: Call periodically when SPI watchdog enabled . Example: . | 1 2 3 4 5 6 . | // In main loop while (running) { driver.reload_spi_watchdog(1000); // ... operations delay(50ms); } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#reload_spi_watchdog",
    
    "relUrl": "/docs/07_Driver_API/#reload_spi_watchdog"
  },"183": {
    "doc": "ğŸ”§ Driver API",
    "title": "Register Access Methods",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#register-access-methods",
    
    "relUrl": "/docs/07_Driver_API/#register-access-methods"
  },"184": {
    "doc": "ğŸ”§ Driver API",
    "title": "read_register()",
    "content": "Read 16-bit register with CRC. | 1 2 3 . | DriverResult&lt;uint16_t&gt; read_register( uint16_t address, bool verify_crc = true) noexcept; . | . Example: . | 1 . | auto value = driver.read_register(0x0003); // GLOBAL_DIAG0 . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#read_register",
    
    "relUrl": "/docs/07_Driver_API/#read_register"
  },"185": {
    "doc": "ğŸ”§ Driver API",
    "title": "write_register()",
    "content": "Write 16-bit register with CRC. | 1 2 3 4 . | DriverResult&lt;void&gt; write_register( uint16_t address, uint16_t value, bool verify_crc = true) noexcept; . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#write_register",
    
    "relUrl": "/docs/07_Driver_API/#write_register"
  },"186": {
    "doc": "ğŸ”§ Driver API",
    "title": "modify_register()",
    "content": "Read-modify-write register bits. | 1 2 3 4 . | DriverResult&lt;void&gt; modify_register( uint16_t address, uint16_t mask, uint16_t value) noexcept; . | . Example: . | 1 2 . | // Set bit 0, clear bit 1 driver.modify_register(0x0000, 0x0003, 0x0001); . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#modify_register",
    
    "relUrl": "/docs/07_Driver_API/#modify_register"
  },"187": {
    "doc": "ğŸ”§ Driver API",
    "title": "Error Handling",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#error-handling",
    
    "relUrl": "/docs/07_Driver_API/#error-handling"
  },"188": {
    "doc": "ğŸ”§ Driver API",
    "title": "Using std::expected",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 . | // Check for error auto result = driver.init(); if (!result) { DriverError error = result.error(); handle_error(error); return; } // Get value auto current = driver.get_average_current(Channel::CH0); if (current) { uint16_t value = *current; log(\"Current: %d mA\", value); } else { log(\"Error: %d\", static_cast&lt;int&gt;(current.error())); } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#using-stdexpected",
    
    "relUrl": "/docs/07_Driver_API/#using-stdexpected"
  },"189": {
    "doc": "ğŸ”§ Driver API",
    "title": "Error Mapping",
    "content": "| 1 2 3 4 5 6 7 8 . | const char* error_to_string(DriverError err) { switch (err) { case DriverError::None: return \"No error\"; case DriverError::NotInitialized: return \"Not initialized\"; case DriverError::HardwareError: return \"Hardware error\"; // ... etc } } . | . | Navigation: â† Diagnostics | Next: HAL Implementation â†’ | . ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/#error-mapping",
    
    "relUrl": "/docs/07_Driver_API/#error-mapping"
  },"190": {
    "doc": "ğŸ”§ Driver API",
    "title": "ğŸ”§ Driver API",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/07_Driver_API/",
    
    "relUrl": "/docs/07_Driver_API/"
  },"191": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "HAL Implementation Guide",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#hal-implementation-guide",
    
    "relUrl": "/docs/08_HAL_Implementation/#hal-implementation-guide"
  },"192": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Overview",
    "content": "The Hardware Abstraction Layer (HAL) provides platform-independent SPI communication for the TLE92466ED driver. You must implement this interface for your specific hardware platform. ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#overview",
    
    "relUrl": "/docs/08_HAL_Implementation/#overview"
  },"193": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "HAL Architecture",
    "content": "text Application Code â”‚ â–¼ TLE92466ED::Driver â—„â”€â”€â”€â”€ High-level API â”‚ â–¼ TLE92466ED::HAL â—„â”€â”€â”€â”€â”€â”€â”€â”€ Abstract interface (YOU IMPLEMENT) â”‚ â–¼ Platform SPI â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Your hardware (STM32, ESP32, etc.) text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#hal-architecture",
    
    "relUrl": "/docs/08_HAL_Implementation/#hal-architecture"
  },"194": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "HAL Interface",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#hal-interface",
    
    "relUrl": "/docs/08_HAL_Implementation/#hal-interface"
  },"195": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Base Class",
    "content": "```cpp class HAL { public: virtual ~HAL() = default; . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 . | // Core methods (must implement) [[nodiscard]] virtual HALResult&lt;void&gt; init() noexcept = 0; [[nodiscard]] virtual HALResult&lt;void&gt; deinit() noexcept = 0; [[nodiscard]] virtual HALResult&lt;uint32_t&gt; transfer32(uint32_t tx_data) noexcept = 0; [[nodiscard]] virtual HALResult&lt;void&gt; transfer_multi( std::span&lt;const uint32_t&gt; tx_data, std::span&lt;uint32_t&gt; rx_data) noexcept = 0; [[nodiscard]] virtual HALResult&lt;void&gt; chip_select() noexcept = 0; [[nodiscard]] virtual HALResult&lt;void&gt; chip_deselect() noexcept = 0; [[nodiscard]] virtual HALResult&lt;void&gt; delay(uint32_t microseconds) noexcept = 0; [[nodiscard]] virtual HALResult&lt;void&gt; configure(const SPIConfig&amp; config) noexcept = 0; [[nodiscard]] virtual bool is_ready() const noexcept = 0; [[nodiscard]] virtual HALError get_last_error() const noexcept = 0; [[nodiscard]] virtual HALResult&lt;void&gt; clear_errors() noexcept = 0; }; ```text . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#base-class",
    
    "relUrl": "/docs/08_HAL_Implementation/#base-class"
  },"196": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "HALError Enumeration",
    "content": "cpp enum class HALError : uint8_t { None = 0, BusError, Timeout, InvalidParameter, ChipselectError, TransferError, HardwareNotReady, BufferOverflow, CRCError, UnknownError }; text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#halerror-enumeration",
    
    "relUrl": "/docs/08_HAL_Implementation/#halerror-enumeration"
  },"197": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "HALResult Type",
    "content": "cpp template&lt;typename T&gt; using HALResult = std::expected&lt;T, HALError&gt;; text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#halresult-type",
    
    "relUrl": "/docs/08_HAL_Implementation/#halresult-type"
  },"198": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Platform Implementation Examples",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#platform-implementation-examples",
    
    "relUrl": "/docs/08_HAL_Implementation/#platform-implementation-examples"
  },"199": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "STM32 HAL Implementation",
    "content": "```cpp class STM32HAL : public TLE92466ED::HAL { public: STM32_HAL(SPI_HandleTypeDef* hspi, GPIO_TypeDef* cs_port, uint16_t cs_pin) : hspi(hspi), cs_port_(cs_port), cs_pin_(cs_pin), initialized_(false) {} . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 . | HALResult&lt;void&gt; init() noexcept override { // SPI already initialized by CubeMX // Configure CS pin as output HAL_GPIO_WritePin(cs_port_, cs_pin_, GPIO_PIN_SET); initialized_ = true; return {}; } HALResult&lt;uint32_t&gt; transfer32(uint32_t tx_data) noexcept override { if (!initialized_) { return std::unexpected(HALError::HardwareNotReady); } // Convert to bytes (MSB first) uint8_t tx_bytes[4] = { static_cast&lt;uint8_t&gt;((tx_data &gt;&gt; 24) &amp; 0xFF), static_cast&lt;uint8_t&gt;((tx_data &gt;&gt; 16) &amp; 0xFF), static_cast&lt;uint8_t&gt;((tx_data &gt;&gt; 8) &amp; 0xFF), static_cast&lt;uint8_t&gt;(tx_data &amp; 0xFF) }; uint8_t rx_bytes[4] = {0}; // Chip select HAL_GPIO_WritePin(cs_port_, cs_pin_, GPIO_PIN_RESET); // Transfer HAL_StatusTypeDef status = HAL_SPI_TransmitReceive( hspi_, tx_bytes, rx_bytes, 4, 100); // Chip deselect HAL_GPIO_WritePin(cs_port_, cs_pin_, GPIO_PIN_SET); if (status != HAL_OK) { return std::unexpected(HALError::TransferError); } // Convert back to uint32_t uint32_t rx_data = (static_cast&lt;uint32_t&gt;(rx_bytes[0]) &lt;&lt; 24) | (static_cast&lt;uint32_t&gt;(rx_bytes[1]) &lt;&lt; 16) | (static_cast&lt;uint32_t&gt;(rx_bytes[2]) &lt;&lt; 8) | static_cast&lt;uint32_t&gt;(rx_bytes[3]); return rx_data; } HALResult&lt;void&gt; chip_select() noexcept override { HAL_GPIO_WritePin(cs_port_, cs_pin_, GPIO_PIN_RESET); return {}; } HALResult&lt;void&gt; chip_deselect() noexcept override { HAL_GPIO_WritePin(cs_port_, cs_pin_, GPIO_PIN_SET); return {}; } HALResult&lt;void&gt; delay(uint32_t microseconds) noexcept override { // Use DWT cycle counter for precise microsecond delays uint32_t start = DWT-&gt;CYCCNT; uint32_t cycles = (SystemCoreClock / 1000000) * microseconds; while ((DWT-&gt;CYCCNT - start) &lt; cycles); return {}; } bool is_ready() const noexcept override { return initialized_; } // ... implement other methods . | . private: SPI_HandleTypeDef* hspi_; GPIO_TypeDef* cs_port_; uint16t cs_pin; bool initialized_; }; ```text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#stm32-hal-implementation",
    
    "relUrl": "/docs/08_HAL_Implementation/#stm32-hal-implementation"
  },"200": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "ESP32 Implementation",
    "content": "```cpp class ESP32HAL : public TLE92466ED::HAL { public: ESP32_HAL(spi_host_device_t spi_host, int cs_pin) : spi_host(spi_host), cs_pin_(cs_pin), spi_device_(nullptr) {} . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 . | HALResult&lt;void&gt; init() noexcept override { // Configure CS pin gpio_config_t io_conf = { .pin_bit_mask = (1ULL &lt;&lt; cs_pin_), .mode = GPIO_MODE_OUTPUT, .pull_up_en = GPIO_PULLUP_DISABLE, .pull_down_en = GPIO_PULLDOWN_DISABLE, .intr_type = GPIO_INTR_DISABLE }; gpio_config(&amp;io_conf); gpio_set_level(static_cast&lt;gpio_num_t&gt;(cs_pin_), 1); // Configure SPI device spi_device_interface_config_t dev_cfg = { .mode = 0, // SPI mode 0 .clock_speed_hz = 1000000, // 1 MHz .spics_io_num = -1, // Manual CS .queue_size = 1 }; esp_err_t ret = spi_bus_add_device(spi_host_, &amp;dev_cfg, &amp;spi_device_); if (ret != ESP_OK) { return std::unexpected(HALError::HardwareNotReady); } return {}; } HALResult&lt;uint32_t&gt; transfer32(uint32_t tx_data) noexcept override { spi_transaction_t trans = { .length = 32, // bits .tx_data = { static_cast&lt;uint8_t&gt;((tx_data &gt;&gt; 24) &amp; 0xFF), static_cast&lt;uint8_t&gt;((tx_data &gt;&gt; 16) &amp; 0xFF), static_cast&lt;uint8_t&gt;((tx_data &gt;&gt; 8) &amp; 0xFF), static_cast&lt;uint8_t&gt;(tx_data &amp; 0xFF) } }; gpio_set_level(static_cast&lt;gpio_num_t&gt;(cs_pin_), 0); esp_err_t ret = spi_device_transmit(spi_device_, &amp;trans); gpio_set_level(static_cast&lt;gpio_num_t&gt;(cs_pin_), 1); if (ret != ESP_OK) { return std::unexpected(HALError::TransferError); } uint32_t rx_data = (static_cast&lt;uint32_t&gt;(trans.rx_data[0]) &lt;&lt; 24) | (static_cast&lt;uint32_t&gt;(trans.rx_data[1]) &lt;&lt; 16) | (static_cast&lt;uint32_t&gt;(trans.rx_data[2]) &lt;&lt; 8) | static_cast&lt;uint32_t&gt;(trans.rx_data[3]); return rx_data; } HALResult&lt;void&gt; delay(uint32_t microseconds) noexcept override { esp_rom_delay_us(microseconds); return {}; } // ... implement other methods . | . private: spi_host_device_t spi_host_; int cs_pin_; spi_device_handle_t spi_device_; }; ```text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#esp32-implementation",
    
    "relUrl": "/docs/08_HAL_Implementation/#esp32-implementation"
  },"201": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Linux SPI Implementation",
    "content": "```cpp class LinuxSPI_HAL : public TLE92466ED::HAL { public: LinuxSPI_HAL(const char* device, int cs_gpio) : device_path_(device), cs_gpio_(cs_gpio), spi_fd_(-1) {} . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 . | HALResult&lt;void&gt; init() noexcept override { // Open SPI device spi_fd_ = open(device_path_, O_RDWR); if (spi_fd_ &lt; 0) { return std::unexpected(HALError::HardwareNotReady); } // Configure SPI mode uint8_t mode = SPI_MODE_0; if (ioctl(spi_fd_, SPI_IOC_WR_MODE, &amp;mode) &lt; 0) { close(spi_fd_); return std::unexpected(HALError::HardwareNotReady); } // Configure speed uint32_t speed = 1000000; // 1 MHz if (ioctl(spi_fd_, SPI_IOC_WR_MAX_SPEED_HZ, &amp;speed) &lt; 0) { close(spi_fd_); return std::unexpected(HALError::HardwareNotReady); } // Export and configure CS GPIO export_gpio(cs_gpio_); set_gpio_direction(cs_gpio_, \"out\"); set_gpio_value(cs_gpio_, 1); return {}; } HALResult&lt;uint32_t&gt; transfer32(uint32_t tx_data) noexcept override { uint8_t tx_bytes[4] = { static_cast&lt;uint8_t&gt;((tx_data &gt;&gt; 24) &amp; 0xFF), static_cast&lt;uint8_t&gt;((tx_data &gt;&gt; 16) &amp; 0xFF), static_cast&lt;uint8_t&gt;((tx_data &gt;&gt; 8) &amp; 0xFF), static_cast&lt;uint8_t&gt;(tx_data &amp; 0xFF) }; uint8_t rx_bytes[4] = {0}; struct spi_ioc_transfer transfer = { .tx_buf = reinterpret_cast&lt;uint64_t&gt;(tx_bytes), .rx_buf = reinterpret_cast&lt;uint64_t&gt;(rx_bytes), .len = 4, .speed_hz = 1000000, .bits_per_word = 8 }; set_gpio_value(cs_gpio_, 0); int ret = ioctl(spi_fd_, SPI_IOC_MESSAGE(1), &amp;transfer); set_gpio_value(cs_gpio_, 1); if (ret &lt; 0) { return std::unexpected(HALError::TransferError); } uint32_t rx_data = (static_cast&lt;uint32_t&gt;(rx_bytes[0]) &lt;&lt; 24) | (static_cast&lt;uint32_t&gt;(rx_bytes[1]) &lt;&lt; 16) | (static_cast&lt;uint32_t&gt;(rx_bytes[2]) &lt;&lt; 8) | static_cast&lt;uint32_t&gt;(rx_bytes[3]); return rx_data; } // ... implement other methods . | . private: const char* device_path_; int cs_gpio_; int spi_fd_; . | 1 2 3 . | void export_gpio(int gpio); void set_gpio_direction(int gpio, const char* dir); void set_gpio_value(int gpio, int value); }; ```text . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#linux-spi-implementation",
    
    "relUrl": "/docs/08_HAL_Implementation/#linux-spi-implementation"
  },"202": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Implementation Checklist",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#implementation-checklist",
    
    "relUrl": "/docs/08_HAL_Implementation/#implementation-checklist"
  },"203": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Required Methods",
    "content": ". | init() - Initialize SPI peripheral and GPIO | deinit() - Clean up resources | transfer32() - Critical: 32-bit full-duplex transfer | transfer_multi() - Multiple transfers (can call transfer32 in loop) | chip_select() - Assert CS (low) | chip_deselect() - Deassert CS (high) | delay() - Microsecond delay | configure() - Update SPI settings | is_ready() - Check initialization status | get_last_error() - Return last error | clear_errors() - Reset error state | . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#required-methods",
    
    "relUrl": "/docs/08_HAL_Implementation/#required-methods"
  },"204": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "SPI Requirements",
    "content": "text Parameter Requirement â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Mode 0 (CPOL=0, CPHA=0) Frequency 100 kHz - 10 MHz Bit Order MSB first Frame Size 32 bits (4 bytes) CS Polarity Active low Full-Duplex Yes text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#spi-requirements",
    
    "relUrl": "/docs/08_HAL_Implementation/#spi-requirements"
  },"205": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Timing Requirements",
    "content": "text Parameter Min Max Unit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€ CS Setup Time 50 - ns CS Hold Time 50 - ns CS Inactive Time 100 - ns Data Setup Time 20 - ns Data Hold Time 20 - ns text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#timing-requirements",
    
    "relUrl": "/docs/08_HAL_Implementation/#timing-requirements"
  },"206": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Testing Your HAL",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#testing-your-hal",
    
    "relUrl": "/docs/08_HAL_Implementation/#testing-your-hal"
  },"207": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Basic Test",
    "content": "```cpp // Create your HAL MyPlatformHAL hal; . // Test initialization auto init_result = hal.init(); assert(init_result.has_value()); assert(hal.is_ready()); . // Test chip select auto cs_result = hal.chip_select(); assert(cs_result.has_value()); . auto ds_result = hal.chip_deselect(); assert(ds_result.has_value()); . // Test transfer (loopback if available) uint32_t test_data = 0x12345678; auto transfer_result = hal.transfer32(test_data); assert(transfer_result.has_value()); . // Test delay auto delay_result = hal.delay(100); assert(delay_result.has_value()); ```text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#basic-test",
    
    "relUrl": "/docs/08_HAL_Implementation/#basic-test"
  },"208": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Integration Test",
    "content": "```cpp // Create driver with your HAL MyPlatformHAL hal; TLE92466ED::Driver driver(hal); . // Test full initialization auto result = driver.init(); if (!result) { log(â€œInit failed: %dâ€, static_cast(result.error())); return; } . // Read device ID auto id_result = driver.get_ic_version(); if (id_result) { log(â€œDevice ID: 0x%04Xâ€, *id_result); } . // Test register access auto reg_result = driver.read_register(0x0003); if (reg_result) { log(â€œGLOBAL_DIAG0: 0x%04Xâ€, *reg_result); } ```text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#integration-test",
    
    "relUrl": "/docs/08_HAL_Implementation/#integration-test"
  },"209": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Common Pitfalls",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#common-pitfalls",
    
    "relUrl": "/docs/08_HAL_Implementation/#common-pitfalls"
  },"210": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "1. Byte Order",
    "content": "Problem: Data appears scrambled . Solution: Ensure MSB-first transmission cpp // Correct: MSB first tx_bytes[0] = (data &gt;&gt; 24) &amp; 0xFF; // MSB tx_bytes[1] = (data &gt;&gt; 16) &amp; 0xFF; tx_bytes[2] = (data &gt;&gt; 8) &amp; 0xFF; tx_bytes[3] = data &amp; 0xFF; // LSB text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#1-byte-order",
    
    "relUrl": "/docs/08_HAL_Implementation/#1-byte-order"
  },"211": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "2. CS Timing",
    "content": "Problem: Communication errors . Solution: Ensure proper CS timing cpp // Correct sequence gpio_set(CS, LOW); delay_ns(50); // CS setup time spi_transfer(...); delay_ns(50); // CS hold time gpio_set(CS, HIGH); delay_ns(100); // CS inactive time text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#2-cs-timing",
    
    "relUrl": "/docs/08_HAL_Implementation/#2-cs-timing"
  },"212": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "3. SPI Mode",
    "content": "Problem: No response from device . Solution: Verify SPI Mode 0 (CPOL=0, CPHA=0) cpp // Ensure: // - Clock idle state: LOW // - Data sampled on: RISING edge // - Data shifted on: FALLING edge text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#3-spi-mode",
    
    "relUrl": "/docs/08_HAL_Implementation/#3-spi-mode"
  },"213": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "4. Exception Safety",
    "content": "Problem: Exceptions thrown in noexcept functions . Solution: Catch all exceptions and return errors cpp HALResult&lt;uint32_t&gt; transfer32(uint32_t data) noexcept override { try { // ... SPI operations return result; } catch (...) { return std::unexpected(HALError::TransferError); } } text . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#4-exception-safety",
    
    "relUrl": "/docs/08_HAL_Implementation/#4-exception-safety"
  },"214": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Platform-Specific Notes",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#platform-specific-notes",
    
    "relUrl": "/docs/08_HAL_Implementation/#platform-specific-notes"
  },"215": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "STM32",
    "content": ". | Use DMA for better performance | Enable DWT cycle counter for precise delays | Consider using HAL timeout values | . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#stm32",
    
    "relUrl": "/docs/08_HAL_Implementation/#stm32"
  },"216": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "ESP32",
    "content": ". | Use dedicated SPI host (HSPI or VSPI) | FreeRTOS delays acceptable for ms-range | Use esp_rom_delay_us for Âµs precision | . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#esp32",
    
    "relUrl": "/docs/08_HAL_Implementation/#esp32"
  },"217": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Arduino",
    "content": ". | Use SPI.beginTransaction() for settings | SPI.transfer() for byte-by-byte | delayMicroseconds() for timing | . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#arduino",
    
    "relUrl": "/docs/08_HAL_Implementation/#arduino"
  },"218": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "Linux",
    "content": ". | Use spidev for user-space access | ioctl() for configuration | GPIO sysfs or libgpiod for CS | . | Navigation: â† Driver API | Next: Usage Examples â†’ | . ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/#linux",
    
    "relUrl": "/docs/08_HAL_Implementation/#linux"
  },"219": {
    "doc": "ğŸ”Œ HAL Implementation",
    "title": "ğŸ”Œ HAL Implementation",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/",
    
    "relUrl": "/docs/08_HAL_Implementation/"
  },"220": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Usage Examples",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#usage-examples",
    
    "relUrl": "/docs/09_Usage_Examples/#usage-examples"
  },"221": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Complete Application Examples",
    "content": "This document provides practical, ready-to-use code examples for common TLE92466ED applications. ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#complete-application-examples",
    
    "relUrl": "/docs/09_Usage_Examples/#complete-application-examples"
  },"222": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Example 1: Basic Current Control",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#example-1-basic-current-control",
    
    "relUrl": "/docs/09_Usage_Examples/#example-1-basic-current-control"
  },"223": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Single Channel ICC Mode",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 . | #include \"TLE92466ED.hpp\" #include \"my_platform_hal.hpp\" using namespace TLE92466ED; int main() { // 1. Create HAL and driver MyPlatformHAL hal; Driver driver(hal); // 2. Initialize if (auto result = driver.init(); !result) { error(\"Init failed\"); return -1; } // 3. Configure channel (in Config Mode by default) driver.set_channel_mode(Channel::CH0, ChannelMode::ICC); driver.set_current_setpoint(Channel::CH0, 1500); // 1.5A // 4. Enter Mission Mode driver.enter_mission_mode(); // 5. Enable channel driver.enable_channel(Channel::CH0, true); // 6. Monitor while (running) { auto current = driver.get_average_current(Channel::CH0); if (current) { log(\"Current: %d mA\", *current); } delay(100ms); } // 7. Cleanup driver.disable_all_channels(); return 0; } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#single-channel-icc-mode",
    
    "relUrl": "/docs/09_Usage_Examples/#single-channel-icc-mode"
  },"224": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Example 2: Parallel Operation (High Current)",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#example-2-parallel-operation-high-current",
    
    "relUrl": "/docs/09_Usage_Examples/#example-2-parallel-operation-high-current"
  },"225": {
    "doc": "ğŸ’» Usage Examples",
    "title": "4A Solenoid Control",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 . | void configure_high_current_solenoid() { Driver driver(hal); driver.init(); // Enter Config Mode driver.enter_config_mode(); // Enable parallel operation CH0+CH3 driver.set_parallel_operation(ParallelPair::CH0_CH3, true); // Configure both channels identically ChannelConfig config{ .mode = ChannelMode::ICC, .current_setpoint_ma = 3500, // 3.5A total .slew_rate = SlewRate::MEDIUM_2V5_US, .open_load_threshold = 4 // 4/8 = 50% }; driver.configure_channel(Channel::CH0, config); driver.configure_channel(Channel::CH3, config); // Enter Mission Mode and enable driver.enter_mission_mode(); driver.enable_channel(Channel::CH0, true); driver.enable_channel(Channel::CH3, true); log(\"High-current mode active: 3.5A\"); } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#4a-solenoid-control",
    
    "relUrl": "/docs/09_Usage_Examples/#4a-solenoid-control"
  },"226": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Example 3: Proportional Valve with Dither",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#example-3-proportional-valve-with-dither",
    
    "relUrl": "/docs/09_Usage_Examples/#example-3-proportional-valve-with-dither"
  },"227": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Precision Position Control",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 . | class ProportionalValveController { public: ProportionalValveController(Driver&amp; driver, Channel channel) : driver_(driver), channel_(channel) {} void init() { driver_.enter_config_mode(); // Configure ICC mode driver_.set_channel_mode(channel_, ChannelMode::ICC); // Configure dither for smooth positioning // 100mA amplitude, 50Hz frequency driver_.configure_dither(channel_, 200, // step_size (gives ~100mA amplitude) 25, // num_steps 10); // flat_steps // Set initial position (50% = 1000mA) driver_.set_current_setpoint(channel_, 1000); driver_.enter_mission_mode(); driver_.enable_channel(channel_, true); } void set_position(float percent) { // Convert 0-100% to 0-2000mA uint16_t current = static_cast&lt;uint16_t&gt;(percent * 20.0f); driver_.set_current_setpoint(channel_, current); } float get_actual_position() { auto current = driver_.get_average_current(channel_); if (!current) return -1.0f; return *current / 20.0f; // Convert to % } private: Driver&amp; driver_; Channel channel_; }; // Usage int main() { MyPlatformHAL hal; Driver driver(hal); driver.init(); ProportionalValveController valve(driver, Channel::CH0); valve.init(); // Ramp to 75% position for (float pos = 0.0f; pos &lt;= 75.0f; pos += 1.0f) { valve.set_position(pos); delay(10ms); } // Monitor position float actual = valve.get_actual_position(); log(\"Position: %.1f%%\", actual); } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#precision-position-control",
    
    "relUrl": "/docs/09_Usage_Examples/#precision-position-control"
  },"228": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Example 4: Multi-Channel Solenoid Array",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#example-4-multi-channel-solenoid-array",
    
    "relUrl": "/docs/09_Usage_Examples/#example-4-multi-channel-solenoid-array"
  },"229": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Valve Bank Control",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 . | class SolenoidArray { public: SolenoidArray(Driver&amp; driver) : driver_(driver) {} void init() { driver_.enter_config_mode(); // Configure all 6 channels for (int i = 0; i &lt; 6; i++) { Channel ch = static_cast&lt;Channel&gt;(i); driver_.set_channel_mode(ch, ChannelMode::ICC); ChannelConfig config{ .mode = ChannelMode::ICC, .current_setpoint_ma = 1200, // 1.2A per solenoid .slew_rate = SlewRate::FAST_5V0_US, .open_load_threshold = 3 }; driver_.configure_channel(ch, config); } driver_.enter_mission_mode(); } void activate_pattern(uint8_t pattern) { // Pattern is 6-bit mask for channels for (int i = 0; i &lt; 6; i++) { bool enable = (pattern &amp; (1 &lt;&lt; i)) != 0; driver_.enable_channel(static_cast&lt;Channel&gt;(i), enable); } } void sequence_test() { // Test each channel sequentially for (int i = 0; i &lt; 6; i++) { log(\"Testing channel %d\", i); activate_pattern(1 &lt;&lt; i); delay(500ms); auto diag = driver_.get_channel_diagnostics(static_cast&lt;Channel&gt;(i)); if (diag) { if (diag-&gt;overcurrent) log(\" OC fault!\"); if (diag-&gt;open_load) log(\" Open load!\"); log(\" Current: %d mA\", diag-&gt;average_current); } } activate_pattern(0); // All off } private: Driver&amp; driver_; }; // Usage int main() { MyPlatformHAL hal; Driver driver(hal); driver.init(); SolenoidArray array(driver); array.init(); // Run sequence test array.sequence_test(); // Activate specific pattern array.activate_pattern(0b00101010); // CH1, CH3, CH5 } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#valve-bank-control",
    
    "relUrl": "/docs/09_Usage_Examples/#valve-bank-control"
  },"230": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Example 5: Fault-Tolerant Operation",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#example-5-fault-tolerant-operation",
    
    "relUrl": "/docs/09_Usage_Examples/#example-5-fault-tolerant-operation"
  },"231": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Robust Error Handling",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 . | class FaultTolerantDriver { public: FaultTolerantDriver(Driver&amp; driver) : driver_(driver), fault_count_(0) {} bool init_with_retry(int max_retries = 3) { for (int attempt = 1; attempt &lt;= max_retries; attempt++) { log(\"Init attempt %d/%d\", attempt, max_retries); if (auto result = driver_.init(); result) { log(\"Init successful\"); start_monitoring(); return true; } else { log(\"Init failed: %d\", static_cast&lt;int&gt;(result.error())); delay(1s); } } log(\"Init failed after %d attempts\", max_retries); return false; } void monitor_and_recover() { auto status = driver_.get_device_status(); if (!status) return; // Check for critical faults if (status-&gt;ot_error) { handle_overtemperature(); } if (status-&gt;vbat_uv || status-&gt;vbat_ov) { handle_supply_fault(); } // Check each channel for (int i = 0; i &lt; 6; i++) { Channel ch = static_cast&lt;Channel&gt;(i); auto diag = driver_.get_channel_diagnostics(ch); if (diag) { if (diag-&gt;overcurrent) { handle_overcurrent(ch); } if (diag-&gt;short_to_ground) { handle_short_circuit(ch); } if (diag-&gt;open_load) { handle_open_load(ch); } } } } private: Driver&amp; driver_; int fault_count_; void handle_overtemperature() { log(\"Over-temperature detected\"); // Reduce all currents by 50% for (int i = 0; i &lt; 6; i++) { Channel ch = static_cast&lt;Channel&gt;(i); auto current = driver_.get_current_setpoint(ch); if (current) { driver_.set_current_setpoint(ch, *current / 2); } } // Clear fault after cooling delay(10s); driver_.clear_faults(); } void handle_overcurrent(Channel ch) { log(\"Over-current on channel %d\", static_cast&lt;int&gt;(ch)); // Disable channel driver_.enable_channel(ch, false); // Reduce setpoint auto current = driver_.get_current_setpoint(ch); if (current &amp;&amp; *current &gt; 500) { uint16_t new_current = *current - 200; // Reduce by 200mA driver_.set_current_setpoint(ch, new_current); } // Clear fault and retry delay(100ms); driver_.clear_faults(); driver_.enable_channel(ch, true); } void handle_short_circuit(Channel ch) { log(\"Short circuit on channel %d\", static_cast&lt;int&gt;(ch)); // Permanent disable driver_.enable_channel(ch, false); fault_count_++; if (fault_count_ &gt; 3) { log(\"Too many faults, entering safe mode\"); driver_.disable_all_channels(); } } void handle_open_load(Channel ch) { log(\"Open load on channel %d\", static_cast&lt;int&gt;(ch)); // Check if transient delay(50ms); auto diag = driver_.get_channel_diagnostics(ch); if (diag &amp;&amp; !diag-&gt;open_load) { log(\"Transient open load, continuing\"); return; } // Persistent open load - disable driver_.enable_channel(ch, false); } void handle_supply_fault() { log(\"Supply voltage fault\"); // Enter safe state driver_.disable_all_channels(); // Wait for supply to stabilize delay(1s); // Re-enable if supply recovered auto status = driver_.get_device_status(); if (status &amp;&amp; !status-&gt;vbat_uv &amp;&amp; !status-&gt;vbat_ov) { log(\"Supply recovered\"); driver_.clear_faults(); } } void start_monitoring() { // Start periodic monitoring task // (platform-specific implementation) } }; . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#robust-error-handling",
    
    "relUrl": "/docs/09_Usage_Examples/#robust-error-handling"
  },"232": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Example 6: Automotive Application",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#example-6-automotive-application",
    
    "relUrl": "/docs/09_Usage_Examples/#example-6-automotive-application"
  },"233": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Engine Management Actuators",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 . | class EngineActuatorControl { public: enum class Actuator { VVT_INTAKE, // Variable valve timing (CH0) VVT_EXHAUST, // Variable valve timing (CH1) EGR_VALVE, // EGR control (CH2) WASTEGATE, // Turbo wastegate (CH3) FUEL_PUMP, // High-pressure fuel pump (CH4+CH5 parallel) }; EngineActuatorControl(Driver&amp; driver) : driver_(driver) {} void init() { driver_.enter_config_mode(); // Configure VVT actuators (proportional, with dither) configure_vvt(Channel::CH0); configure_vvt(Channel::CH1); // Configure EGR valve (proportional) ChannelConfig egr_config{ .mode = ChannelMode::ICC, .current_setpoint_ma = 0, // Start closed .slew_rate = SlewRate::MEDIUM_2V5_US, .open_load_threshold = 4 }; driver_.configure_channel(Channel::CH2, egr_config); // Configure wastegate (fast response) ChannelConfig wg_config{ .mode = ChannelMode::ICC, .current_setpoint_ma = 0, .slew_rate = SlewRate::FASTEST_10V0_US, .open_load_threshold = 3 }; driver_.configure_channel(Channel::CH3, wg_config); // Configure fuel pump (parallel, high current) driver_.set_parallel_operation(ParallelPair::CH4_CH5, true); ChannelConfig pump_config{ .mode = ChannelMode::ICC, .current_setpoint_ma = 3000, // 3A .slew_rate = SlewRate::MEDIUM_2V5_US, .open_load_threshold = 5 }; driver_.configure_channel(Channel::CH4, pump_config); driver_.configure_channel(Channel::CH5, pump_config); driver_.enter_mission_mode(); // Enable critical actuators driver_.enable_channel(Channel::CH4, true); // Fuel pump driver_.enable_channel(Channel::CH5, true); } void set_vvt_position(Actuator actuator, float degrees) { Channel ch = (actuator == Actuator::VVT_INTAKE) ? Channel::CH0 : Channel::CH1; // Convert degrees to current (example: 0-50Â° = 500-1500mA) uint16_t current = 500 + static_cast&lt;uint16_t&gt;(degrees * 20.0f); driver_.set_current_setpoint(ch, current); } void set_egr_opening(float percent) { // 0-100% = 0-1800mA uint16_t current = static_cast&lt;uint16_t&gt;(percent * 18.0f); driver_.set_current_setpoint(Channel::CH2, current); if (percent &gt; 0) { driver_.enable_channel(Channel::CH2, true); } } private: Driver&amp; driver_; void configure_vvt(Channel ch) { ChannelConfig config{ .mode = ChannelMode::ICC, .current_setpoint_ma = 1000, // Mid position .slew_rate = SlewRate::MEDIUM_2V5_US, .open_load_threshold = 4, .deep_dither_enabled = true, .dither_step_size = 50, // Small dither for positioning .dither_steps = 10, .dither_flat = 5 }; driver_.configure_channel(ch, config); } }; . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#engine-management-actuators",
    
    "relUrl": "/docs/09_Usage_Examples/#engine-management-actuators"
  },"234": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Example 7: Diagnostic Dashboard",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#example-7-diagnostic-dashboard",
    
    "relUrl": "/docs/09_Usage_Examples/#example-7-diagnostic-dashboard"
  },"235": {
    "doc": "ğŸ’» Usage Examples",
    "title": "System Health Monitoring",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 . | void print_system_status(Driver&amp; driver) { std::cout &lt;&lt; \"\\n=== TLE92466ED System Status ===\\n\"; // Global status auto status = driver.get_device_status(); if (status) { std::cout &lt;&lt; \"Mode: \" &lt;&lt; (status-&gt;config_mode ? \"Config\" : \"Mission\") &lt;&lt; \"\\n\"; std::cout &lt;&lt; \"Init Done: \" &lt;&lt; (status-&gt;init_done ? \"Yes\" : \"No\") &lt;&lt; \"\\n\"; std::cout &lt;&lt; \"Faults: \" &lt;&lt; (status-&gt;any_fault ? \"YES\" : \"No\") &lt;&lt; \"\\n\"; if (status-&gt;any_fault) { std::cout &lt;&lt; \" VBAT UV: \" &lt;&lt; status-&gt;vbat_uv &lt;&lt; \"\\n\"; std::cout &lt;&lt; \" VBAT OV: \" &lt;&lt; status-&gt;vbat_ov &lt;&lt; \"\\n\"; std::cout &lt;&lt; \" OT Warn: \" &lt;&lt; status-&gt;ot_warning &lt;&lt; \"\\n\"; std::cout &lt;&lt; \" OT Error: \" &lt;&lt; status-&gt;ot_error &lt;&lt; \"\\n\"; } } // Channel status std::cout &lt;&lt; \"\\nChannel Status:\\n\"; std::cout &lt;&lt; \"CH | Setpt | Actual | DC% | Faults\\n\"; std::cout &lt;&lt; \"---+-------+--------+------+--------\\n\"; for (int i = 0; i &lt; 6; i++) { Channel ch = static_cast&lt;Channel&gt;(i); auto setpoint = driver.get_current_setpoint(ch); auto actual = driver.get_average_current(ch); auto dc = driver.get_duty_cycle(ch); auto diag = driver.get_channel_diagnostics(ch); std::cout &lt;&lt; \" \" &lt;&lt; i &lt;&lt; \" | \"; std::cout &lt;&lt; (setpoint ? std::to_string(*setpoint) : \"ERR\") &lt;&lt; \" | \"; std::cout &lt;&lt; (actual ? std::to_string(*actual) : \"ERR\") &lt;&lt; \" | \"; std::cout &lt;&lt; (dc ? std::to_string(*dc / 655) : \"ERR\") &lt;&lt; \" | \"; if (diag) { if (diag-&gt;overcurrent) std::cout &lt;&lt; \"OC \"; if (diag-&gt;short_to_ground) std::cout &lt;&lt; \"SG \"; if (diag-&gt;open_load) std::cout &lt;&lt; \"OL \"; } std::cout &lt;&lt; \"\\n\"; } std::cout &lt;&lt; \"================================\\n\"; } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#system-health-monitoring",
    
    "relUrl": "/docs/09_Usage_Examples/#system-health-monitoring"
  },"236": {
    "doc": "ğŸ’» Usage Examples",
    "title": "Practical Tips",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#practical-tips",
    
    "relUrl": "/docs/09_Usage_Examples/#practical-tips"
  },"237": {
    "doc": "ğŸ’» Usage Examples",
    "title": "1. Always Check Return Values",
    "content": "| 1 2 3 4 5 6 7 8 9 . | // Bad driver.init(); driver.enable_channel(Channel::CH0, true); // Good if (auto result = driver.init(); !result) { handle_error(result.error()); return; } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#1-always-check-return-values",
    
    "relUrl": "/docs/09_Usage_Examples/#1-always-check-return-values"
  },"238": {
    "doc": "ğŸ’» Usage Examples",
    "title": "2. Service Watchdogs",
    "content": "| 1 2 3 4 5 6 . | // In main loop while (running) { driver.reload_spi_watchdog(1000); // ... other operations delay(50ms); // Must be &lt; watchdog timeout } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#2-service-watchdogs",
    
    "relUrl": "/docs/09_Usage_Examples/#2-service-watchdogs"
  },"239": {
    "doc": "ğŸ’» Usage Examples",
    "title": "3. Monitor Before Critical Operations",
    "content": "| 1 2 3 4 5 6 7 . | // Before enabling high-current load auto status = driver.get_device_status(); if (status &amp;&amp; !status-&gt;vbat_uv &amp;&amp; !status-&gt;ot_error) { driver.enable_channel(Channel::CH0, true); } else { log(\"Cannot enable: system fault\"); } . | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#3-monitor-before-critical-operations",
    
    "relUrl": "/docs/09_Usage_Examples/#3-monitor-before-critical-operations"
  },"240": {
    "doc": "ğŸ’» Usage Examples",
    "title": "4. Graceful Shutdown",
    "content": "| 1 2 3 4 5 6 7 8 9 . | void shutdown() { // Disable all outputs driver.disable_all_channels(); // Return to safe state driver.enter_config_mode(); // Device is now safe } . | . | Navigation: â† HAL Implementation | Back to Index | . ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/#4-graceful-shutdown",
    
    "relUrl": "/docs/09_Usage_Examples/#4-graceful-shutdown"
  },"241": {
    "doc": "ğŸ’» Usage Examples",
    "title": "ğŸ’» Usage Examples",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/docs/09_Usage_Examples/",
    
    "relUrl": "/docs/09_Usage_Examples/"
  },"242": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ”§ HardFOC TLE92466ED Driver",
    "content": "Six-Channel Low-Side Solenoid Driver . ",
    "url": "/hf-tle92466ed-driver/development/",
    
    "relUrl": "/"
  },"243": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ¯ Modern Solenoid Control Interface for Multi-MCU Development",
    "content": "A production-ready C++23 driver implementation for the Infineon TLE92466ED with comprehensive SPI interface, precision current control, and extensive diagnostics support . ",
    "url": "/hf-tle92466ed-driver/development/#-modern-solenoid-control-interface-for-multi-mcu-development",
    
    "relUrl": "/#-modern-solenoid-control-interface-for-multi-mcu-development"
  },"244": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ“š Table of Contents",
    "content": ". | ğŸ¯ Overview | ğŸ—ï¸ Architecture | ğŸ”Œ Features | ğŸš€ Quick Start | ğŸ“– API Documentation | ğŸ”§ Building | ğŸ“Š Examples | ğŸ¤ Contributing | ğŸ“„ License | . ",
    "url": "/hf-tle92466ed-driver/development/#-table-of-contents",
    
    "relUrl": "/#-table-of-contents"
  },"245": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ¯ Overview",
    "content": "ğŸ“– ğŸ“šğŸŒ Live Complete Documentation - Interactive guides, examples, and step-by-step tutorials . TLE92466ED Driver is a modern, production-ready C++23 driver implementation for the Infineon TLE92466ED Six-Channel Low-Side Solenoid Driver IC. The driver provides comprehensive SPI interface, precision current control, and extensive diagnostics support with a clean hardware-agnostic HAL interface. ",
    "url": "/hf-tle92466ed-driver/development/#-overview",
    
    "relUrl": "/#-overview"
  },"246": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ† Core Benefits",
    "content": ". | ğŸ”„ Hardware Portability - Clean HAL interface for easy platform porting | ğŸ¯ Modern C++23 - Using std::expected for type-safe error handling | âš¡ Precision Control - 15-bit current resolution (0.061mA steps) | ğŸ›¡ï¸ Safety Features - Comprehensive diagnostics and protection systems | ğŸ“ˆ Zero Dependencies - Freestanding-compatible, suitable for bare-metal | ğŸ”Œ Complete Coverage - Full access to all 108 registers and features | . ",
    "url": "/hf-tle92466ed-driver/development/#-core-benefits",
    
    "relUrl": "/#-core-benefits"
  },"247": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ¨ Design Philosophy",
    "content": "| 1 2 3 4 5 6 7 8 . | // Write hardware-agnostic solenoid control code YourPlatformHAL hal; // Your SPI implementation TLE92466ED driver(hal); // Initialize and control channels driver.initialize(); driver.setChannelCurrent(0, 1500); // 1.5A driver.enableChannel(0); . | . ",
    "url": "/hf-tle92466ed-driver/development/#-design-philosophy",
    
    "relUrl": "/#-design-philosophy"
  },"248": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ—ï¸ Architecture",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/#%EF%B8%8F-architecture",
    
    "relUrl": "/#ï¸-architecture"
  },"249": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "HAL-Based Design",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 . | ğŸ“¦ TLE92466ED Driver Architecture â”œâ”€â”€ ğŸ¯ Driver Layer (TLE92466ED class) # High-level channel control API â”‚ â”œâ”€â”€ Channel Control # Current setting, enable/disable â”‚ â”œâ”€â”€ Diagnostics # Fault detection and monitoring â”‚ â”œâ”€â”€ Configuration # Channel modes, PWM settings â”‚ â””â”€â”€ Register Access # Direct register manipulation â”‚ â”œâ”€â”€ ğŸ”Œ Hardware Abstraction Layer # Platform-independent interface â”‚ â”œâ”€â”€ TLE92466ED_CommInterface # Communication interface â”‚ â”œâ”€â”€ SPI Transfer # 32-bit frame communication â”‚ â””â”€â”€ Delay Functions # Timing control â”‚ â””â”€â”€ ğŸ”§ Hardware Layer # Platform-specific implementations â”œâ”€â”€ ESP32 HAL # ESP32 family support â”œâ”€â”€ STM32 HAL # STM32 support â””â”€â”€ Any MCU with SPI # Your implementation . | . ",
    "url": "/hf-tle92466ed-driver/development/#hal-based-design",
    
    "relUrl": "/#hal-based-design"
  },"250": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Abstraction Benefits",
    "content": "1. MCU Independence . | 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 . | // Application code remains the same across MCUs class SolenoidController { TLE92466ED* driver; public: void Initialize() { // Platform-specific HAL, same driver code YourPlatformHAL hal; // ESP32, STM32, or any MCU driver = new TLE92466ED(hal); // Same API regardless of MCU driver-&gt;initialize(); driver-&gt;setChannelCurrent(0, 1500); driver-&gt;enableChannel(0); } }; . | . ",
    "url": "/hf-tle92466ed-driver/development/#abstraction-benefits",
    
    "relUrl": "/#abstraction-benefits"
  },"251": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ”Œ Features",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/#-features",
    
    "relUrl": "/#-features"
  },"252": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Hardware Capabilities",
    "content": "| Feature | Specification | Details | . | Channels | 6 independent outputs | Low-side solenoid/load control | . | Current Range | 0-2A per channel | Single channel operation | . | Current Range | 0-4A per channel | Parallel mode operation | . | Resolution | 15-bit (0.061mA) | Precision current control | . | SPI Interface | 32-bit frames | With CRC-8 (SAE J1850) | . | PWM &amp; Dither | Configurable | Noise reduction and precision | . | Diagnostics | Comprehensive | Overcurrent, overtemperature, load detection | . ",
    "url": "/hf-tle92466ed-driver/development/#hardware-capabilities",
    
    "relUrl": "/#hardware-capabilities"
  },"253": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Driver Features",
    "content": "| Feature | Description | Benefits | . | Modern C++23 | Using std::expected | Type-safe error handling | . | Hardware Agnostic | Clean HAL interface | Easy platform porting | . | Zero Dependencies | Freestanding-compatible | Suitable for bare-metal | . | noexcept Guarantee | All functions noexcept | Embedded safety | . | Production Ready | Thoroughly documented | Industry-grade quality | . ",
    "url": "/hf-tle92466ed-driver/development/#driver-features",
    
    "relUrl": "/#driver-features"
  },"254": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸš€ Quick Start",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/#-quick-start",
    
    "relUrl": "/#-quick-start"
  },"255": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "1. Clone Repository",
    "content": "| 1 2 . | git clone https://github.com/n3b3x/hf-tle92466ed-driver.git cd hf-tle92466ed-driver . | . ",
    "url": "/hf-tle92466ed-driver/development/#1-clone-repository",
    
    "relUrl": "/#1-clone-repository"
  },"256": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "2. Implement HAL Interface",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 . | #include \"inc/TLE92466ED_CommInterface.hpp\" class YourPlatformHAL : public TLE92466ED::HAL { public: auto spiTransfer(std::span&lt;const uint8_t&gt; txData, std::span&lt;uint8_t&gt; rxData) noexcept -&gt; std::expected&lt;void, HALError&gt; override { // Your SPI transfer implementation return {}; } void delayMicroseconds(uint32_t us) noexcept override { // Your delay implementation } }; . | . ",
    "url": "/hf-tle92466ed-driver/development/#2-implement-hal-interface",
    
    "relUrl": "/#2-implement-hal-interface"
  },"257": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "3. Basic Usage",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 . | #include \"include/TLE92466ED.hpp\" YourPlatformHAL hal; TLE92466ED driver(hal); // Initialize the IC if (auto result = driver.initialize(); !result) { return -1; } // Set current for channel 0 to 1.5A driver.setChannelCurrent(0, 1500); // Enable channel 0 driver.enableChannel(0); . | . ",
    "url": "/hf-tle92466ed-driver/development/#3-basic-usage",
    
    "relUrl": "/#3-basic-usage"
  },"258": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "4. Build Example",
    "content": "| 1 2 3 . | cd examples/esp32 ./scripts/setup_repo.sh ./scripts/build_app.sh basic_usage Release . | . ",
    "url": "/hf-tle92466ed-driver/development/#4-build-example",
    
    "relUrl": "/#4-build-example"
  },"259": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ“– API Documentation",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/#-api-documentation",
    
    "relUrl": "/#-api-documentation"
  },"260": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Generated Documentation",
    "content": ". | ğŸ“š Complete Documentation - Interactive guides and tutorials | API Reference - Complete driver API documentation | IC Overview - Hardware specifications | . ",
    "url": "/hf-tle92466ed-driver/development/#generated-documentation",
    
    "relUrl": "/#generated-documentation"
  },"261": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Key Concepts",
    "content": "Initialization . | 1 2 3 4 5 . | // Initialize the driver if (auto result = driver.initialize(); !result) { // Handle initialization error return; } . | . Channel Control . | 1 2 3 4 5 6 . | // Set current (0-2000 mA) driver.setChannelCurrent(0, 1500); // 1.5A // Enable/disable channels driver.enableChannel(0); driver.disableChannel(0); . | . Diagnostics . | 1 2 3 4 5 6 . | // Read diagnostics if (auto diag = driver.readDiagnostics(); diag) { if (diag-&gt;hasOvercurrent()) { // Handle overcurrent condition } } . | . ",
    "url": "/hf-tle92466ed-driver/development/#key-concepts",
    
    "relUrl": "/#key-concepts"
  },"262": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ”§ Building",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/#-building",
    
    "relUrl": "/#-building"
  },"263": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Build System Features",
    "content": ". | CMake Integration - Easy project integration | ESP32 Examples - Comprehensive test applications | Manual Integration - Simple header/source inclusion | CI/CD Integration - Automated builds and validation | . ",
    "url": "/hf-tle92466ed-driver/development/#build-system-features",
    
    "relUrl": "/#build-system-features"
  },"264": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Build Commands",
    "content": "| 1 2 3 4 5 6 7 8 . | ## For ESP32 development cd examples/esp32 ./scripts/setup_repo.sh ./scripts/build_app.sh &lt;app_name&gt; &lt;build_type&gt; ## Examples: ./scripts/build_app.sh basic_usage Release ./scripts/build_app.sh multi_channel Debug . | . ",
    "url": "/hf-tle92466ed-driver/development/#build-commands",
    
    "relUrl": "/#build-commands"
  },"265": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "CMake Integration",
    "content": "| 1 2 . | add_subdirectory(external/hf-tle92466ed-driver) target_link_libraries(your_target PRIVATE TLE92466ED) . | . ",
    "url": "/hf-tle92466ed-driver/development/#cmake-integration",
    
    "relUrl": "/#cmake-integration"
  },"266": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ“Š Examples",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/#-examples",
    
    "relUrl": "/#-examples"
  },"267": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Available Test Applications",
    "content": "| Application | Tests | Purpose | . | basic_usage | Single channel control | Basic current setting and enable | . | multi_channel | Multi-channel operation | Parallel channel control | . | diagnostics | Fault detection | Overcurrent and overtemperature | . ",
    "url": "/hf-tle92466ed-driver/development/#available-test-applications",
    
    "relUrl": "/#available-test-applications"
  },"268": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Usage Examples",
    "content": "| 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 . | // Single Channel Control driver.setChannelCurrent(0, 1500); // 1.5A driver.enableChannel(0); // Multi-Channel Control for (uint8_t ch = 0; ch &lt; 6; ch++) { driver.setChannelCurrent(ch, 1000); // 1A per channel driver.enableChannel(ch); } // Diagnostics Monitoring if (auto diag = driver.readDiagnostics(); diag) { if (diag-&gt;hasOvercurrent()) { driver.disableChannel(0); } } . | . ",
    "url": "/hf-tle92466ed-driver/development/#usage-examples",
    
    "relUrl": "/#usage-examples"
  },"269": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ¤ Contributing",
    "content": "Contributions are welcome! For detailed contribution guidelines, coding standards, and development workflow, please visit the HardFOC Organization GitHub page. ",
    "url": "/hf-tle92466ed-driver/development/#-contributing",
    
    "relUrl": "/#-contributing"
  },"270": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Development Workflow",
    "content": ". | Fork the repository | Create feature branch (feature/new-feature) | Implement following coding standards | Test with existing applications | Document your changes | Submit pull request | . ",
    "url": "/hf-tle92466ed-driver/development/#development-workflow",
    
    "relUrl": "/#development-workflow"
  },"271": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Coding Standards",
    "content": ". | Functions: PascalCase (SetChannelCurrent, ReadDiagnostics) | Types: snake_case with *t suffix (hal_error_t) | Error Handling: Use std::expected for type safety | Code Formatting: Use clang-format | . ",
    "url": "/hf-tle92466ed-driver/development/#coding-standards",
    
    "relUrl": "/#coding-standards"
  },"272": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ“„ License",
    "content": "This software is released into the Public Domain. You can use, modify, and distribute it freely without any restrictions. ",
    "url": "/hf-tle92466ed-driver/development/#-license",
    
    "relUrl": "/#-license"
  },"273": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "ğŸ”— Quick Links",
    "content": " ",
    "url": "/hf-tle92466ed-driver/development/#-quick-links",
    
    "relUrl": "/#-quick-links"
  },"274": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Documentation",
    "content": ". | ğŸ“š Complete Documentation - Interactive guides and tutorials | ğŸ“‹ Documentation Index - Complete documentation navigation | ğŸ”Œ IC Overview - Hardware specifications | ğŸ“¡ SPI Protocol - Communication protocol | ğŸ›ï¸ Driver API - C++ API reference | ğŸ”§ HAL Implementation - Platform porting guide | ğŸ’» Usage Examples - Practical code examples | . ",
    "url": "/hf-tle92466ed-driver/development/#documentation",
    
    "relUrl": "/#documentation"
  },"275": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Development",
    "content": ". | ğŸš€ Examples - Test applications and usage examples | ğŸ§ª Test Documentation - Comprehensive test documentation | ğŸ”§ Scripts - Build, flash, and development tools | ğŸ“Š Configuration - Application and build settings | . ",
    "url": "/hf-tle92466ed-driver/development/#development",
    
    "relUrl": "/#development"
  },"276": {
    "doc": "ğŸ”§ HardFOC TLE92466ED Driver",
    "title": "Community",
    "content": ". | ğŸ¤ Contributing - How to contribute | ğŸ› Issue Tracker | ğŸ’¬ Discussions | . Built for the HardFOC ecosystem - Enabling seamless solenoid control . Precision current control that just worksâ„¢ . ",
    "url": "/hf-tle92466ed-driver/development/#community",
    
    "relUrl": "/#community"
  },"277": {
    "doc": "ESP32 Examples Configuration Guide",
    "title": "ESP32 Examples Configuration Guide",
    "content": "# ESP32 Examples Configuration Guide ## Overview This guide explains all configuration files and settings for the TLE92466ED ESP32 examples, including hardware configuration, build settings, and test options. ## ğŸ“ Configuration File Structure ```text examples/esp32/ â”œâ”€â”€ app_config.yml # Build metadata and app definitions â”œâ”€â”€ main/ â”‚ â”œâ”€â”€ TLE92466ED_TestConfig.hpp # Hardware configuration (SPI, pins, limits) â”‚ â”œâ”€â”€ DriverIntegrationTest.cpp # Driver integration test suite â”‚ â”œâ”€â”€ SolenoidControlTest.cpp # Real hardware solenoid control test â”‚ â””â”€â”€ Esp32TleCommInterface.cpp # ESP32 communication interface â”œâ”€â”€ sdkconfig # ESP-IDF SDK configuration â””â”€â”€ components/ â””â”€â”€ hf_tle92466ed/ â”œâ”€â”€ CMakeLists.txt # Component build config â””â”€â”€ idf_component.yml # Component metadata ``` --- ## 1. Hardware Configuration (`main/TLE92466ED_TestConfig.hpp`) ### Purpose **Centralized hardware-specific settings** for ESP32-C6 and TLE92466ED interface. ### Location ```text examples/esp32/main/TLE92466ED_TestConfig.hpp ``` ### Complete Configuration ```cpp #pragma once #include namespace TLE92466ED_TestConfig { //============================================================================= // SPI PIN CONFIGURATION //============================================================================= struct SPIPins { static constexpr int MISO = 2; // GPIO2 - SPI MISO static constexpr int MOSI = 7; // GPIO7 - SPI MOSI static constexpr int SCLK = 6; // GPIO6 - SPI Clock static constexpr int CS = 10; // GPIO10 - Chip Select }; //============================================================================= // SPI PARAMETERS //============================================================================= struct SPIParams { static constexpr int FREQUENCY = 1000000; // 1MHz SPI clock static constexpr int MODE = 0; // SPI Mode 0 (CPOL=0, CPHA=0) static constexpr int QUEUE_SIZE = 7; // Max transactions in queue }; //============================================================================= // CURRENT LIMITS //============================================================================= struct CurrentLimits { static constexpr uint16_t SINGLE_CHANNEL_MAX = 2000; // 2A per channel static constexpr uint16_t PARALLEL_CHANNEL_MAX = 4000; // 4A in parallel mode }; //============================================================================= // HARDWARE SPECIFICATIONS //============================================================================= struct HardwareSpecs { static constexpr float SUPPLY_VOLTAGE_MIN = 8.0f; // Minimum VBAT (V) static constexpr float SUPPLY_VOLTAGE_MAX = 28.0f; // Maximum VBAT (V) static constexpr int TEMPERATURE_MAX = 150; // Max junction temp (Â°C) }; //============================================================================= // TEST CONFIGURATION //============================================================================= struct TestConfig { static constexpr uint16_t TEST_CURRENT_STEPS[] = {100, 500, 1000, 1500, 2000}; static constexpr size_t TEST_CURRENT_STEPS_COUNT = sizeof(TEST_CURRENT_STEPS) / sizeof(TEST_CURRENT_STEPS[0]); static constexpr uint32_t TEST_DURATION_MS = 5000; static constexpr uint32_t DIAGNOSTICS_POLL_INTERVAL_MS = 100; }; } // namespace TLE92466ED_TestConfig ```text ### Configuration Sections #### SPI Pins (`SPIPins`) | Setting | Default | Range | Notes |---------|---------|-------|-------| `MISO` | GPIO2 | Any GPIO | Data from TLE92466ED | `MOSI` | GPIO7 | Any GPIO | Data to TLE92466ED | `SCLK` | GPIO6 | Any GPIO | SPI clock output | `CS` | GPIO10 | Any GPIO | Chip select (active LOW) | **ESP32-C6 GPIO Considerations**: - Avoid GPIO0, GPIO8, GPIO9 (strapping pins) - GPIO12-GPIO13: JTAG (avoid if debugging) - GPIO15-GPIO20: USB Serial/JTAG - Recommended: GPIO2-GPIO11 for peripherals #### SPI Parameters (`SPIParams`) | Setting | Default | Range | Notes |---------|---------|-------|-------| `FREQUENCY` | 1000000 | 100000-10000000 | SPI clock (Hz, datasheet: 0.1-10MHz) | `MODE` | 1 | 0-3 | SPI mode (TLE92466ED requires Mode 1: CPOL=0, CPHA=1) | `QUEUE_SIZE` | 7 | 1-10 | Transaction queue depth | **SPI Mode 1** (per datasheet): - CPOL = 0 (clock idle LOW) - CPHA = 1 (sample on falling edge) - **Required by TLE92466ED** - do not change! **Frequency Guidelines**: - **100kHz**: Debug/troubleshooting - **1MHz**: Default, reliable (recommended) - **2-4MHz**: Higher performance - **8-10MHz**: Maximum (may require shorter cables, datasheet max: 10MHz) #### Current Limits (`CurrentLimits`) | Setting | Default | Range | Notes |---------|---------|-------|-------| `SINGLE_CHANNEL_MAX` | 2000 | 0-2000 | Max per channel (mA) | `PARALLEL_CHANNEL_MAX` | 4000 | 0-4000 | Parallel mode max (mA) | **Safety Notes**: - TLE92466ED maximum: 2A per channel - Parallel mode: 4A across paired channels - Driver enforces these limits - Exceeding causes overcurrent fault #### Hardware Specs (`HardwareSpecs`) | Setting | Default | Range | Notes |---------|---------|-------|-------| `SUPPLY_VOLTAGE_MIN` | 5.5 | 5.5-41.0 | Minimum VBAT (V) | `SUPPLY_VOLTAGE_MAX` | 41.0 | 5.5-41.0 | Maximum VBAT (V) | `TEMPERATURE_MAX` | 150 | -40 to 150 | Max junction temp (Â°C) | **Operating Range** (per datasheet): - VBAT: 5.5V to 41V recommended operating (typical: 12V or 24V automotive) - VDD: 5V input to TLE92466ED (powers central logic) - Required for IC operation - VIO: 3.0V to 5.5V input (sets I/O voltage levels for SPI communication, typical: 3.3V or 5.0V) - Temperature: -40Â°C to 150Â°C junction #### Test Configuration (`TestConfig`) | Setting | Default | Notes |---------|---------|-------| `TEST_CURRENT_STEPS` | {100, 500, 1000, 1500, 2000} | Current test points (mA) | `TEST_DURATION_MS` | 5000 | Test duration (ms) | `DIAGNOSTICS_POLL_INTERVAL_MS` | 100 | Polling interval (ms) | **Used by test suites** for consistent test parameters. ### Modifying Hardware Configuration #### Example: Different GPIO Pins ```cpp struct SPIPins { static constexpr int MISO = 4; // Changed to GPIO4 static constexpr int MOSI = 5; // Changed to GPIO5 static constexpr int SCLK = 3; // Changed to GPIO3 static constexpr int CS = 11; // Changed to GPIO11 }; ```text #### Example: Higher SPI Frequency ```cpp struct SPIParams { static constexpr int FREQUENCY = 4000000; // 4MHz (higher performance) static constexpr int MODE = 0; static constexpr int QUEUE_SIZE = 7; }; ```text #### Example: Custom Test Currents ```cpp struct TestConfig { static constexpr uint16_t TEST_CURRENT_STEPS[] = {250, 750, 1250, 1750}; static constexpr size_t TEST_CURRENT_STEPS_COUNT = 4; static constexpr uint32_t TEST_DURATION_MS = 10000; // 10 seconds static constexpr uint32_t DIAGNOSTICS_POLL_INTERVAL_MS = 50; // 50ms }; ```text --- ## 2. Application Configuration (`app_config.yml`) ### Purpose **Build metadata and app definitions** for the dynamic build system. ### Location ```text examples/esp32/app_config.yml ```text ### Structure ```yaml apps: driver_integration_test: description: \"Comprehensive driver integration test suite (no hardware required)\" source_file: \"DriverIntegrationTest.cpp\" category: \"test\" idf_versions: [\"release/v5.5\"] build_types: [\"Debug\", \"Release\"] ci_enabled: true featured: true documentation: \"docs/README_DRIVER_INTEGRATION_TEST.md\" ``` ### App Definition Fields | Field | Type | Required | Description |-------|------|----------|-------------| `description` | string | Yes | Human-readable description | `source_file` | string | Yes | Main source file in `main/` | `category` | string | Yes | Category: `demo`, `test`, `application` | `idf_versions` | list | Yes | Compatible ESP-IDF versions | `build_types` | list | Yes | Supported build types | `ci_enabled` | bool | Yes | Enable in CI/CD pipeline | `featured` | bool | No | Feature in documentation | `documentation` | string | No | Path to documentation file | ### Build Types #### Debug ```yaml build_types: [\"Debug\"] ```text - **Optimization**: `-Og` (debug-friendly) - **Symbols**: Full debug symbols - **Assertions**: Enabled - **Size**: Larger binaries - **Speed**: Slower execution - **Use**: Development, debugging #### Release ```yaml build_types: [\"Release\"] ```text - **Optimization**: `-O2` (performance) - **Symbols**: Minimal symbols - **Assertions**: Disabled - **Size**: Smaller binaries - **Speed**: Faster execution - **Use**: Production, benchmarking ### IDF Versions ```yaml idf_versions: - \"release/v5.5\" # ESP-IDF v5.5.x (recommended) - \"release/v5.4\" # ESP-IDF v5.4.x (compatible) - \"release/v5.3\" # ESP-IDF v5.3.x (minimum) ```text **Requirements**: - **Minimum**: ESP-IDF v5.3 (C++23 support) - **Recommended**: ESP-IDF v5.5 (latest features) ### Adding a New App ```yaml apps: my_custom_app: description: \"My custom TLE92466ED application\" source_file: \"MyCustomApp.cpp\" category: \"application\" idf_versions: [\"release/v5.5\"] build_types: [\"Debug\", \"Release\"] ci_enabled: false featured: false documentation: \"docs/README_MY_CUSTOM_APP.md\" ```text Then create: ```text examples/esp32/main/MyCustomApp.cpp examples/esp32/docs/README_MY_CUSTOM_APP.md ```text --- ## 3. Test Section Configuration ### Purpose **Compile-time enable/disable** of test sections. ### Location In each example source file (e.g., `DriverIntegrationTest.cpp`): ```cpp //============================================================================= // TEST CONFIGURATION //============================================================================= #define ENABLE_INITIALIZATION_TESTS 1 #define ENABLE_BASIC_OPERATION_TESTS 1 #define ENABLE_CURRENT_CONTROL_TESTS 1 ```text ### Test Sections | Section | Purpose | Tests |---------|---------|-------| `INITIALIZATION_TESTS` | HAL and driver setup | HAL init, driver init, chip ID | `BASIC_OPERATION_TESTS` | Core operations | Enable/disable, current setting, diagnostics | `CURRENT_CONTROL_TESTS` | Advanced control | Current ramping, multi-channel | ### Disabling Sections Set to `0` to disable: ```cpp #define ENABLE_INITIALIZATION_TESTS 1 // Enabled #define ENABLE_BASIC_OPERATION_TESTS 1 // Enabled #define ENABLE_CURRENT_CONTROL_TESTS 0 // DISABLED ```text **Benefits**: - Faster iteration during development - Focus on specific features - Reduce test time - Save memory if needed ### Usage in Code ```cpp RUN_TEST_SECTION_IF_ENABLED( ENABLE_INITIALIZATION_TESTS, \"INITIALIZATION TESTS\", // Tests only run if flag is 1 RUN_TEST_IN_TASK(\"hal_init\", test_hal_initialization, 8192, 5); ); ```text --- ## 4. ESP-IDF SDK Configuration (`sdkconfig`) ### Purpose **ESP-IDF framework configuration** - compiler, components, features. ### Location ```text examples/esp32/sdkconfig ```text ### Key Settings #### Compiler Optimization ```ini CONFIG_COMPILER_OPTIMIZATION_SIZE=n CONFIG_COMPILER_OPTIMIZATION_PERF=y CONFIG_COMPILER_OPTIMIZATION_DEBUG=n ```text **Options**: - `SIZE`: Optimize for size (`-Os`) - `PERF`: Optimize for performance (`-O2`) **â† Default** - `DEBUG`: Optimize for debugging (`-Og`) #### C++ Standard ```ini CONFIG_COMPILER_CXX_STD_GNUXX23=y ```text **Required**: TLE92466ED driver uses C++23 features (`std::expected`) #### Log Level ```ini CONFIG_LOG_DEFAULT_LEVEL_INFO=y CONFIG_LOG_DEFAULT_LEVEL_DEBUG=n ```text **Options**: - `NONE`: No logging - `ERROR`: Errors only - `WARN`: Warnings and errors - `INFO`: Information, warnings, errors **â† Default** - `DEBUG`: Debug + all above - `VERBOSE`: Verbose + all above #### Stack Sizes ```ini CONFIG_ESP_MAIN_TASK_STACK_SIZE=8192 CONFIG_ESP_SYSTEM_EVENT_TASK_STACK_SIZE=4096 ```text **Recommendations**: - Main task: 8KB (default sufficient) - Increase if stack overflow errors occur #### FreeRTOS ```ini CONFIG_FREERTOS_HZ=1000 CONFIG_FREERTOS_USE_TRACE_FACILITY=y CONFIG_FREERTOS_GENERATE_RUN_TIME_STATS=y ```text **Important**: - `HZ=1000`: 1ms tick resolution (for accurate timing) - Trace facility: Useful for debugging ### Modifying sdkconfig #### Via menuconfig (Interactive) ```bash cd examples/esp32 idf.py menuconfig ```text Navigate with arrow keys, space to select, 'S' to save. #### Via sdkconfig.defaults Create `sdkconfig.defaults`: ```ini # Custom defaults CONFIG_COMPILER_OPTIMIZATION_PERF=y CONFIG_LOG_DEFAULT_LEVEL_DEBUG=y CONFIG_ESP_MAIN_TASK_STACK_SIZE=16384 ```text Then: ```bash idf.py fullclean idf.py reconfigure ```text --- ## 5. Component Configuration ### Component CMakeLists.txt **Location**: `examples/esp32/components/hf_tle92466ed/CMakeLists.txt` ```cmake # Source resolution (automatic) if(EXISTS \"${PROJECT_ROOT}/src\" AND EXISTS \"${PROJECT_ROOT}/include\") set(SRC_ROOT \"${PROJECT_ROOT}\") # CI environment else() get_filename_component(SRC_ROOT \"${CMAKE_SOURCE_DIR}/../../\" ABSOLUTE) endif() # Source files set(TLE92466ED_SRCS \"${SRC_ROOT}/src/TLE92466ED.cpp\" ) # Component registration idf_component_register( SRCS ${EXISTING_SRCS} INCLUDE_DIRS \"${SRC_ROOT}/include\" REQUIRES driver esp_timer freertos esp_driver_spi ) # C++23 standard target_compile_features(${COMPONENT_LIB} PRIVATE cxx_std_23) ```text **Key Points**: - Automatically finds driver sources - Handles CI and development paths - C++23 required - No manual source list maintenance ### Component Manifest (idf_component.yml) **Location**: `examples/esp32/components/hf_tle92466ed/idf_component.yml` ```yaml name: hf-tle92466ed-driver version: \"2.0.0\" description: TLE92466ED driver for ESP-IDF dependencies: idf: \">=5.0.0\" targets: - esp32c6 - esp32 - esp32s3 - esp32c3 ``` **Purpose**: ESP-IDF Component Manager metadata --- ## ğŸ”§ Configuration Workflows ### Development Setup 1. **Clone repository** ```bash git clone https://github.com/N3b3x/hf-tle92466ed-driver.git cd hf-tle92466ed-driver/examples/esp32 ``` 2. **Initialize submodules** ```bash git submodule update --init --recursive ``` 3. **Configure hardware** (if needed) ```bash nano main/TLE92466ED_TestConfig.hpp # Modify SPI pins, frequency, etc. ``` 4. **Set ESP-IDF target** ```bash idf.py set-target esp32c6 ``` 5. **Configure SDK** (optional) ```bash idf.py menuconfig ``` 6. **Build** ```bash ./scripts/build_app.sh basic_usage Debug ``` ### Production Setup 1. **Use Release build** ```bash ./scripts/build_app.sh basic_usage Release ``` 2. **Optimize sdkconfig** ```ini CONFIG_COMPILER_OPTIMIZATION_PERF=y CONFIG_LOG_DEFAULT_LEVEL_WARN=y CONFIG_BOOTLOADER_LOG_LEVEL_WARN=y ``` 3. **Disable debug features** ```cpp #define ENABLE_DEBUG_LOGGING 0 #define ENABLE_STRESS_TESTS 0 ``` 4. **Verify settings** ```bash idf.py size idf.py size-components ``` ### Troubleshooting Configuration #### GPIO Conflict **Error**: `GPIO already in use` **Solution**: Change pins in `TLE92466ED_TestConfig.hpp`: ```cpp struct SPIPins { static constexpr int MISO = 4; // Try different GPIO // ... }; ``` #### SPI Communication Failure **Error**: `Failed to initialize HAL` **Solutions**: 1. Check frequency: Lower to 100kHz for testing 2. Verify wiring matches configuration 3. Try different SPI host (SPI2_HOST vs SPI3_HOST) #### Stack Overflow **Error**: `***ERROR*** A stack overflow in task` **Solutions**: 1. Increase task stack in `RUN_TEST_IN_TASK`: ```cpp RUN_TEST_IN_TASK(\"test\", test_func, 16384, 5); // 16KB ``` 2. Increase main stack in sdkconfig: ```ini CONFIG_ESP_MAIN_TASK_STACK_SIZE=16384 ``` #### Build Type Issues **Error**: Unexpected optimization level **Solution**: ```bash # Clean and rebuild with explicit build type idf.py fullclean idf.py -DCMAKE_BUILD_TYPE=Debug build ``` --- ## ğŸ“š Configuration Reference ### File Purposes Summary | File | Purpose | When to Modify |------|---------|----------------| `TLE92466ED_TestConfig.hpp` | Hardware settings | Different GPIO/hardware | `app_config.yml` | Build metadata | Add new app/example | `DriverIntegrationTest.cpp` (flags) | Test sections | Enable/disable tests | `sdkconfig` | ESP-IDF settings | Compiler/framework config | `components/.../CMakeLists.txt` | Component build | Never (auto-configured) | `components/.../idf_component.yml` | Component metadata | Version/dependency changes | ### Configuration Hierarchy ```text Hardware Layer â””â”€â”€ TLE92466ED_TestConfig.hpp (SPI pins, frequencies, limits) Application Layer â”œâ”€â”€ app_config.yml (Build metadata, app list) â””â”€â”€ *Example.cpp (Test section flags) Framework Layer â”œâ”€â”€ sdkconfig (ESP-IDF configuration) â””â”€â”€ components/ (Component configuration) ```text --- **Document Version**: 1.0.0 **Last Updated**: 2025-10-21 **Status**: âœ… Complete ",
    "url": "/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html",
    
    "relUrl": "/examples/esp32/docs/README_CONFIGURATION.html"
  },"278": {
    "doc": "Driver Integration Test Suite - TLE92466ED ESP32-C6",
    "title": "Driver Integration Test Suite - TLE92466ED ESP32-C6",
    "content": "# Driver Integration Test Suite - TLE92466ED ESP32-C6 ## Table of Contents 1. [Overview](#overview) 2. [Purpose](#purpose) 3. [Test Framework Architecture](#test-framework-architecture) 4. [Test Suite Structure](#test-suite-structure) 5. [Hardware Setup](#hardware-setup) 6. [Configuration](#configuration) 7. [Building and Running](#building-and-running) 8. [Expected Output](#expected-output) 9. [Test Coverage](#test-coverage) 10. [Individual Test Details](#individual-test-details) 11. [Troubleshooting](#troubleshooting) 12. [Performance Characteristics](#performance-characteristics) 13. [Related Documentation](#related-documentation) --- ## Overview The **Driver Integration Test Suite** validates all functionality of the TLE92466ED driver without requiring actual solenoids or loads. This test suite provides API validation with **40+ individual tests** organized into **13 test sections**, covering all driver capabilities. ### Key Features - **Complete API Coverage**: Tests all public driver functions - **No Hardware Required**: Validates driver logic and SPI communication only - **Test Framework**: FreeRTOS task-based execution with automatic result tracking - **GPIO14 Progress Indicator**: Visual feedback on oscilloscope/logic analyzer - **Telemetry Testing**: Validates all status and diagnostic reading functions - **Error Condition Testing**: Verifies proper error handling and validation --- ## Purpose This test suite serves multiple purposes: 1. **Driver Validation**: Ensures all driver APIs work correctly 2. **Regression Testing**: Detects breaking changes during development 3. **CI/CD Integration**: Automated testing in continuous integration pipelines 4. **Documentation**: Demonstrates proper usage of all driver functions 5. **Development Aid**: Helps developers understand driver capabilities 6. **Quality Assurance**: Validates driver behavior before hardware testing **Note**: This test validates the driver and SPI communication but does not test actual solenoid operation. For real hardware testing with solenoids, use the **Solenoid Control Test**. --- ## Test Framework Architecture The test suite uses the **TLE92466ED Test Framework** (`TLE92466ED_TestFramework.hpp`), which provides: #### FreeRTOS Task-Based Execution - Each test runs in isolated FreeRTOS task - Custom stack size per test (8KB default) - Automatic semaphore synchronization - 30-second timeout protection - Fallback to inline execution on failure #### GPIO14 Progress Indicator - Visual feedback on oscilloscope/logic analyzer - **Toggle**: HIGH/LOW on each test completion - **Blink Pattern**: 5 blinks at section start/end - Hardware-level test progression tracking #### Automatic Result Tracking - Pass/fail counting - Microsecond-precision execution timing - Success rate calculation - Summary reports #### Test Section Management - Compile-time section enable/disable - Section-based organization - Custom blink patterns per section - Structured output formatting --- ## Test Suite Structure This integration test suite validates all functionality of the TLE92466ED driver. The suite includes **13 test sections** with **40+ individual tests** covering all driver APIs. ### Test Sections #### 1. INITIALIZATION_TESTS (`#define ENABLE_INITIALIZATION_TESTS 1`) Tests fundamental setup and communication: - `test_hal_initialization` - ESP32-C6 HAL setup and SPI configuration - `test_driver_initialization` - TLE92466ED driver instance creation - `test_chip_id` - SPI communication verification via chip ID - `test_ic_version` - IC version register reading - `test_device_verification` - Device ID verification #### 2. MODE_CONTROL_TESTS (`#define ENABLE_MODE_CONTROL_TESTS 1`) Tests mode transitions and state management: - `test_enter_mission_mode` - Transition to Mission Mode - `test_enter_config_mode` - Transition to Config Mode - `test_mode_transitions` - Multiple mode transition cycles #### 3. GLOBAL_CONFIGURATION_TESTS (`#define ENABLE_GLOBAL_CONFIG_TESTS 1`) Tests global device configuration: - `test_crc_control` - CRC enable/disable functionality - `test_vbat_thresholds` - VBAT UV/OV threshold configuration (high-level and raw APIs) - `test_global_configuration` - Complete global configuration #### 4. CHANNEL_CONTROL_TESTS (`#define ENABLE_CHANNEL_CONTROL_TESTS 1`) Tests channel enable/disable and mode configuration: - `test_single_channel_control` - Single channel enable/disable - `test_all_channels_control` - All channels enable/disable - `test_channel_mask_control` - Channel mask-based control - `test_channel_mode_configuration` - All channel modes (OFF, ICC, Direct Drive, etc.) #### 5. CURRENT_CONTROL_TESTS (`#define ENABLE_CURRENT_CONTROL_TESTS 1`) Tests current setpoint control: - `test_current_setpoint` - Current setting with read-back verification (100mA, 500mA, 1000mA, 1500mA, 2000mA) - `test_current_ramping` - Smooth 0â†’1000mAâ†’0mA transitions #### 6. PWM_CONFIGURATION_TESTS (`#define ENABLE_PWM_CONFIG_TESTS 1`) Tests PWM period configuration: - `test_pwm_period_configuration` - High-level API (period in microseconds) - `test_pwm_period_raw` - Low-level API (mantissa, exponent, low_freq_range) #### 7. DITHER_CONFIGURATION_TESTS (`#define ENABLE_DITHER_CONFIG_TESTS 1`) Tests dither configuration: - `test_dither_configuration` - High-level API (amplitude in mA, frequency in Hz) - `test_dither_raw` - Low-level API (step_size, num_steps, flat_steps) #### 8. DIAGNOSTICS_TESTS (`#define ENABLE_DIAGNOSTICS_TESTS 1`) Tests diagnostics and monitoring: - `test_device_status` - Global device status reading - `test_channel_diagnostics` - Channel-specific diagnostics - `test_voltage_reading` - VBAT and VIO voltage reading - `test_current_reading` - Average current and duty cycle reading - `test_all_channels_telemetry` - Telemetry for all 6 channels - `test_device_telemetry` - Device telemetry - `test_telemetry_with_active_channel` - Telemetry with active channel #### 9. FAULT_MANAGEMENT_TESTS (`#define ENABLE_FAULT_MANAGEMENT_TESTS 1`) Tests fault handling: - `test_fault_clearing` - Fault flag clearing - `test_software_reset` - Software reset functionality #### 10. WATCHDOG_TESTS (`#define ENABLE_WATCHDOG_TESTS 1`) Tests watchdog functionality: - `test_spi_watchdog` - SPI watchdog reload with various values #### 11. GPIO_CONTROL_TESTS (`#define ENABLE_GPIO_CONTROL_TESTS 1`) Tests GPIO pin control: - `test_gpio_control` - Reset, Enable, and Fault pin control #### 12. MULTI_CHANNEL_TESTS (`#define ENABLE_MULTI_CHANNEL_TESTS 1`) Tests all channels individually: - `test_all_channels_individually` - All 6 channels tested with enable/disable and current control #### 13. PARALLEL_OPERATION_TESTS (`#define ENABLE_PARALLEL_OPERATION_TESTS 1`) Tests parallel channel operation: - `test_parallel_operation` - Parallel pair configuration (CH0/CH3, CH1/CH2, CH4/CH5) #### 14. ERROR_CONDITION_TESTS (`#define ENABLE_ERROR_CONDITION_TESTS 1`) Tests error handling and validation: - `test_error_conditions` - Wrong mode operations (should fail correctly) ### Test Function Signatures All test functions follow this pattern: ```cpp static bool test_function_name() noexcept; ``` **Key Characteristics**: - Return `bool` (true = passed, false = failed) - Declared `noexcept` for embedded safety - Self-contained and isolated - Descriptive ESP_LOG output - Proper error handling with `std::expected` --- ## Hardware Setup ### Required Components - **ESP32-C6-DevKitC-1** development board - **TLE92466ED** evaluation board or custom PCB - **5.5-41V power supply** for VBAT (2A minimum) - *Note: VBAT not required for SPI communication, but recommended for complete testing. Typical: 12V or 24V automotive* - **3.0-5.5V power supply** for VIO (I/O level supply) - *Required for SPI communication (sets I/O voltage levels). Typical: 3.3V or 5.0V* - **5V power supply** for VDD (internal logic supply) - *Required for IC operation* - **Oscilloscope/Logic Analyzer** (optional, for GPIO14 monitoring) - Connecting wires ### Wiring Diagram ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ ESP32-C6 â”‚ â”‚ TLE92466ED â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ GPIO2 â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ MISO â”‚ â”‚ GPIO7 â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ MOSI â”‚ â”‚ GPIO6 â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ SCLK â”‚ â”‚ GPIO18 â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ CS â”‚ â”‚ GPIO21 â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ RESN â”‚ â”‚ GPIO20 â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ EN â”‚ â”‚ GPIO19 â”‚ [LED/Scope] â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ 5V â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ VDD â”‚ â”‚ 3.3V â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ VIO â”‚ â”‚ GND â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ GND â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ External Supply Test Load â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 12-24V â”€â”€â”€â”€â”€â”€> VBAT OUT0 â”€â”€> Load GND â”€â”€â”€â”€â”€â”€> GND GND â”€â”€> Return ``` ### Complete Pin Configuration | Function | ESP32-C6 GPIO | TLE92466ED Pin | Configuration | Notes |----------|---------------|----------------|---------------|-------| **SPI MISO** | GPIO2 | MISO | Input | Data from TLE92466ED | **SPI MOSI** | GPIO7 | MOSI | Output | Data to TLE92466ED | **SPI SCLK** | GPIO6 | SCLK | Output | 1MHz SPI Clock | **SPI CS** | GPIO18 | CS | Output | Active Low | **RESN** | GPIO21 | RESN | Output | Reset pin (active low) | **EN** | GPIO20 | EN | Output | Enable pin (active high) | **FAULTN** | GPIO19 | FAULTN | Input | Fault pin (active low) | **Test Indicator** | GPIO14 | - | Output | Progress indicator | **VDD Supply** | 5V | VDD | Power | 5V (Required for IC operation) | **VIO Supply** | 3.3V/5V | VIO | Power | 3.0-5.5V (Required for SPI) | **Load Supply** | External | VBAT | Power | 5.5-41V, 2A+ (Optional for SPI) | **Ground** | GND | GND | Ground | Common reference | ### GPIO14 Test Indicator Setup ``` ESP32-C6 GPIO14 â”€â”€â”¬â”€â”€ LED (Anode) â”‚ â””â”€â”€ LED (Cathode) â”€â”€ 220Î© â”€â”€ GND â”‚ â””â”€â”€ Oscilloscope/Logic Analyzer Probe ``` **Purpose**: Visual and measurable feedback showing test progression ### Power Supply Requirements ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Power Supply Requirements â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ VDD (Internal Logic Supply): â”‚ â”‚ â””â”€ 5V input to TLE92466ED â”‚ â”‚ â””â”€ Powers central logic of the IC â”‚ â”‚ â””â”€ Required for IC operation â”‚ â”‚ â”‚ â”‚ VIO (I/O Level Supply): â”‚ â”‚ â””â”€ 3.0V to 5.5V (input) â”‚ â”‚ â””â”€ Sets I/O voltage levels for SPI â”‚ â”‚ â””â”€ Required for SPI communication â”‚ â”‚ â””â”€ Typical: 3.3V or 5.0V â”‚ â”‚ â””â”€ Typical current: 10-20mA â”‚ â”‚ â”‚ â”‚ VBAT (Load Supply): â”‚ â”‚ â””â”€ 5.5V to 41V (recommended operating) â”‚ â”‚ â””â”€ Typical: 12V or 24V automotive â”‚ â”‚ â””â”€ NOT required for SPI communication â”‚ â”‚ â””â”€ Required for actual load operation â”‚ â”‚ â””â”€ Typical: 2A+ per channel â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` **Important**: For this driver integration test, **VBAT is not required**. The test validates SPI communication and driver logic only. **VDD is required** (powers central logic). **VIO is required for SPI communication** (sets I/O voltage levels). --- ## Configuration ### Hardware Configuration (`main/TLE92466ED_TestConfig.hpp`) All hardware-specific settings are centralized: ```cpp namespace TLE92466ED_TestConfig { struct SPIPins { static constexpr uint8_t MISO = 2; // GPIO2 static constexpr uint8_t MOSI = 7; // GPIO7 static constexpr uint8_t SCLK = 6; // GPIO6 static constexpr uint8_t CS = 18; // GPIO18 }; struct ControlPins { static constexpr uint8_t RESN = 21; // GPIO21 static constexpr uint8_t EN = 20; // GPIO20 static constexpr uint8_t FAULTN = 19; // GPIO19 static constexpr uint8_t DRV0 = 22; // GPIO22 static constexpr uint8_t DRV1 = 23; // GPIO23 }; struct SPIParams { static constexpr uint32_t FREQUENCY = 1000000; // 1MHz static constexpr uint8_t MODE = 1; // SPI Mode 1 (CPOL=0, CPHA=1) static constexpr uint8_t QUEUE_SIZE = 1; static constexpr uint8_t CS_ENA_PRETRANS = 1; static constexpr uint8_t CS_ENA_POSTTRANS = 1; }; } // namespace TLE92466ED_TestConfig ``` **To modify hardware settings**: Edit `main/TLE92466ED_TestConfig.hpp` ### Test Configuration (`main/DriverIntegrationTest.cpp`) Enable/disable test sections at compile time: ```cpp // Enable/disable test sections (set to 0 to skip a section) #define ENABLE_INITIALIZATION_TESTS 1 #define ENABLE_MODE_CONTROL_TESTS 1 #define ENABLE_GLOBAL_CONFIG_TESTS 1 #define ENABLE_CHANNEL_CONTROL_TESTS 1 #define ENABLE_CURRENT_CONTROL_TESTS 1 #define ENABLE_PWM_CONFIG_TESTS 1 #define ENABLE_DITHER_CONFIG_TESTS 1 #define ENABLE_DIAGNOSTICS_TESTS 1 #define ENABLE_FAULT_MANAGEMENT_TESTS 1 #define ENABLE_WATCHDOG_TESTS 1 #define ENABLE_GPIO_CONTROL_TESTS 1 #define ENABLE_MULTI_CHANNEL_TESTS 1 #define ENABLE_PARALLEL_OPERATION_TESTS 1 #define ENABLE_ERROR_CONDITION_TESTS 1 ``` **To disable a section**: Set to `0` and rebuild. This allows you to run only specific test categories during development or debugging. ### Build Configuration (`app_config.yml`) Application metadata and build settings: ```yaml apps: driver_integration_test: description: \"Comprehensive driver integration test suite (no hardware required)\" source_file: \"DriverIntegrationTest.cpp\" category: \"test\" idf_versions: [\"release/v5.5\"] build_types: [\"Debug\", \"Release\"] ci_enabled: true featured: true ``` **Note**: This is for build metadata only. Hardware config is in `TLE92466ED_TestConfig.hpp`. --- ## Building and Running ### Quick Start ```bash cd examples/esp32 # Build the driver integration test ./scripts/build_app.sh driver_integration_test Debug # Flash to ESP32-C6 ./scripts/flash_app.sh driver_integration_test Debug # Monitor output ./scripts/monitor_app.sh driver_integration_test ``` ### Manual Build ```bash cd examples/esp32 # Set target idf.py set-target esp32c6 # Configure (optional) idf.py menuconfig # Build with APP_TYPE=driver_integration_test idf.py -DAPP_TYPE=driver_integration_test build # Flash idf.py -p /dev/ttyUSB0 flash # Monitor idf.py -p /dev/ttyUSB0 monitor ``` ### Build Targets ```bash # Debug build (optimized for debugging) idf.py -DAPP_TYPE=driver_integration_test -DCMAKE_BUILD_TYPE=Debug build # Release build (optimized for performance) idf.py -DAPP_TYPE=driver_integration_test -DCMAKE_BUILD_TYPE=Release build ``` --- ## Expected Output ### Test Header ``` â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ TLE92466ED DRIVER INTEGRATION TEST SUITE - ESP32-C6 â•‘ â•‘ HardFOC Core Drivers â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Target: esp32c6 ESP-IDF Version: v5.5.1 â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ TLE92466ED TEST CONFIGURATION â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â•‘ Test sections will execute based on compile-time configuration â•‘ â•‘ GPIO14 test progression indicator: ENABLED â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ``` ### Test Execution ``` â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ SECTION: INITIALIZATION TESTS â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [GPIO14: Blink pattern - 5 blinks] â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ Running (task): hal_initialization â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• I (1234) TLE92466ED_Test: Creating HAL instance... I (1235) Esp32TleComm: Esp32TleCommInterface created with SPI config I (1236) Esp32TleComm: MISO: GPIO2, MOSI: GPIO7, SCLK: GPIO6, CS: GPIO18 I (1237) Esp32TleComm: Frequency: 1000000 Hz, Mode: 1 I (1238) TLE92466ED_Test: Initializing HAL... I (1240) Esp32TleComm: Esp32TleCommInterface initialized successfully I (1241) TLE92466ED_Test: âœ… HAL initialized successfully [SUCCESS] PASSED (task): hal_initialization (12.34 ms) Test task completed: hal_initialization [GPIO14: Toggle HIGH] ``` ### Test Results Summary ``` â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ TEST RESULTS SUMMARY â•‘ â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â•‘ Total Tests: 40+ â•‘ â•‘ Passed: 40+ â•‘ â•‘ Failed: 0 â•‘ â•‘ Success Rate: 100.00% â•‘ â•‘ Total Time: ~10-15 seconds â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• I (15000) TLE92466ED_Test: âœ… ALL TESTS PASSED! System will restart in 10 seconds... ``` ### GPIO14 Signal Pattern ``` Time â”‚ GPIO14 â”‚ Event â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 0ms â”‚ LOW â”‚ Boot 100ms â”‚ BLINK â”‚ Section start (5 blinks) â”‚ â†‘â†“ â”‚ 200ms â”‚ HIGH â”‚ Test 1 complete 300ms â”‚ LOW â”‚ Test 2 complete 400ms â”‚ HIGH â”‚ Test 3 complete 500ms â”‚ BLINK â”‚ Section 2 start (5 blinks) 600ms â”‚ LOW â”‚ Test 4 complete ... ``` --- ## Test Coverage ### Complete API Coverage This test suite covers all TLE92466ED driver functionality: #### Initialization & Device Information - HAL initialization - Driver initialization - Chip ID reading - IC version reading - Device verification #### Mode Management - Mission Mode entry/exit - Config Mode entry/exit - Mode transition validation #### Global Configuration - CRC enable/disable - VBAT threshold configuration (high-level and raw) - Complete global configuration #### Channel Control - Single channel enable/disable - All channels control - Channel mask control - Channel mode configuration (all modes) #### Current Control - Current setpoint setting (with read-back) - Current ramping (smooth transitions) #### PWM Configuration - High-level API (period in microseconds) - Low-level API (mantissa, exponent, low_freq_range) #### Dither Configuration - High-level API (amplitude in mA, frequency in Hz) - Low-level API (step_size, num_steps, flat_steps) #### Diagnostics & Monitoring - Device status reading - Channel diagnostics - Voltage reading (VBAT, VIO) - Current and duty cycle reading - **Telemetry for all channels** - **Device-level telemetry** - **Telemetry with active channels** #### Fault Management - Fault clearing - Software reset #### Watchdog - SPI watchdog reload #### GPIO Control - Reset pin control - Enable pin control - Fault pin reading #### Multi-Channel Operations - All 6 channels individually tested #### Parallel Operation - Parallel pair configuration #### Error Handling - Wrong mode operation validation - Error condition testing --- ## Individual Test Details ### Initialization Tests #### `test_hal_initialization()` **Purpose**: Validate ESP32-C6 HAL creation and SPI initialization **Operations**: 1. Create Esp32TleCommInterface instance with configuration from `TLE92466ED_TestConfig.hpp` 2. Initialize SPI peripheral (SPI2_HOST) 3. Configure GPIO pins for SPI 4. Set up SPI parameters (1MHz, Mode 1) **Expected Result**: âœ… PASS - HAL instance created successfully - SPI bus initialized - GPIO pins configured - Ready for communication **Failure Modes**: - SPI bus already initialized - GPIO pins in use - Invalid SPI configuration - Hardware fault --- #### `test_driver_initialization()` **Purpose**: Create TLE92466ED driver instance and initialize IC **Operations**: 1. Create TLE92466ED driver instance with HAL reference 2. Execute driver initialization sequence 3. Configure TLE92466ED registers 4. Set up default parameters **Expected Result**: âœ… PASS - Driver instance created - IC initialized successfully - Registers configured - Ready for operations **Failure Modes**: - HAL not initialized - SPI communication failure - TLE92466ED not powered (VIO required for SPI) - IC initialization timeout --- ### Telemetry Tests #### `test_all_channels_telemetry()` **Purpose**: Test telemetry reading for all 6 channels **Operations**: 1. Iterate through all channels (CH0-CH5) 2. For each channel, test: - `GetCurrentSetpoint()` - Read current setpoint - `GetAverageCurrent()` - Read average current - `GetDutyCycle()` - Read PWM duty cycle - `GetChannelDiagnostics()` - Read complete diagnostics 3. Report faults and warnings **Expected Result**: âœ… PASS - All telemetry functions work for all channels - Values read successfully (may be 0 if channels not enabled) **Telemetry Data Read**: - Current setpoint (mA) - Average current (mA) - Duty cycle (raw 16-bit value) - Diagnostics (faults, warnings, min/max current) --- #### `test_device_telemetry()` **Purpose**: Test device-level telemetry reading **Operations**: 1. Read device status (`GetDeviceStatus()`) 2. Read VBAT voltage (`GetVbatVoltage()`) 3. Read VIO voltage (`GetVioVoltage()`) 4. Read fault pin status (`IsFault()`) **Expected Result**: âœ… PASS - All device telemetry functions work - Status information displayed - Voltage readings obtained **Telemetry Data Read**: - Device mode (Config/Mission) - Initialization status - Fault conditions - Supply voltages (VBAT, VIO) - Fault pin state --- #### `test_telemetry_with_active_channel()` **Purpose**: Test telemetry with an active channel (enabled with current set) **Operations**: 1. Enter Mission Mode 2. Enable outputs (EN pin) 3. Set current setpoint to 500mA 4. Enable channel 5. Wait for current to stabilize (500ms) 6. Read all telemetry: - Current setpoint - Average current - Duty cycle - Complete diagnostics 7. Verify values are reasonable 8. Disable channel **Expected Result**: âœ… PASS - All telemetry functions work with active channel - Current setpoint matches set value - Average current is measured - Duty cycle is non-zero - Diagnostics show channel is active **Telemetry Validation**: - Setpoint matches configured value - Average current is within reasonable range - Duty cycle reflects current regulation - No unexpected faults --- ### Mode Control Tests #### `test_mode_transitions()` **Purpose**: Validate mode transitions work correctly **Operations**: 1. Perform 3 cycles of Config â†’ Mission â†’ Config transitions 2. Verify mode state after each transition 3. Ensure no errors occur **Expected Result**: âœ… PASS - All mode transitions succeed - Mode state is correct after each transition - No communication errors --- ### Error Condition Tests #### `test_error_conditions()` **Purpose**: Verify proper error handling **Operations**: 1. Try to enable channel in Config Mode (should fail) 2. Try to configure channel mode in Mission Mode (should fail) 3. Try to configure global settings in Mission Mode (should fail) 4. Verify all operations correctly return errors **Expected Result**: âœ… PASS - All invalid operations correctly rejected - Appropriate error codes returned - No crashes or undefined behavior --- ## Troubleshooting ### Common Issues #### 1. All Tests Fail âŒ **Symptom**: Every test returns FAILED **Root Causes**: - TLE92466ED not powered (check VIO: 3.0-5.5V, typical 3.3V or 5.0V) - SPI wiring incorrect - Common ground missing - ESP32-C6 not programmed correctly **Solutions**: ```bash # Check wiring - VIO: 3.0-5.5V present (REQUIRED for SPI, typical 3.3V or 5.0V) - GND: Common ground between ESP32-C6, TLE92466ED - SPI pins: MISO, MOSI, SCLK, CS connected correctly - RESN: Must be HIGH (not in reset) # Re-flash idf.py -p /dev/ttyUSB0 erase-flash idf.py -p /dev/ttyUSB0 flash ``` --- #### 2. HAL Initialization Fails âŒ **Symptom**: `test_hal_initialization` fails **Root Causes**: - SPI2 bus already in use - GPIO pins conflicting - Invalid SPI configuration **Solutions**: 1. Check `sdkconfig` for SPI conflicts 2. Verify GPIO pins are not used elsewhere 3. Try different GPIO pins (modify `TLE92466ED_TestConfig.hpp`) 4. Check ESP32-C6 hardware --- #### 3. Driver Initialization Fails âŒ **Symptom**: `test_driver_initialization` fails **Root Causes**: - SPI communication not working - TLE92466ED not responding - Power supply issue (VIO required for SPI) **Solutions**: 1. Verify SPI with logic analyzer/oscilloscope 2. Check VIO voltage (must be 3.0V to 5.5V, typical 3.3V or 5.0V) 3. Check VBAT voltage if testing with loads (5.5V to 41V, typical 12V or 24V) 4. Verify RESN pin is HIGH (not in reset) 5. Verify TLE92466ED is not damaged 6. Check VDD voltage (must be 5V) - powers central logic of the IC 7. Check VIO voltage (must be 3.0V to 5.5V, typical 3.3V or 5.0V) - sets SPI I/O levels --- #### 4. Telemetry Tests Fail âš ï¸ **Symptom**: Telemetry reading functions fail **Root Causes**: - Channels not enabled (expected for some tests) - Device not in correct mode - Register read errors **Solutions**: 1. Check if test expects channels to be enabled 2. Verify device is in correct mode (Config vs Mission) 3. Check SPI communication is working 4. Some telemetry failures are expected if channels are disabled --- ## Performance Characteristics ### Typical Execution Times | Test Section | Expected Time | Max Time |--------------|--------------|----------| Initialization Tests | 50-100 ms | 200 ms | Mode Control Tests | 30-50 ms | 100 ms | Global Configuration Tests | 200-300 ms | 500 ms | Channel Control Tests | 500-800 ms | 1500 ms | Current Control Tests | 2000-3000 ms | 5000 ms | PWM Configuration Tests | 300-500 ms | 1000 ms | Dither Configuration Tests | 300-500 ms | 1000 ms | Diagnostics Tests | 1000-1500 ms | 3000 ms | Fault Management Tests | 100-200 ms | 400 ms | Watchdog Tests | 200-300 ms | 500 ms | GPIO Control Tests | 200-300 ms | 500 ms | Multi-Channel Tests | 2000-3000 ms | 5000 ms | Parallel Operation Tests | 300-500 ms | 1000 ms | Error Condition Tests | 100-200 ms | 400 ms | **Total Suite** | **~10-15 seconds** | **~30 seconds** | ### Memory Usage | Resource | Usage | Notes |----------|-------|-------| **Flash** | ~350KB | Driver + HAL + test framework | **RAM (static)** | ~15KB | Driver instance + buffers | **Stack (per task)** | 8KB | Configurable in `RUN_TEST_IN_TASK` | **Heap (dynamic)** | ~5KB | HAL instance + std::unique_ptr | ### SPI Performance - **Clock Frequency**: 1MHz (datasheet range: 0.1MHz - 10MHz) - **Transaction Time**: ~32Î¼s per 32-bit frame - **Register Read**: ~100Î¼s (including overhead) - **Register Write**: ~80Î¼s (including overhead) --- ## Related Documentation ### ESP32 Examples - [Solenoid Control Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html) - Real hardware solenoid testing - [Test Framework Reference](../main/TLE92466ED_TestFramework.hpp) - Framework API - [Hardware Configuration](/hf-tle92466ed-driver/development/examples/esp32/main/TLE92466ED_TestConfig.hpp) - Pin and parameter config - [ESP32-C6 CommInterface](/hf-tle92466ed-driver/development/examples/esp32/main/Esp32TleCommInterface.hpp) - CommInterface implementation details ### Driver Documentation - [Driver API Reference](/hf-tle92466ed-driver/development/docs/07_Driver_API/) - Complete API documentation - [CommInterface Implementation Guide](/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/) - Porting to new platforms - [Register Map](/hf-tle92466ed-driver/development/docs/03_Register_Map/) - TLE92466ED register details - [Diagnostics](/hf-tle92466ed-driver/development/docs/06_Diagnostics/) - Fault detection and handling ### Build System - [App Configuration](/hf-tle92466ed-driver/development/examples/esp32/app_config.yml) - Build metadata - [CMake Setup](/hf-tle92466ed-driver/development/examples/esp32/CMakeLists.txt) - Build system configuration - [Component Structure](../components/hf_tle92466ed/) - ESP-IDF component --- ## Notes - This test suite is designed to validate driver functionality without requiring actual solenoids - All tests are independent and can be enabled/disabled individually - The suite validates both high-level and low-level APIs - Error conditions are tested to ensure proper validation - The suite covers all driver functionality - Test execution time depends on enabled sections (typically 10-15 seconds for full suite) - **VBAT is not required** for this test - only VDD and VIO are needed for SPI communication --- **Example**: Driver Integration Test Suite **Platform**: ESP32-C6 **Framework**: FreeRTOS + Test Framework **Test Sections**: 13 **Total Tests**: 40+ **Status**: âœ… Production Ready **Hardware Required**: TLE92466ED IC (no solenoids needed) ",
    "url": "/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html",
    
    "relUrl": "/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html"
  },"279": {
    "doc": "Solenoid Control Test - TLE92466ED ESP32-C6",
    "title": "Solenoid Control Test - TLE92466ED ESP32-C6",
    "content": "# Solenoid Control Test - TLE92466ED ESP32-C6 ## Table of Contents 1. [Overview](#overview) 2. [Purpose](#purpose) 3. [Hardware Requirements](#hardware-requirements) 4. [System Architecture](#system-architecture) 5. [Hardware Setup](#hardware-setup) 6. [Configuration](#configuration) 7. [Building and Running](#building-and-running) 8. [Operation](#operation) 9. [Real-Time Telemetry](#real-time-telemetry) 10. [Control Algorithm](#control-algorithm) 11. [Troubleshooting](#troubleshooting) 12. [Performance Characteristics](#performance-characteristics) 13. [Safety Considerations](#safety-considerations) 14. [Related Documentation](#related-documentation) --- ## Overview The **Solenoid Control Test** is a real hardware test application that demonstrates actual solenoid control using the TLE92466ED driver. This test uses **ADC-based current control** where an analog voltage input (0-3.3V) controls the current setpoint for two solenoids, with real-time telemetry monitoring. ### Key Features - **Real Hardware Testing**: Tests actual solenoids, not just driver logic - **ADC-Based Control**: Analog voltage input (0-3.3V) maps to current percentage (0-100%) - **Dual Solenoid Setup**: One single channel, one parallel pair - **Independent Current Ranges**: Each solenoid has different min/max but same percentage mapping - **Real-Time Telemetry**: Monitoring every 1 second - **Continuous Operation**: Runs indefinitely until reset ### Test Configuration ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Solenoid Configuration â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ Solenoid 1 (Single Channel): â”‚ â”‚ â””â”€ Channel: CH0 â”‚ â”‚ â””â”€ Mode: Single Channel (ICC) â”‚ â”‚ â””â”€ Current Range: 200-1500 mA â”‚ â”‚ â””â”€ Percentage Mapping: 0-100% â†’ 200-1500 mA â”‚ â”‚ â”‚ â”‚ Solenoid 2 (Parallel Pair): â”‚ â”‚ â””â”€ Channels: CH1/CH2 (Parallel) â”‚ â”‚ â””â”€ Mode: Parallel Pair (ICC) â”‚ â”‚ â””â”€ Current Range: 400-3000 mA â”‚ â”‚ â””â”€ Percentage Mapping: 0-100% â†’ 400-3000 mA â”‚ â”‚ â”‚ â”‚ Control Input: â”‚ â”‚ â””â”€ ADC Pin: GPIO0 (ADC1_CH0) â”‚ â”‚ â””â”€ Voltage Range: 0-3.3V â”‚ â”‚ â””â”€ Maps to: 0-100% current for both solenoids â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` --- ## Purpose This test serves multiple purposes: 1. **Real Hardware Validation**: Tests actual solenoid operation with real loads 2. **Parallel Operation Verification**: Validates parallel channel pairing works correctly 3. **Current Control Accuracy**: Tests current regulation with real solenoids 4. **Telemetry Validation**: Demonstrates real-time monitoring capabilities 5. **System Integration**: Tests complete system from ADC input to solenoid output 6. **Performance Evaluation**: Measures actual current regulation accuracy **Note**: This test requires actual solenoids and proper power supplies. For driver-only testing without hardware, use the **Driver Integration Test**. --- ## Hardware Requirements ### Required Components - **ESP32-C6-DevKitC-1** development board - **TLE92466ED** evaluation board or custom PCB - **Two Solenoids** with appropriate current ratings: - Solenoid 1: 200-1500mA range - Solenoid 2: 400-3000mA range (parallel pair) - **5.5-41V Power Supply** for VBAT (5A+ recommended for parallel operation, typical: 12V or 24V automotive) - **3.0-5.5V Power Supply** for VIO (I/O level supply for SPI, typical: 3.3V or 5.0V) - **5V Power Supply** for VDD (internal logic supply) - *Required for IC operation* - **ADC Control Source**: Potentiometer, DAC, or voltage source (0-3.3V) - **Current Sense Resistors** (if using external current monitoring) - **Oscilloscope/Logic Analyzer** (optional, for signal analysis) - Connecting wires and appropriate connectors ### Power Supply Requirements ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Power Supply Specifications â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ VDD (Internal Logic Supply): â”‚ â”‚ â””â”€ Voltage: 5V input to TLE92466ED â”‚ â”‚ â””â”€ Purpose: Powers central logic of the IC â”‚ â”‚ â””â”€ Required: YES (for IC operation) â”‚ â”‚ â”‚ â”‚ VIO (I/O Level Supply): â”‚ â”‚ â””â”€ Voltage: 3.0V to 5.5V (input) â”‚ â”‚ â””â”€ Purpose: Sets I/O voltage levels for SPI â”‚ â”‚ â””â”€ Typical: 3.3V or 5.0V â”‚ â”‚ â””â”€ Current: 10-20mA â”‚ â”‚ â””â”€ Required: YES (for SPI communication) â”‚ â”‚ â”‚ â”‚ VBAT (Load Supply): â”‚ â”‚ â””â”€ Voltage: 5.5V to 41V (recommended operating) â”‚ â”‚ â””â”€ Typical: 12V or 24V automotive â”‚ â”‚ â””â”€ Current: 5A+ (for parallel operation) â”‚ â”‚ â””â”€ Required: YES (for solenoid operation) â”‚ â”‚ â””â”€ Note: Must be capable of supplying peak currents â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` ### Solenoid Specifications **Solenoid 1 (Single Channel)**: - Recommended current range: 200-1500mA - Typical resistance: 6-120Î© - Power rating: 2.4-18W at 12V - Must be rated for continuous operation **Solenoid 2 (Parallel Pair)**: - Recommended current range: 400-3000mA - Typical resistance: 3-60Î© (combined) - Power rating: 4.8-36W at 12V - Must be rated for continuous operation - Requires proper current sharing between CH1 and CH2 --- ## System Architecture ### Block Diagram ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ System Architecture â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Control â”‚ â”‚ ESP32-C6 â”‚ â”‚ â”‚ â”‚ Source â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ Pot/DAC â”‚â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ â”‚ ADC (GPIO0) â”‚ â”‚ â”‚ â”‚ â”‚ 0-3.3V â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â–¼ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ Control â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Logic â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â–¼ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ TLE92466ED â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Driver â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ TLE92466ED â”‚ â”‚ TLE92466ED â”‚ â”‚ â”‚ â”‚ IC â”‚ â”‚ IC â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ Solenoid 1 â”‚ â”‚ Solenoid 2 â”‚ â”‚ â”‚ â”‚ (CH0) â”‚ â”‚ (CH1/CH2) â”‚ â”‚ â”‚ â”‚ 200-1500mA â”‚ â”‚ 400-3000mA â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` ### Control Flow ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Control Flow Diagram â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ 1. ADC Reading (100ms) â”‚ â”‚ â””â”€> Read GPIO0 voltage (0-3.3V) â”‚ â”‚ â””â”€> Convert to percentage (0-100%) â”‚ â”‚ â”‚ â”‚ 2. Current Calculation â”‚ â”‚ â””â”€> Solenoid 1: percentage â†’ 200-1500mA â”‚ â”‚ â””â”€> Solenoid 2: percentage â†’ 400-3000mA â”‚ â”‚ â”‚ â”‚ 3. Current Update â”‚ â”‚ â””â”€> SetCurrentSetpoint(Solenoid 1) â”‚ â”‚ â””â”€> SetCurrentSetpoint(Solenoid 2) â”‚ â”‚ â”‚ â”‚ 4. Telemetry Collection (1 second) â”‚ â”‚ â””â”€> Read device status â”‚ â”‚ â””â”€> Read channel diagnostics â”‚ â”‚ â””â”€> Read voltages (VBAT, VIO) â”‚ â”‚ â””â”€> Read currents (setpoint, actual) â”‚ â”‚ â””â”€> Read duty cycles â”‚ â”‚ â””â”€> Check faults and warnings â”‚ â”‚ â”‚ â”‚ 5. Display Telemetry â”‚ â”‚ â””â”€> Format and print status â”‚ â”‚ â”‚ â”‚ Loop: Steps 1-5 repeat continuously â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` --- ## Hardware Setup ### Complete Wiring Diagram ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Complete Wiring â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ ESP32-C6 TLE92466ED â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”‚ â”‚ GPIO2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> MISO â”‚ â”‚ GPIO7 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> MOSI â”‚ â”‚ GPIO6 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> SCLK â”‚ â”‚ GPIO18 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> CS â”‚ â”‚ GPIO21 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> RESN â”‚ â”‚ GPIO20 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> EN â”‚ â”‚ GPIO19 VDD â”‚ â”‚ 3.3V â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> VIO â”‚ â”‚ GND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> GND â”‚ â”‚ â”‚ â”‚ External Supply TLE92466ED â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”‚ â”‚ 5.5-41V (12-24V typical) â”€â”€> VBAT â”‚ â”‚ GND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> GND â”‚ â”‚ â”‚ â”‚ Solenoid 1 TLE92466ED â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”‚ â”‚ Solenoid+ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> OUT0 (CH0) â”‚ â”‚ Solenoid- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> GND (via sense) â”‚ â”‚ â”‚ â”‚ Solenoid 2 TLE92466ED â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”‚ â”‚ Solenoid+ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> OUT1 (CH1) â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€> OUT2 (CH2) â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Solenoid- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€> GND (via sense) â”‚ â”‚ â”‚ â”‚ Control Source ESP32-C6 â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”‚ â”‚ Potentiometer: â”‚ â”‚ 3.3V â”€â”€[R1]â”€â”€â”€ GPIO0 â”€â”€[R2]â”€â”€â”€ GND â”‚ â”‚ (or DAC, voltage source, etc.) â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` ### Pin Assignment Table | Function | ESP32-C6 GPIO | TLE92466ED Pin | Direction | Notes |----------|---------------|----------------|-----------|-------| **SPI MISO** | GPIO2 | MISO | Input | Data from TLE92466ED | **SPI MOSI** | GPIO7 | MOSI | Output | Data to TLE92466ED | **SPI SCLK** | GPIO6 | SCLK | Output | 1MHz SPI Clock | **SPI CS** | GPIO18 | CS | Output | Active Low | **RESN** | GPIO21 | RESN | Output | Reset pin (active low, must be HIGH) | **EN** | GPIO20 | EN | Output | Enable pin (active high) | **FAULTN** | GPIO19 | FAULTN | Input | Fault pin (active low) | **ADC Input** | GPIO0 | - | Input | Control voltage (0-3.3V) | **VDD Supply** | 5V | VDD | Power | 5V (Required) | **VIO Supply** | 3.3V/5V | VIO | Power | 3.0-5.5V (Required) | **Load Supply** | 12-24V typical | VBAT | Power | 5.5-41V, 5A+ recommended (Required) | **Ground** | GND | GND | Ground | Common reference | ### Solenoid Connections **Solenoid 1 (Single Channel - CH0)**: ``` Solenoid Terminal+ â”€â”€â”€â”€> TLE92466ED OUT0 Solenoid Terminal- â”€â”€â”€â”€> GND (via current sense resistor if used) ``` **Solenoid 2 (Parallel Pair - CH1/CH2)**: ``` Solenoid Terminal+ â”€â”€â”€â”€â”¬â”€â”€â”€> TLE92466ED OUT1 (CH1) â””â”€â”€â”€> TLE92466ED OUT2 (CH2) Solenoid Terminal- â”€â”€â”€â”€> GND (via current sense resistor if used) ``` **Important Notes**: - Both channels in parallel pair must be connected to the same solenoid - Ensure proper current sharing between CH1 and CH2 - Use appropriate wire gauge for high currents (parallel operation) - Add current sense resistors if external current monitoring is desired ### ADC Control Input Setup **Option 1: Potentiometer** ``` 3.3V â”€â”€[10kÎ© Pot]â”€â”€ GPIO0 â”‚ GND ``` **Option 2: DAC Output** ``` DAC Output (0-3.3V) â”€â”€> GPIO0 ``` **Option 3: Voltage Source** ``` Variable Voltage Source (0-3.3V) â”€â”€> GPIO0 ``` **ADC Configuration**: - Pin: GPIO0 (ADC1_CH0) - Range: 0-3.3V - Resolution: 12-bit (0-4095) - Attenuation: 12dB (full range) - Sampling: 1kHz --- ## Configuration ### Solenoid Configuration (`main/SolenoidControlTest.cpp`) ```cpp /** * @brief Solenoid 1 Configuration (Single Channel) */ struct Solenoid1Config { static constexpr Channel CHANNEL = Channel::CH0; // Single channel static constexpr uint16_t MIN_CURRENT_MA = 200; // Minimum current (mA) static constexpr uint16_t MAX_CURRENT_MA = 1500; // Maximum current (mA) static constexpr bool PARALLEL_MODE = false; // Single channel mode }; /** * @brief Solenoid 2 Configuration (Parallel Pair) */ struct Solenoid2Config { static constexpr ParallelPair PAIR = ParallelPair::CH1_CH2; // Parallel pair static constexpr Channel PRIMARY_CHANNEL = Channel::CH1; // Primary channel static constexpr uint16_t MIN_CURRENT_MA = 400; // Minimum current (mA) static constexpr uint16_t MAX_CURRENT_MA = 3000; // Maximum current (mA) static constexpr bool PARALLEL_MODE = true; // Parallel mode }; ``` **To modify solenoid configuration**: Edit these structs in `main/SolenoidControlTest.cpp` ### ADC Configuration ```cpp /** * @brief ADC Configuration */ struct ADCConfig { static constexpr adc_unit_t UNIT = ADC_UNIT_1; // ADC unit (ADC1) static constexpr adc_channel_t CHANNEL = ADC_CHANNEL_0; // ADC channel (GPIO0) static constexpr adc_atten_t ATTEN = ADC_ATTEN_DB_12; // 0-3.3V range static constexpr adc_bitwidth_t BITWIDTH = ADC_BITWIDTH_12; // 12-bit resolution static constexpr float VREF_MV = 3300.0f; // Reference voltage (3.3V) static constexpr float ADC_MAX = 4095.0f; // Maximum ADC value static constexpr int GPIO_PIN = 0; // GPIO pin number }; ``` **To change ADC pin**: Modify `CHANNEL` and `GPIO_PIN` (ensure GPIO supports ADC) ### Control Loop Timing ```cpp const TickType_t update_interval = pdMS_TO_TICKS(100); // 100ms current update const TickType_t telemetry_interval = pdMS_TO_TICKS(1000); // 1 second telemetry ``` **To modify timing**: Edit these constants in `main/SolenoidControlTest.cpp` --- ## Building and Running ### Quick Start ```bash cd examples/esp32 # Build the solenoid control test ./scripts/build_app.sh solenoid_control_test Debug # Flash to ESP32-C6 ./scripts/flash_app.sh solenoid_control_test Debug # Monitor output ./scripts/monitor_app.sh solenoid_control_test ``` ### Manual Build ```bash cd examples/esp32 # Set target idf.py set-target esp32c6 # Build with APP_TYPE=solenoid_control_test idf.py -DAPP_TYPE=solenoid_control_test build # Flash idf.py -p /dev/ttyUSB0 flash # Monitor idf.py -p /dev/ttyUSB0 monitor ``` ### Build Requirements The solenoid control test requires the `esp_adc` component, which is automatically added by CMake when `APP_TYPE=solenoid_control_test`. --- ## Operation ### Startup Sequence ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Startup Sequence â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ 1. Initialize HAL â”‚ â”‚ â””â”€> Create Esp32TleCommInterface â”‚ â”‚ â””â”€> Initialize SPI bus â”‚ â”‚ â””â”€> Configure GPIO pins â”‚ â”‚ â”‚ â”‚ 2. Initialize Driver â”‚ â”‚ â””â”€> Create TLE92466ED::Driver instance â”‚ â”‚ â””â”€> Call Init() (resets device, verifies communication) â”‚ â”‚ â”‚ â”‚ 3. Initialize ADC â”‚ â”‚ â””â”€> Configure ADC1 channel 0 (GPIO0) â”‚ â”‚ â””â”€> Set attenuation for 0-3.3V range â”‚ â”‚ â””â”€> Enable calibration (if available) â”‚ â”‚ â”‚ â”‚ 4. Configure Solenoids â”‚ â”‚ â””â”€> Enter Config Mode â”‚ â”‚ â””â”€> Set Solenoid 1 to ICC mode (CH0) â”‚ â”‚ â””â”€> Enable parallel operation for Solenoid 2 (CH1/CH2) â”‚ â”‚ â””â”€> Set Solenoid 2 to ICC mode (CH1) â”‚ â”‚ â””â”€> Enter Mission Mode â”‚ â”‚ â””â”€> Enable outputs (EN pin) â”‚ â”‚ â”‚ â”‚ 5. Enable Solenoids â”‚ â”‚ â””â”€> Enable CH0 (Solenoid 1) â”‚ â”‚ â””â”€> Enable CH1 (Solenoid 2, enables both in parallel) â”‚ â”‚ â”‚ â”‚ 6. Start Control Loop â”‚ â”‚ â””â”€> Continuous operation begins â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` ### Control Loop Operation The control loop runs continuously with the following timing: ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Control Loop Timing â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ Every 100ms: â”‚ â”‚ â””â”€> Read ADC voltage (GPIO0) â”‚ â”‚ â””â”€> Convert to percentage (0-100%) â”‚ â”‚ â””â”€> Calculate currents for both solenoids â”‚ â”‚ â””â”€> Update current setpoints â”‚ â”‚ â”‚ â”‚ Every 1 second: â”‚ â”‚ â””â”€> Collect telemetry â”‚ â”‚ â””â”€> Display formatted telemetry report â”‚ â”‚ â”‚ â”‚ Continuous: â”‚ â”‚ â””â”€> Monitor for faults â”‚ â”‚ â””â”€> Update currents based on ADC â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` ### Current Calculation The ADC reading (0-3.3V) is mapped to a percentage (0-100%), which is then used to calculate the current for each solenoid: ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Current Calculation Formula â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ Step 1: ADC to Percentage â”‚ â”‚ percentage = (ADC_voltage / 3.3V) Ã— 100% â”‚ â”‚ â”‚ â”‚ Step 2: Percentage to Current â”‚ â”‚ Solenoid 1: â”‚ â”‚ current = 200mA + (1500mA - 200mA) Ã— (percentage/100) â”‚ â”‚ Range: 200-1500mA â”‚ â”‚ â”‚ â”‚ Solenoid 2: â”‚ â”‚ current = 400mA + (3000mA - 400mA) Ã— (percentage/100) â”‚ â”‚ Range: 400-3000mA â”‚ â”‚ â”‚ â”‚ Example: â”‚ â”‚ ADC = 1.65V (50%) â”‚ â”‚ Solenoid 1: 200 + (1500-200)Ã—0.5 = 850mA â”‚ â”‚ Solenoid 2: 400 + (3000-400)Ã—0.5 = 1700mA â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` --- ## Real-Time Telemetry ### Telemetry Display Format Every 1 second, the system displays telemetry: ``` â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ REAL-TIME TELEMETRY â•‘ â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ ADC Input: 1650.0 mV (50.0%) Target Currents: Solenoid 1=850 mA, Solenoid 2=1700 mA Device Status: Mode: Mission | Init: Done | Fault Pin: OK VBAT: 12000 mV | VIO: 3300 mV Solenoid 1 (CH0): Setpoint: 850 mA | Actual: 845 mA | Duty: 16384 (0x4000) Current Error: -5 mA (-0.6%) âœ… Status: Normal Solenoid 2 (CH1): Setpoint: 1700 mA | Actual: 1695 mA | Duty: 32768 (0x8000) Current Error: -5 mA (-0.3%) âœ… Status: Normal â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ``` ### Telemetry Data Explained #### Device-Level Telemetry - **Mode**: Current device mode (Config or Mission) - **Init**: Initialization status (Done or Pending) - **Fault Pin**: Hardware fault pin state (OK or FAULT) - **VBAT**: VBAT supply voltage in millivolts - **VIO**: VIO supply voltage in millivolts - **Device Faults**: Any global fault conditions (UV/OV, temperature, clock, etc.) #### Per-Solenoid Telemetry - **Setpoint**: Target current in milliamperes - **Actual**: Measured average current in milliamperes - **Duty**: PWM duty cycle (raw 16-bit value and hex) - **Current Error**: Difference between setpoint and actual (mA and percentage) - **Faults**: Channel-specific fault conditions - **Warnings**: Channel-specific warning conditions - **Status**: Overall channel status (Normal or with faults/warnings) ### Telemetry Interpretation #### Normal Operation ``` âœ… Status: Normal ``` - No faults or warnings detected - Current regulation working correctly - All systems operational #### Current Error Analysis ``` Current Error: -5 mA (-0.6%) ``` - **Negative error**: Actual current is less than setpoint - **Positive error**: Actual current is greater than setpoint - **Small errors (10%)**: May indicate load mismatch or regulation issues #### Fault Conditions ``` âš ï¸ Faults: - Over-current - Short to Ground - Open Load ``` - **Over-current**: Load drawing more than expected - **Short to Ground**: Load or wiring shorted - **Open Load**: No load connected or connection issue - **Over-temperature**: IC or load overheating #### Warning Conditions ``` âš ï¸ Warnings: - Current Regulation Warning - PWM Regulation Warning ``` - **Current Regulation Warning**: Current regulation may be at limits - **PWM Regulation Warning**: PWM may be saturated - **OT Warning**: Approaching temperature limits --- ## Control Algorithm ### Current Control Flow ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Current Control Algorithm â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ 1. ADC Reading â”‚ â”‚ Input: GPIO0 voltage (0-3.3V) â”‚ â”‚ Process: 12-bit ADC conversion â”‚ â”‚ Output: Raw ADC value (0-4095) â”‚ â”‚ â”‚ â”‚ 2. Voltage Calculation â”‚ â”‚ Input: Raw ADC value â”‚ â”‚ Process: Convert to voltage (with calibration) â”‚ â”‚ Output: Voltage in millivolts (0-3300mV) â”‚ â”‚ â”‚ â”‚ 3. Percentage Calculation â”‚ â”‚ Input: Voltage (mV) â”‚ â”‚ Process: percentage = (voltage / 3300) Ã— 100 â”‚ â”‚ Output: Percentage (0.0-100.0%) â”‚ â”‚ â”‚ â”‚ 4. Current Calculation (Per Solenoid) â”‚ â”‚ Input: Percentage â”‚ â”‚ Process: â”‚ â”‚ current = min + (max - min) Ã— (percentage / 100) â”‚ â”‚ Output: Current in milliamperes â”‚ â”‚ â”‚ â”‚ 5. Current Update â”‚ â”‚ Input: Calculated current â”‚ â”‚ Process: SetCurrentSetpoint(channel, current) â”‚ â”‚ Output: Current setpoint updated in TLE92466ED â”‚ â”‚ â”‚ â”‚ 6. Current Regulation (TLE92466ED) â”‚ â”‚ Input: Current setpoint â”‚ â”‚ Process: ICC (Integrated Current Control) â”‚ â”‚ Output: Regulated current to solenoid â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` ### Parallel Operation For Solenoid 2 (parallel pair), the current is set on the primary channel (CH1), and the TLE92466ED automatically shares the current between CH1 and CH2: ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Parallel Channel Current Sharing â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ Setpoint: 1700mA (on CH1) â”‚ â”‚ â”‚ â”‚ TLE92466ED automatically: â”‚ â”‚ â””â”€> Shares current between CH1 and CH2 â”‚ â”‚ â””â”€> Each channel: ~850mA â”‚ â”‚ â””â”€> Total: ~1700mA to solenoid â”‚ â”‚ â”‚ â”‚ Current Sharing: â”‚ â”‚ â””â”€> Automatic balancing by TLE92466ED â”‚ â”‚ â””â”€> No manual current splitting required â”‚ â”‚ â””â”€> Both channels must be enabled â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` --- ## Troubleshooting ### Common Issues #### 1. Solenoids Not Responding âŒ **Symptom**: No current flow, solenoids not activating **Root Causes**: - VBAT not connected or insufficient voltage - EN pin not enabled - Channels not enabled - Device not in Mission Mode - Solenoid wiring incorrect **Solutions**: ``` Checklist: â–¡ VBAT: 5.5-41V connected (typical 12-24V) and sufficient current capacity â–¡ EN pin: HIGH (outputs enabled) â–¡ Channels: Enabled via EnableChannel() â–¡ Mode: Mission Mode (EnterMissionMode()) â–¡ Wiring: Solenoid+ to OUT, Solenoid- to GND â–¡ RESN: HIGH (not in reset) ``` --- #### 2. Current Not Regulating Correctly âš ï¸ **Symptom**: Actual current doesn't match setpoint **Root Causes**: - Load resistance mismatch - Power supply voltage too low - Current limits exceeded - Solenoid resistance out of range **Solutions**: ``` 1. Check load resistance: - Solenoid 1: R = VBAT / I_max = 12V / 1.5A = 8Î© minimum - Solenoid 2: R = VBAT / I_max = 12V / 3.0A = 4Î© minimum 2. Verify power supply: - VBAT voltage: 5.5V to 41V (typical 12-24V) - Current capacity: 5A+ for parallel operation 3. Check telemetry: - Current error should be 1000mA)** | Â±2-5% | Â±10% | **Parallel Operation** | Â±3-7% | Â±12% | **Note**: Accuracy depends on load characteristics, power supply stability, and temperature. ### Power Consumption | Component | Typical Current | Notes |-----------|----------------|-------| **ESP32-C6 (Idle)** | 20-30mA | Without WiFi/BLE | **ESP32-C6 (Active)** | 50-80mA | During operation | **TLE92466ED (VDD)** | - | 5V input (powers central logic) | **TLE92466ED (VIO)** | 10-20mA | I/O level supply (for SPI) | **Solenoid 1 (Max)** | 1500mA | At maximum setpoint | **Solenoid 2 (Max)** | 3000mA | At maximum setpoint (parallel) | --- ## Safety Considerations ### Electrical Safety ``` â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Safety Guidelines â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ âš ï¸ HIGH VOLTAGE WARNING â”‚ â”‚ â””â”€> VBAT can be up to 41V (recommended operating) â”‚ â”‚ â””â”€> Use appropriate safety measures â”‚ â”‚ â””â”€> Ensure proper grounding â”‚ â”‚ â”‚ â”‚ âš ï¸ HIGH CURRENT WARNING â”‚ â”‚ â””â”€> Parallel operation can draw 3A+ â”‚ â”‚ â””â”€> Use appropriate wire gauge â”‚ â”‚ â””â”€> Ensure connectors are rated for current â”‚ â”‚ â”‚ â”‚ âš ï¸ THERMAL CONSIDERATIONS â”‚ â”‚ â””â”€> TLE92466ED can get hot during operation â”‚ â”‚ â””â”€> Add heatsink if needed â”‚ â”‚ â””â”€> Monitor temperature via telemetry â”‚ â”‚ â”‚ â”‚ âš ï¸ SHORT CIRCUIT PROTECTION â”‚ â”‚ â””â”€> TLE92466ED has built-in protection â”‚ â”‚ â””â”€> Monitor FAULTN pin â”‚ â”‚ â””â”€> Check telemetry for fault conditions â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ``` ### Operational Safety 1. **Start with Low Currents**: Begin testing at minimum current setpoints 2. **Monitor Telemetry**: Watch for faults and warnings 3. **Check Temperatures**: Ensure adequate cooling 4. **Verify Wiring**: Double-check all connections before powering on 5. **Use Fuses**: Add appropriate fuses in power supply lines 6. **Emergency Stop**: Have a way to quickly disable power (EN pin or power supply) --- ## Related Documentation ### ESP32 Examples - [Driver Integration Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html) - Driver API validation (no hardware) - [Test Framework Reference](../main/TLE92466ED_TestFramework.hpp) - Framework API - [Hardware Configuration](/hf-tle92466ed-driver/development/examples/esp32/main/TLE92466ED_TestConfig.hpp) - Pin and parameter config - [ESP32-C6 CommInterface](/hf-tle92466ed-driver/development/examples/esp32/main/Esp32TleCommInterface.hpp) - CommInterface implementation ### Driver Documentation - [Driver API Reference](/hf-tle92466ed-driver/development/docs/07_Driver_API/) - Complete API documentation - [CommInterface Implementation Guide](/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/) - Porting to new platforms - [Register Map](/hf-tle92466ed-driver/development/docs/03_Register_Map/) - TLE92466ED register details - [Diagnostics](/hf-tle92466ed-driver/development/docs/06_Diagnostics/) - Fault detection and handling ### Hardware Documentation - [TLE92466ED Datasheet](../../../Datasheet/) - Complete IC specifications - [ESP32-C6 Technical Reference](https://www.espressif.com/sites/default/files/documentation/esp32-c6_technical_reference_manual_en.pdf) - MCU documentation --- ## Notes - This test requires actual solenoids and proper power supplies - VBAT is **required** for solenoid operation (unlike driver integration test) - Both solenoids use the same ADC percentage but different current ranges - Parallel operation automatically shares current between channels - Telemetry updates every 1 second - Control loop updates every 100ms for responsive current control - The test runs continuously until reset or power cycle --- **Example**: Solenoid Control Test **Platform**: ESP32-C6 **Framework**: FreeRTOS **Status**: âœ… Production Ready **Hardware Required**: TLE92466ED IC + Two Solenoids + Power Supplies ",
    "url": "/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html",
    
    "relUrl": "/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html"
  },"280": {
    "doc": "TLE92466ED Test Framework Documentation",
    "title": "TLE92466ED Test Framework Documentation",
    "content": "# TLE92466ED Test Framework Documentation ## Overview The **TLE92466ED Test Framework** (`TLE92466ED_TestFramework.hpp`) provides professional testing infrastructure for ESP32-based examples, adapted from the HardFOC Internal Interface Wrap test framework. ## ğŸ¯ Purpose - **Structured Testing**: Organize tests into logical sections - **Automatic Tracking**: Pass/fail counting and execution timing - **Visual Feedback**: GPIO14 progress indicator - **Task Isolation**: FreeRTOS task-based execution - **CI/CD Ready**: Structured output for automated testing ## ğŸ“š Framework Components ### 1. GPIO14 Test Progression Indicator #### Purpose Provides **hardware-level visual feedback** showing test progression on oscilloscope, logic analyzer, or LED. #### Functions ```cpp bool init_test_progress_indicator() noexcept; ```text **Initialize GPIO14** as output for test progression indicator - Configures GPIO14 as push-pull output - Sets initial state to LOW - Returns `true` on success ```cpp void flip_test_progress_indicator() noexcept; ```text **Toggle GPIO14** state to indicate test completion - Alternates between HIGH and LOW - Called automatically after each test - 50ms delay for visual effect ```cpp void output_section_indicator(uint8_t blink_count = 5) noexcept; ```text **Blink GPIO14** to indicate section boundaries - Default: 5 blinks (50ms ON, 50ms OFF each) - Custom blink count for different sections - Marks state as LOW after completion ```cpp void cleanup_test_progress_indicator() noexcept; ```text **Cleanup and reset** GPIO14 - Sets pin to LOW - Resets pin configuration - Called before system restart #### Signal Patterns ```text Section Start: â”Œâ”€â” â”Œâ”€â” â”Œâ”€â” â”Œâ”€â” â”Œâ”€â” â””â”€â”˜ â””â”€â”˜ â””â”€â”˜ â””â”€â”˜ â””â”€â”˜ (5 blinks, 50ms each) Test Complete: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” (Toggle HIGH) â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Next Test: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (Toggle LOW) ```text #### Hardware Setup ```text ESP32-C6 GPIO14 â”€â”€â”¬â”€â”€ LED Anode â”‚ â””â”€â”€ LED Cathode â”€â”€ 220Î© â”€â”€ GND â”‚ â””â”€â”€ Oscilloscope/Logic Analyzer Probe ```text --- ### 2. Test Result Tracking #### TestResults Structure ```cpp struct TestResults { int total_tests; // Total number of tests run int passed_tests; // Number of tests passed int failed_tests; // Number of tests failed uint64_t total_execution_time_us; // Total execution time (Î¼s) void add_result(bool passed, uint64_t execution_time) noexcept; double get_success_percentage() const noexcept; double get_total_time_ms() const noexcept; void print_summary(const char* tag) const noexcept; }; ```text #### Global Instance ```cpp static TestResults g_test_results; ```text Automatically accumulates results from all tests. Accessed via macros. #### Methods **`add_result(passed, execution_time)`** - Records test result - Updates pass/fail counters - Accumulates execution time - Called automatically by test macros **`get_success_percentage()`** - Returns success rate (0.0 to 100.0) - Handles division by zero **`get_total_time_ms()`** - Returns total execution time in milliseconds - Converts from microseconds **`print_summary(tag)`** - Prints professional formatted summary: ```text â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ TEST RESULTS SUMMARY â•‘ â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â•‘ Total Tests: 7 â•‘ â•‘ Passed: 7 â•‘ â•‘ Failed: 0 â•‘ â•‘ Success Rate: 100.00% â•‘ â•‘ Total Time: 234.56 ms â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ```text --- ### 3. Test Execution Macros #### RUN_TEST(test_func) **Inline test execution** (no separate task) ```cpp RUN_TEST(test_hal_initialization); ```text **Features**: - Executes test in current task context - Prints formatted header - Measures execution time (microseconds) - Records result in `g_test_results` - Flips GPIO14 on completion - 100ms delay after test **Use Case**: Simple tests that don't need large stack or isolation **Output**: ```text â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ Running: test_hal_initialization â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [SUCCESS] PASSED: test_hal_initialization (12.34 ms) ```text --- #### RUN_TEST_IN_TASK(name, func, stack_size_bytes, priority) **FreeRTOS task-based test execution** ```cpp RUN_TEST_IN_TASK(\"hal_init\", test_hal_initialization, 8192, 5); ```text **Parameters**: - `name`: Test name string (for logging) - `func`: Test function pointer (`bool (*)() noexcept`) - `stack_size_bytes`: Task stack size (e.g., `8192` = 8KB) - `priority`: FreeRTOS task priority (`1-5`, typical: `5`) **Features**: - Executes test in **isolated FreeRTOS task** - Custom stack size per test - Automatic semaphore synchronization - **30-second timeout** protection - Fallback to inline execution on task creation failure - Waits for test completion before continuing - 100ms delay between tests **Use Case**: Complex tests needing large stack or isolation **Task Management**: ```cpp struct TestTaskContext { const char* test_name; bool (*test_func)() noexcept; TestResults* results; const char* tag; SemaphoreHandle_t completion_semaphore; }; void test_task_trampoline(void* param); ```text **Output**: ```text â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ Running (task): hal_init â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [SUCCESS] PASSED (task): hal_init (12.34 ms) Test task completed: hal_init ```text **Timeout Handling**: ```cpp if (xSemaphoreTake(semaphore, pdMS_TO_TICKS(30000)) == pdTRUE) { // Test completed } else { ESP_LOGW(TAG, \"Test task timeout: %s\", name); // Still records result, continues to next test } ```text --- #### RUN_TEST_SECTION_IF_ENABLED(enabled, section_name, ...) **Conditional test section execution** ```cpp RUN_TEST_SECTION_IF_ENABLED( ENABLE_INITIALIZATION_TESTS, \"INITIALIZATION TESTS\", RUN_TEST_IN_TASK(\"hal_init\", test_hal_initialization, 8192, 5); RUN_TEST_IN_TASK(\"driver_init\", test_driver_initialization, 8192, 5); ); ```text **Parameters**: - `enabled`: Compile-time flag (`0` or `1`) - `section_name`: Display name for section - `...`: Test calls (variadic) **Features**: - **Compile-time** section enable/disable - Professional section header - **5-blink pattern** on GPIO14 at section start - Wraps multiple test calls **Output**: ```text â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ SECTION: INITIALIZATION TESTS â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [GPIO14: 5 blinks] ... tests ... ```text --- #### RUN_TEST_SECTION_IF_ENABLED_WITH_PATTERN(enabled, section_name, blink_count, ...) **Conditional test section with custom blink pattern** ```cpp RUN_TEST_SECTION_IF_ENABLED_WITH_PATTERN( ENABLE_ADVANCED_TESTS, \"ADVANCED TESTS\", 3, // Custom 3-blink pattern RUN_TEST_IN_TASK(\"advanced_test\", test_advanced, 16384, 5); ); ```text **Parameters**: - `enabled`: Compile-time flag - `section_name`: Display name - `blink_count`: Custom blink count for this section - `...`: Test calls **Use Case**: Differentiate sections by blink pattern on oscilloscope --- ### 4. Test Section Configuration #### print_test_section_status(tag, module_name) Prints configuration information at test start: ```cpp print_test_section_status(TAG, \"TLE92466ED\"); ```text **Output**: ```text â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ TLE92466ED TEST CONFIGURATION â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â•‘ Test sections will execute based on compile-time configuration â•‘ â•‘ GPIO14 test progression indicator: ENABLED â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ```text --- ## ğŸ”§ Usage Guide ### Basic Setup #### 1. Include Framework ```cpp #include \"TLE92466ED_TestFramework.hpp\" static const char* TAG = \"MyTest\"; ```text #### 2. Define Test Sections ```cpp #define ENABLE_BASIC_TESTS 1 #define ENABLE_ADVANCED_TESTS 1 #define ENABLE_STRESS_TESTS 0 // Disabled ```text #### 3. Write Test Functions ```cpp static bool test_my_feature() noexcept { ESP_LOGI(TAG, \"Testing my feature...\"); // Test logic here bool result = some_operation(); if (result) { ESP_LOGI(TAG, \"âœ… Feature works!\"); return true; } else { ESP_LOGE(TAG, \"âŒ Feature failed!\"); return false; } } ```text **Requirements**: - Return type: `bool` - `noexcept` specifier - `true` = passed, `false` = failed #### 4. Create app_main() ```cpp extern \"C\" void app_main() { // Print header ESP_LOGI(TAG, \"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\"); ESP_LOGI(TAG, \"â•‘ MY TEST SUITE â•‘\"); ESP_LOGI(TAG, \"â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"); // Initialize GPIO14 init_test_progress_indicator(); // Print configuration print_test_section_status(TAG, \"MY_MODULE\"); // Run test sections RUN_TEST_SECTION_IF_ENABLED( ENABLE_BASIC_TESTS, \"BASIC TESTS\", RUN_TEST_IN_TASK(\"my_feature\", test_my_feature, 8192, 5); ); // Print results g_test_results.print_summary(TAG); // Cleanup cleanup_test_progress_indicator(); // Status message if (g_test_results.failed_tests == 0) { ESP_LOGI(TAG, \"âœ… ALL TESTS PASSED!\"); } else { ESP_LOGE(TAG, \"âŒ %d TESTS FAILED!\", g_test_results.failed_tests); } vTaskDelay(pdMS_TO_TICKS(10000)); esp_restart(); } ```text --- ## ğŸ“Š Advanced Usage ### Custom Test Context For tests that need shared resources: ```cpp // Global resources static MyDriver* g_driver = nullptr; static bool test_with_driver() noexcept { if (!g_driver) { ESP_LOGE(TAG, \"Driver not initialized\"); return false; } // Use driver return g_driver->doSomething(); } ```text ### Stack Size Guidelines | Test Complexity | Stack Size | Notes |----------------|-----------|-------| Simple | 4096 (4KB) | Basic operations, minimal locals | Normal | 8192 (8KB) | Standard tests (default) | Complex | 12288 (12KB) | Multiple buffers, recursion | Heavy | 16384 (16KB) | Large objects, deep call chains | ### Priority Guidelines | Priority | Use Case |----------|----------| 1-2 | Low priority background tests | 3-4 | Normal test priority | 5 | **Default**, standard tests | 6-10 | High priority, time-critical tests | ### Timeout Considerations Default timeout: **30 seconds** Modify in framework if needed: ```cpp if (xSemaphoreTake(ctx.completion_semaphore, pdMS_TO_TICKS(60000))) { // 60-second timeout for slow tests } ```text --- ## ğŸ¯ Best Practices ### 1. Test Organization ```cpp // Group related tests RUN_TEST_SECTION_IF_ENABLED( ENABLE_INITIALIZATION_TESTS, \"INITIALIZATION\", RUN_TEST_IN_TASK(\"hal\", test_hal_init, 8192, 5); RUN_TEST_IN_TASK(\"driver\", test_driver_init, 8192, 5); ); RUN_TEST_SECTION_IF_ENABLED( ENABLE_OPERATION_TESTS, \"OPERATIONS\", RUN_TEST_IN_TASK(\"read\", test_read, 8192, 5); RUN_TEST_IN_TASK(\"write\", test_write, 8192, 5); ); ```text ### 2. Clear Logging ```cpp static bool test_feature() noexcept { ESP_LOGI(TAG, \"Starting feature test...\"); ESP_LOGI(TAG, \"Step 1: Initialize\"); ESP_LOGI(TAG, \"Step 2: Execute\"); ESP_LOGI(TAG, \"Step 3: Verify\"); ESP_LOGI(TAG, \"âœ… Feature test passed\"); return true; } ```text ### 3. Error Reporting ```cpp static bool test_operation() noexcept { if (auto result = do_operation(); !result) { ESP_LOGE(TAG, \"âŒ Operation failed: %s\", result.error()); return false; } return true; } ```text ### 4. Resource Cleanup ```cpp extern \"C\" void app_main() { // Setup init_test_progress_indicator(); auto* resource = create_resource(); // Tests RUN_TEST_SECTION_IF_ENABLED(...); // Cleanup (ALWAYS!) delete resource; cleanup_test_progress_indicator(); g_test_results.print_summary(TAG); } ```text --- ## ğŸ“ˆ Performance Impact ### Memory Overhead | Component | Flash | RAM |-----------|-------|-----| Framework Code | ~8KB | ~2KB | Test Results | 0 | 32 bytes | Per Test Context | 0 | ~64 bytes (temporary) | GPIO14 State | 0 | 3 bytes | **Total** | **~8KB** | **~2KB + 64B per active task** | ### Timing Overhead | Operation | Time |-----------|------| Test Header Print | ~5ms | GPIO14 Toggle | ~50Î¼s | GPIO14 Blink (5x) | ~500ms | Semaphore Operations | ~10Î¼s | Result Recording | ~1Î¼s | **Per Test Overhead** | **~5-10ms** | --- ## ğŸ” Debugging ### Enable Framework Debug Output ```cpp #define TEST_FRAMEWORK_DEBUG 1 // In framework functions: #ifdef TEST_FRAMEWORK_DEBUG ESP_LOGI(\"TestFramework\", \"Debug info...\"); #endif ```text ### Monitor GPIO14 ```bash # Logic analyzer configuration Sample Rate: 1MHz Duration: 10s Trigger: Rising edge on GPIO14 ```text ### Analyze Test Timing ```cpp // Parse output for timing data grep \"PASSED\" output.log | awk '{print $NF}' ```text --- ## ğŸ”— Integration with CI/CD ### Structured Output Parsing ```bash #!/bin/bash # Extract results TOTAL=$(grep \"Total Tests:\" output.log | awk '{print $3}') PASSED=$(grep \"Passed:\" output.log | awk '{print $2}') FAILED=$(grep \"Failed:\" output.log | awk '{print $2}') SUCCESS_RATE=$(grep \"Success Rate:\" output.log | awk '{print $3}') # Exit code if [ \"$FAILED\" -gt 0 ]; then echo \"TESTS FAILED: $FAILED/$TOTAL\" exit 1 else echo \"ALL TESTS PASSED: $PASSED/$TOTAL ($SUCCESS_RATE)\" exit 0 fi ```text ### GitHub Actions Example ```yaml - name: Run Tests run: | ./scripts/flash_app.sh basic_usage Debug ./scripts/monitor_app.sh basic_usage > output.log - name: Parse Results run: | if grep \"\\[FAILED\\]\" output.log; then echo \"Tests failed!\" exit 1 fi ```text --- ## ğŸ“š References - [BasicUsageExample.cpp](../main/BasicUsageExample.cpp) - Example implementation - [HardFOC Internal TestFramework.h]( ../../../../internal/hf-internal-interface-wrap/examples/esp32/main/TestFramework.h) - Original framework --- **Framework Version**: 1.0.0 **Based on**: HardFOC Internal Interface Wrap TestFramework.h **Platform**: ESP32 (ESP-IDF v5.0+) **Status**: âœ… Production Ready ",
    "url": "/hf-tle92466ed-driver/development/examples/esp32/docs/README_TEST_FRAMEWORK.html",
    
    "relUrl": "/examples/esp32/docs/README_TEST_FRAMEWORK.html"
  },"281": {
    "doc": "TLE92466ED ESP32-C6 Examples",
    "title": "TLE92466ED ESP32-C6 Examples",
    "content": "# TLE92466ED ESP32-C6 Examples This directory contains comprehensive examples demonstrating the TLE92466ED driver on ESP32-C6 platform. ## ğŸ¯ Overview The ESP32-C6 examples showcase real-world usage of the TLE92466ED six-channel low-side solenoid driver with: - **Hardware-specific HAL** implementation for ESP32-C6 - **Multiple example applications** covering different use cases - **Automated build system** with configurable app types - **Comprehensive documentation** for each example - **Production-ready code** with proper error handling ## ğŸ”§ Hardware Requirements ### ESP32-C6 Development Board - ESP32-C6-DevKitC-1 or compatible - USB-C cable for programming and power ### TLE92466ED Connections | TLE92466ED Pin | ESP32-C6 GPIO | Function |----------------|---------------|----------| MOSI | GPIO7 | SPI Data Out | MISO | GPIO2 | SPI Data In | SCLK | GPIO6 | SPI Clock | CS | GPIO10 | Chip Select | VDD | 3.3V | Logic Supply | VBAT | 12-24V | Power Supply | GND | GND | Ground | ### Load Connections Connect your solenoids/loads to the TLE92466ED output channels (OUT0-OUT5) with appropriate current ratings. ## ğŸš€ Quick Start ### 1. Prerequisites ```bash # Install ESP-IDF v5.5 curl -fsSL https://raw.githubusercontent.com/espressif/esp-idf/master/tools/install.sh | bash source ~/esp/esp-idf/export.sh # Verify installation idf.py --version ```text ### 2. Setup Repository ```bash # Clone and setup git clone --recursive https://github.com/n3b3x/hf-tle92466ed-driver.git cd hf-tle92466ed-driver/examples/esp32 # Initialize build environment ./scripts/setup_repo.sh ```text ### 3. Build and Flash ```bash # Build basic usage example (default) ./scripts/build_app.sh basic_usage Release # Flash to ESP32-C6 ./scripts/flash_app.sh basic_usage Release # Monitor output idf.py monitor ```text ## ğŸ“± Available Examples ### ğŸŸ¢ Basic Examples #### `driver_integration_test` **Comprehensive Driver Integration Test Suite** - Complete driver API validation (40+ tests) - 13 test sections covering all functionality - Initialization, configuration, control, diagnostics - Multi-channel and parallel operation testing - Error condition validation - Comprehensive telemetry testing - Professional test framework with automatic result tracking - **No actual solenoids required** (driver test only) ```bash ./scripts/build_app.sh driver_integration_test Debug ./scripts/flash_app.sh driver_integration_test Debug ``` **Documentation**: [Driver Integration Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html) #### `solenoid_control_test` **Real Hardware Solenoid Control Test** - Two solenoids: one single channel, one parallel pair - ADC-based current control (0-3.3V maps to 0-100% current) - Independent min/max current limits per solenoid - Real-time current adjustment based on ADC reading - Comprehensive real-time telemetry (every 1 second) - Proper parallel channel operation validation - **Requires actual solenoids and power supplies** ```bash ./scripts/build_app.sh solenoid_control_test Debug ./scripts/flash_app.sh solenoid_control_test Debug ``` **Documentation**: [Solenoid Control Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html) ### ğŸŸ¡ Advanced Examples #### `parallel_mode` **High-current parallel channel operation** - Channel pairing (CH0/CH3, CH1/CH2, CH4/CH5) - 4A current control - Load balancing - Thermal management #### `diagnostics_test` **Comprehensive fault detection** - Overcurrent detection - Temperature monitoring - Open load detection - Short circuit detection - Real-time fault reporting #### `pwm_dither` **Precision control with PWM and dither** - Configurable PWM frequency - Dither amplitude control - Noise reduction techniques - Precision current shaping ### ğŸ”µ Application Examples #### `automotive_demo` **Automotive solenoid control** - Transmission solenoid patterns - Fuel injector timing - Valve control with feedback - Safety interlocks #### `industrial_valve` **Industrial valve control** - Proportional valve control - Position feedback integration - Flow rate control - PID control implementation ### ğŸŸ  Testing Examples #### `stress_test` **Reliability and stress testing** - Continuous operation testing - Thermal cycling - Communication error injection - Recovery mechanisms #### `calibration` **Current calibration and accuracy** - Current measurement calibration - Temperature compensation - Accuracy validation - Factory calibration routines ## ğŸ› ï¸ Build System ### App Configuration All examples are configured in `app_config.yml`: ```yaml apps: basic_usage: description: \"Basic TLE92466ED usage example\" source_file: \"BasicUsageExample.cpp\" category: \"basic\" idf_versions: [\"release/v5.5\"] build_types: [\"Debug\", \"Release\"] ```text ### Build Commands ```bash # List available apps python3 scripts/get_app_info.py list # Get app information python3 scripts/get_app_info.py info basic_usage # Build specific app and type ./scripts/build_app.sh # Flash specific app ./scripts/flash_app.sh # Clean build ./scripts/build_app.sh --clean ```text ### Build Types - **Debug**: Full debugging symbols, verbose logging, assertions - **Release**: Optimized for performance and size - **RelWithDebInfo**: Release with debug symbols - **MinSizeRel**: Optimized for minimum size ## ğŸ“Š Configuration ### Hardware Configuration File All hardware configuration is defined in `main/TLE92466ED_TestConfig.hpp`. This is the **actual** configuration used by the HAL and examples. **Important**: The `app_config.yml` file only contains application definitions and build configuration, NOT hardware settings. ### SPI Configuration Edit `main/TLE92466ED_TestConfig.hpp` to change SPI pins: ```cpp struct SPIPins { static constexpr int MISO = 2; // GPIO2 - SPI MISO static constexpr int MOSI = 7; // GPIO7 - SPI MOSI static constexpr int SCLK = 6; // GPIO6 - SPI Clock static constexpr int CS = 10; // GPIO10 - Chip Select }; struct SPIParams { static constexpr int FREQUENCY = 1000000; // 1MHz static constexpr int MODE = 0; // SPI Mode 0 }; ```text ### Current Limits Defined in `main/TLE92466ED_TestConfig.hpp`: ```cpp struct CurrentLimits { static constexpr uint16_t SINGLE_CHANNEL_MAX = 2000; // 2A per channel static constexpr uint16_t PARALLEL_CHANNEL_MAX = 4000; // 4A parallel mode }; ```text ### Hardware Specifications Defined in `main/TLE92466ED_TestConfig.hpp`: ```cpp struct SupplyVoltage { static constexpr float VBAT_MIN = 8.0f; // Minimum VBAT (V) static constexpr float VBAT_MAX = 28.0f; // Maximum VBAT (V) }; struct Temperature { static constexpr int JUNCTION_MAX = 150; // Maximum temp (Â°C) }; ```text ## ğŸ” Debugging ### Serial Monitor ```bash # Monitor with automatic port detection idf.py monitor # Monitor specific port idf.py monitor -p /dev/ttyUSB0 # Monitor with filtering idf.py monitor | grep \"TLE92466ED\" ```text ### Log Levels Set in `sdkconfig` or via menuconfig: ```text CONFIG_LOG_DEFAULT_LEVEL_DEBUG=y # Debug level CONFIG_TLE92466ED_DEBUG_ENABLED=y # Driver debug ```text ### Common Issues 1. **SPI Communication Errors** - Check wiring connections - Verify power supply (VBAT 12-24V, VDD 3.3V) - Ensure proper grounding 2. **Current Control Issues** - Verify load connections - Check current limits in configuration - Monitor diagnostics for faults 3. **Build Errors** - Ensure ESP-IDF v5.5 is installed - Run `./scripts/setup_repo.sh` - Check C++23 compiler support ## ğŸ“š Documentation ### Example Documentation Each example has detailed documentation in `docs/`: - `docs/README_DRIVER_INTEGRATION_TEST.md` - `docs/README_MULTI_CHANNEL.md` - `docs/README_PARALLEL_MODE.md` - `docs/README_DIAGNOSTICS.md` - And more... ### API Documentation - [Driver API Reference](/hf-tle92466ed-driver/development/docs/07_Driver_API/) - [HAL Implementation Guide](/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/) - [Register Map](/hf-tle92466ed-driver/development/docs/03_Register_Map/) ## ğŸ§ª Testing ### Unit Tests ```bash # Run all tests ./scripts/build_app.sh stress_test Debug ./scripts/flash_app.sh stress_test Debug ```text ### Performance Testing ```bash # Performance monitoring ./scripts/build_app.sh multi_channel Release ./scripts/flash_app.sh multi_channel Release ```text ### Continuous Integration The examples are automatically tested in CI with: - Multiple ESP-IDF versions - Debug and Release builds - Hardware-in-the-loop testing ## ğŸ¤ Contributing 1. **Adding New Examples** - Create source file in `main/` - Add entry to `app_config.yml` - Create documentation in `docs/` - Test with both Debug and Release builds 2. **Modifying HAL** - Update `ESP32C6_HAL.hpp` and `ESP32C6_HAL.cpp` - Ensure compatibility with all examples - Test SPI communication thoroughly 3. **Configuration Changes** - Update `app_config.yml` for new settings - Modify `sdkconfig` for ESP32-C6 specific changes - Document changes in README ## ğŸ“„ License This software is released into the **Public Domain**. You can use, modify, and distribute it freely without any restrictions. ## ğŸ”— Resources - [TLE92466ED Datasheet](../../Datasheet/) - [ESP32-C6 Technical Reference](https://www.espressif.com/sites/default/files/documentation/esp32-c6_technical_reference_manual_en.pdf) - [ESP-IDF Programming Guide](https://docs.espressif.com/projects/esp-idf/en/latest/) - [GitHub Repository](https://github.com/n3b3x/hf-tle92466ed-driver) --- **Version**: 2.0.0 | **Target**: ESP32-C6 | **ESP-IDF**: v5.5 | **Last Updated**: 2025-10-21 ",
    "url": "/hf-tle92466ed-driver/development/examples/esp32/",
    
    "relUrl": "/examples/esp32/"
  },"282": {
    "doc": "TLE92466ED ESP-IDF Component",
    "title": "TLE92466ED ESP-IDF Component",
    "content": "# TLE92466ED ESP-IDF Component This directory contains the ESP-IDF component configuration for the TLE92466ED driver. ## Overview This component wraps the TLE92466ED driver for use as an ESP-IDF managed component, making it easy to integrate into ESP32 projects. ## Component Structure ```text tle92466ed-espidf/ â”œâ”€â”€ CMakeLists.txt # Component build configuration â”œâ”€â”€ idf_component.yml # ESP-IDF Component Manager manifest â””â”€â”€ README.md # This file ```text ## How It Works ### Component Resolution The component automatically locates the TLE92466ED driver source files: 1. **CI/Build Environment**: Looks for `src/` and `include/` in the project root 2. **Development Environment**: Looks for `../../src/` and `../../include/` (driver root) ### Source Files Included - `src/TLE92466ED.cpp` - Main driver implementation ### Headers Included - `inc/TLE92466ED.hpp` - Driver class - `inc/TLE92466ED_Registers.hpp` - Register definitions - `inc/TLE92466ED_CommInterface.hpp` - Communication interface ## Usage in Projects ### In ESP-IDF Component Manager This component can be used with the ESP-IDF Component Manager by adding it to your project's dependencies. ### In Local Projects The component is automatically discovered by ESP-IDF when located in the `components/` directory of your project. ### Requirements Add to your main component: ```cmake idf_component_register( SRCS \"main.cpp\" INCLUDE_DIRS \".\" REQUIRES tle92466ed-espidf # Add this requirement ) ```text ## Configuration The component provides compile-time definitions based on the target: - `TLE92466ED_TARGET_ESP32` - ESP32 classic target - `TLE92466ED_TARGET_ESP32C6` - ESP32-C6 target - `TLE92466ED_TARGET_ESP32S3` - ESP32-S3 target - `TLE92466ED_TARGET_ESP32C3` - ESP32-C3 target - `TLE92466ED_MCU_FAMILY_ESP32` - ESP32 family marker ## Build Features ### C++23 Standard The component is configured to use C++23 standard: ```cmake target_compile_features(${COMPONENT_LIB} PRIVATE cxx_std_23) ```text ### Compiler Optimizations - **Link Time Optimization (LTO)**: Enabled when configured - **Function/Data Sections**: For better code size optimization - **No RTTI**: `-fno-rtti` for smaller binary size - **No Exceptions**: `-fno-exceptions` for embedded systems ### Compiler Flags ```text -Wall -Wextra -Wpedantic -O2 -g -ffunction-sections -fdata-sections -fno-rtti -fno-exceptions ```text ## ESP-IDF Dependencies The component requires these ESP-IDF components: ### Core Components - `driver` - SPI drivers - `esp_timer` - Timing functions - `freertos` - RTOS support - `esp_system` - System utilities - `hal` - Hardware abstraction layer - `soc` - SoC definitions - `log` - Logging ### Driver Components - `esp_driver_gpio` - GPIO driver - `esp_driver_spi` - SPI driver ## Supported ESP32 Targets - ESP32 (classic) - ESP32-S2 - ESP32-S3 - ESP32-C2 - ESP32-C3 - ESP32-C6 (primary target) - ESP32-H2 ## Development ### Testing Component Configuration ```bash cd examples/esp32 idf.py reconfigure ```text ### Viewing Component Information ```bash idf.py show-components ```text ### Debugging Component Issues Enable verbose output: ```bash idf.py -v build ```text ## Component Manager ### Publishing to Component Registry To publish this component to the ESP-IDF Component Registry: 1. Update version in `idf_component.yml` 2. Create git tag matching version 3. Follow ESP-IDF Component Manager publishing guidelines ### Local Installation The component is automatically available when building the examples from the `examples/esp32` directory. ## Build Messages During build, the component will display: ```text TLE92466ED Driver - ESP32 Component Configuration Project Root: /path/to/project Source Root: /path/to/driver Found source: /path/to/TLE92466ED.cpp === TLE92466ED Driver Component Summary === Component configured successfully Included 1 source files Target MCU: ESP32-C6 C++ Standard: C++23 Driver Version: 2.0.0 Optimization: LTO enabled (if configured) ========================================== ```text ## Troubleshooting ### Source Files Not Found **Issue**: \"Source file not found\" warnings **Solution**: Verify the driver is in the correct location: - Development: `../../src/TLE92466ED.cpp` relative to component - CI: `${PROJECT_ROOT}/src/TLE92466ED.cpp` ### C++23 Not Supported **Issue**: Compiler doesn't support C++23 **Solution**: Update to: - GCC 12.0 or later - Clang 16.0 or later - ESP-IDF v5.5 or later ### Component Not Found **Issue**: \"Component 'tle92466ed-espidf' not found\" **Solution**: Ensure the component is in the `components/` directory of your ESP-IDF project. ## References - [ESP-IDF Component Manager Documentation](https://docs.espressif.com/projects/idf-component-manager/) - [ESP-IDF CMake Build System](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-guides/build-system.html) - [TLE92466ED Driver Documentation](../../docs/) --- **Component Version**: 2.0.0 **ESP-IDF Version**: â‰¥5.0.0 **C++ Standard**: C++23 ",
    "url": "/hf-tle92466ed-driver/development/examples/esp32/components/hf_tle92466ed/",
    
    "relUrl": "/examples/esp32/components/hf_tle92466ed/"
  },"283": {
    "doc": "TLE92466ED ESP32 Examples Documentation",
    "title": "TLE92466ED ESP32 Examples Documentation",
    "content": "# TLE92466ED ESP32 Examples Documentation ## ğŸ“š Documentation Index Complete documentation for TLE92466ED driver examples on ESP32-C6. --- ## ğŸ¯ Quick Start | Document | Purpose | When to Read |----------|---------|--------------| **[Driver Integration Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html)** | Driver API validation | Start here for driver testing | **[Solenoid Control Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html)** | Real hardware solenoid testing | For actual solenoid operation | **[Configuration Guide](/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html)** | All configuration options | Before customizing | **[Test Framework Reference](/hf-tle92466ed-driver/development/examples/esp32/docs/README_TEST_FRAMEWORK.html)** | Framework API details | Writing custom tests | --- ## ğŸ“– Documentation Structure ### 1. [Driver Integration Test Suite](/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html) **Guide to the driver integration test suite** #### Contents - âœ… **Test Framework Architecture** - How the test infrastructure works - âœ… **Test Suite Structure** - All 13 test sections with 40+ tests - âœ… **Hardware Setup** - Complete wiring diagrams and pin configurations - âœ… **Configuration** - Hardware and test settings - âœ… **Building and Running** - Build commands and workflows - âœ… **Expected Output** - Full example outputs with explanations - âœ… **Test Coverage** - Complete API coverage breakdown - âœ… **Individual Test Details** - Deep dive into each test - âœ… **Telemetry Testing** - Telemetry validation - âœ… **Troubleshooting** - Common issues and solutions - âœ… **Performance Characteristics** - Timing and memory usage **Start here for driver API validation (no hardware required)!** --- ### 2. [Solenoid Control Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html) **Complete guide to real hardware solenoid testing** #### Contents - âœ… **Hardware Requirements** - Complete component list and specifications - âœ… **System Architecture** - Block diagrams and control flow - âœ… **Hardware Setup** - Detailed wiring diagrams and connections - âœ… **ADC Configuration** - Analog input setup and calibration - âœ… **Solenoid Configuration** - Single channel and parallel pair setup - âœ… **Control Algorithm** - Current calculation and regulation - âœ… **Real-Time Telemetry** - Monitoring and display - âœ… **Operation** - Startup sequence and control loop - âœ… **Troubleshooting** - Hardware-specific issues and solutions - âœ… **Safety Considerations** - Electrical and operational safety **Use this for real hardware testing with actual solenoids!** --- ### 3. [Configuration Guide](/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html) **Complete reference for all configuration files and options** #### Contents - âœ… **Hardware Configuration** (`TLE92466ED_TestConfig.hpp`) - SPI pins, frequencies, current limits - âœ… **Application Configuration** (`app_config.yml`) - Build metadata and app definitions - âœ… **Test Section Configuration** - Compile-time test enable/disable - âœ… **ESP-IDF SDK Configuration** (`sdkconfig`) - Framework settings - âœ… **Component Configuration** - ESP-IDF component setup - âœ… **Configuration Workflows** - Development and production setups - âœ… **Troubleshooting** - Configuration-related issues **Read this when you need to customize hardware or build settings.** --- ### 4. [Test Framework Reference](/hf-tle92466ed-driver/development/examples/esp32/docs/README_TEST_FRAMEWORK.html) **Detailed API reference for the TLE92466ED Test Framework** #### Contents - âœ… **GPIO14 Progress Indicator** - Visual feedback system - âœ… **Test Result Tracking** - Automatic pass/fail counting - âœ… **Test Execution Macros** - `RUN_TEST`, `RUN_TEST_IN_TASK`, sections - âœ… **Usage Guide** - How to write test functions - âœ… **Advanced Usage** - Custom contexts, stack sizes, timeouts - âœ… **Best Practices** - Test organization - âœ… **Performance Impact** - Memory and timing overhead - âœ… **CI/CD Integration** - Automated testing **Essential reading for creating custom tests or understanding the framework.** --- ## ğŸš€ Getting Started ### Prerequisites - **Hardware**: - ESP32-C6-DevKitC-1 development board - TLE92466ED evaluation board or custom PCB - 12-24V power supply (2A minimum) - Test load (solenoid, resistor, or LED) - USB-C cable for programming - **Software**: - ESP-IDF v5.3 or later (v5.5 recommended) - Python 3.8+ - Git with submodules support - Serial terminal (screen, minicom, or built-in monitor) ### Quick Start Steps 1. **Clone and setup**: ```bash git clone https://github.com/N3b3x/hf-tle92466ed-driver.git cd hf-tle92466ed-driver/examples/esp32 git submodule update --init --recursive ``` 2. **Configure ESP-IDF**: ```bash . $IDF_PATH/export.sh idf.py set-target esp32c6 ``` 3. **Build driver integration test**: ```bash ./scripts/build_app.sh driver_integration_test Debug ``` 4. **Flash and monitor**: ```bash ./scripts/flash_app.sh driver_integration_test Debug ./scripts/monitor_app.sh driver_integration_test ``` 5. **See results**: - Serial output shows test execution - GPIO14 toggles with test progress - Summary printed at end --- ## ğŸ“Š Example Overview ### Driver Integration Test **Purpose**: Driver API validation without hardware requirements **Test Sections** (13 total): 1. **INITIALIZATION_TESTS** - HAL setup, driver init, chip ID verification 2. **MODE_CONTROL_TESTS** - Mode transitions and state management 3. **GLOBAL_CONFIGURATION_TESTS** - Global device configuration 4. **CHANNEL_CONTROL_TESTS** - Channel enable/disable and mode configuration 5. **CURRENT_CONTROL_TESTS** - Current setpoint control and ramping 6. **PWM_CONFIGURATION_TESTS** - PWM period configuration 7. **DITHER_CONFIGURATION_TESTS** - Dither configuration 8. **DIAGNOSTICS_TESTS** - Telemetry and diagnostics 9. **FAULT_MANAGEMENT_TESTS** - Fault handling 10. **WATCHDOG_TESTS** - Watchdog functionality 11. **GPIO_CONTROL_TESTS** - GPIO pin control 12. **MULTI_CHANNEL_TESTS** - All channels individually tested 13. **PARALLEL_OPERATION_TESTS** - Parallel pair configuration 14. **ERROR_CONDITION_TESTS** - Error handling validation **Features**: - âœ… 40+ individual tests - âœ… Complete API coverage - âœ… FreeRTOS task-based test execution - âœ… GPIO14 progress indicator - âœ… Automatic result tracking - âœ… Telemetry testing - âœ… Formatted output - âœ… No actual solenoids required **Read**: [Driver Integration Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html) --- ### Solenoid Control Test **Purpose**: Real hardware solenoid testing with ADC-based current control **Features**: - âœ… Two solenoids: single channel and parallel pair - âœ… ADC-based control (0-3.3V â†’ 0-100% current) - âœ… Independent current ranges per solenoid - âœ… Real-time telemetry (every 1 second) - âœ… Continuous operation - âœ… Fault monitoring **Hardware Required**: TLE92466ED IC + Two Solenoids + Power Supplies **Read**: [Solenoid Control Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html) --- ## ğŸ”§ Configuration Overview ### Hardware Configuration **File**: `main/TLE92466ED_TestConfig.hpp` **What's configured**: - SPI GPIO pins (MISO, MOSI, SCLK, CS) - SPI frequency and mode - Current limits (single and parallel) - Hardware specifications (voltage, temperature) - Test parameters **Example**: ```cpp struct SPIPins { static constexpr int MISO = 2; // GPIO2 static constexpr int MOSI = 7; // GPIO7 static constexpr int SCLK = 6; // GPIO6 static constexpr int CS = 10; // GPIO10 }; ```text **Read**: [Configuration Guide - Hardware Configuration](/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html#1-hardware-configuration-maintle92466ed_confighpp) --- ### Build Configuration **File**: `app_config.yml` **What's configured**: - Available applications (basic_usage, multi_channel, etc.) - Build types (Debug, Release) - ESP-IDF version compatibility - CI/CD settings - Documentation links **Example**: ```yaml apps: basic_usage: description: \"Basic usage example for TLE92466ED\" source_file: \"BasicUsageExample.cpp\" build_types: [\"Debug\", \"Release\"] ```text **Read**: [Configuration Guide - Application Configuration](/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html#2-application-configuration-app_configyml) --- ### Test Configuration **File**: Each example source file (e.g., `BasicUsageExample.cpp`) **What's configured**: - Test section enable/disable flags - Compile-time test selection **Example**: ```cpp #define ENABLE_INITIALIZATION_TESTS 1 // Enable #define ENABLE_BASIC_OPERATION_TESTS 1 // Enable #define ENABLE_CURRENT_CONTROL_TESTS 0 // Disable ```text **Read**: [Configuration Guide - Test Section Configuration](/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html#3-test-section-configuration) --- ## ğŸ§ª Test Framework Features The examples use a test framework with: #### âœ… FreeRTOS Task-Based Execution - Each test runs in isolated task - Custom stack size per test (default: 8KB) - Automatic semaphore synchronization - 30-second timeout protection #### âœ… GPIO14 Progress Indicator - **Visual feedback** on oscilloscope/logic analyzer - **Toggle**: HIGH/LOW on test completion - **Blink patterns**: 5 blinks at section boundaries - Hardware-level progress tracking #### âœ… Automatic Result Tracking - Pass/fail counting - Microsecond-precision execution timing - Success rate calculation - Formatted summaries #### âœ… Test Section Management - Compile-time section enable/disable - Organized test grouping - Custom blink patterns per section **Read**: [Test Framework Reference](/hf-tle92466ed-driver/development/examples/esp32/docs/README_TEST_FRAMEWORK.html) --- ## ğŸ“ˆ Example Output ### Test Execution ```text â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ TLE92466ED BASIC USAGE TEST SUITE - ESP32-C6 â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Target: esp32c6 ESP-IDF Version: v5.5.0 â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ SECTION: INITIALIZATION TESTS â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [GPIO14: Blink pattern - 5 blinks] â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ Running (task): hal_initialization â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• I (1234) TLE92466ED_Basic: Creating HAL instance... I (1235) TLE92466ED_Basic: âœ… HAL initialized successfully [SUCCESS] PASSED (task): hal_initialization (12.34 ms) [GPIO14: Toggle HIGH] ... (more tests) ... â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ TEST RESULTS SUMMARY â•‘ â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â•‘ Total Tests: 7 â•‘ â•‘ Passed: 7 â•‘ â•‘ Failed: 0 â•‘ â•‘ Success Rate: 100.00% â•‘ â•‘ Total Time: 234.56 ms â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• I (5000) TLE92466ED_Basic: âœ… ALL TESTS PASSED! ```text --- ## ğŸ› Troubleshooting Quick Reference ### Common Issues | Issue | Quick Fix | Full Guide |-------|-----------|------------| **All tests fail** | Check VIO power (3.0-5.5V, typical 3.3V) and wiring | [Driver Integration Test - Troubleshooting](/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html#troubleshooting) | **HAL init fails** | Verify GPIO pins in `TLE92466ED_TestConfig.hpp` | [Configuration - GPIO Conflict](/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html#gpio-conflict) | **Chip ID read fails** | Check SPI wiring, CS pin, RESN pin | [Driver Integration Test - Troubleshooting](/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html#troubleshooting) | **Solenoids not working** | Check VBAT, EN pin, channel enable | [Solenoid Control Test - Troubleshooting](/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html#troubleshooting) | **Stack overflow** | Increase stack size in `RUN_TEST_IN_TASK` | [Configuration - Stack Overflow](/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html#stack-overflow) | **Build errors** | Clean and rebuild: `idf.py fullclean && idf.py build` | [Configuration - Build Type Issues](/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html#build-type-issues) | --- ## ğŸ“¦ Project Structure ```text examples/esp32/ â”œâ”€â”€ app_config.yml # Build metadata â”œâ”€â”€ CMakeLists.txt # Main CMake configuration â”œâ”€â”€ sdkconfig # ESP-IDF SDK configuration â”‚ â”œâ”€â”€ main/ # Application source â”‚ â”œâ”€â”€ CMakeLists.txt # Main component build â”‚ â”œâ”€â”€ TLE92466ED_TestConfig.hpp # Hardware configuration â”‚ â”œâ”€â”€ TLE92466ED_TestFramework.hpp # Test infrastructure â”‚ â”œâ”€â”€ ESP32C6_HAL.hpp/.cpp # ESP32-C6 HAL implementation â”‚ â”œâ”€â”€ DriverIntegrationTest.cpp # Driver integration test suite â”‚ â””â”€â”€ SolenoidControlTest.cpp # Real hardware solenoid test â”‚ â”œâ”€â”€ components/ # ESP-IDF components â”‚ â””â”€â”€ hf_tle92466ed/ # TLE92466ED driver component â”‚ â”œâ”€â”€ CMakeLists.txt â”‚ â”œâ”€â”€ idf_component.yml â”‚ â””â”€â”€ README.md â”‚ â”œâ”€â”€ docs/ # Documentation â”‚ â”œâ”€â”€ README.md # This file â”‚ â”œâ”€â”€ README_DRIVER_INTEGRATION_TEST.md # Driver integration test guide â”‚ â”œâ”€â”€ README_SOLENOID_CONTROL_TEST.md # Solenoid control test guide â”‚ â”œâ”€â”€ README_CONFIGURATION.md # Configuration reference â”‚ â””â”€â”€ README_TEST_FRAMEWORK.md # Test framework API â”‚ â””â”€â”€ scripts/ # Build/flash scripts (submodule) â”œâ”€â”€ build_app.sh â”œâ”€â”€ flash_app.sh â””â”€â”€ monitor_app.sh ```text --- ## ğŸ”— Related Documentation ### Driver Documentation - [Driver Overview](/hf-tle92466ed-driver/development/) - Main driver README - [Driver API Reference](/hf-tle92466ed-driver/development/docs/07_Driver_API/) - Complete API docs - [HAL Implementation Guide](/hf-tle92466ed-driver/development/docs/08_HAL_Implementation/) - Porting guide - [Register Map](/hf-tle92466ed-driver/development/docs/03_Register_Map/) - TLE92466ED registers - [Diagnostics](/hf-tle92466ed-driver/development/docs/06_Diagnostics/) - Fault detection ### ESP32 Resources - [ESP-IDF Programming Guide](https://docs.espressif.com/projects/esp-idf/en/latest/) - [ESP32-C6 Technical Reference](https://www.espressif.com/sites/default/files/documentation/esp32-c6_technical_reference_manual_en.pdf) - [FreeRTOS Documentation](https://www.freertos.org/Documentation/RTOS_book.html) ### TLE92466ED Resources - [TLE92466ED Datasheet](../../../Datasheet/) - [Infineon Product Page](https://www.infineon.com/cms/en/product/power/motor-control-ics/intelligent-motor-control-ics/multi-half-bridge-ics/tle92466ed/) --- ## ğŸ“ Learning Path ### Beginner Path 1. **Read**: [Driver Integration Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html) 2. **Build**: Driver integration test (Debug mode) 3. **Run**: Flash to ESP32-C6 and observe output 4. **Verify**: All tests should pass (100% success rate) 5. **Explore**: Review telemetry tests and diagnostics ### Intermediate Path 1. **Read**: [Solenoid Control Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html) 2. **Setup**: Connect solenoids and power supplies 3. **Configure**: Adjust solenoid current ranges if needed 4. **Test**: Run solenoid control test with real hardware 5. **Monitor**: Observe real-time telemetry and current regulation ### Advanced Path 1. **Read**: [Test Framework Reference](/hf-tle92466ed-driver/development/examples/esp32/docs/README_TEST_FRAMEWORK.html) 2. **Extend**: Add custom test functions 3. **Port**: Implement HAL for different MCU (ESP32-S3, etc.) 4. **Integrate**: Set up CI/CD pipeline with test parsing 5. **Optimize**: Profile and optimize for your application --- ## ğŸ’¡ Tips and Best Practices ### Development Tips 1. **Start with Debug builds** for detailed logging 2. **Use GPIO14 indicator** to track progress without serial 3. **Monitor SPI signals** with logic analyzer during bring-up 4. **Test with known-good load** (resistor) before real solenoids 5. **Enable all test sections** initially, disable as needed ### Configuration Tips 1. **Keep hardware config centralized** in `TLE92466ED_TestConfig.hpp` 2. **Use compile-time flags** for test sections (faster than runtime) 3. **Document custom settings** in code comments 4. **Version control sdkconfig.defaults** for team consistency 5. **Use Release builds** for final performance testing ### Testing Tips 1. **Run full test suite** after any changes 2. **Check GPIO14 patterns** on oscilloscope for test flow 3. **Analyze execution times** to find performance issues 4. **Test with realistic loads** matching your application 5. **Monitor diagnostics** for fault conditions --- ## ğŸ†˜ Getting Help ### Documentation Issues If documentation is unclear or incomplete: 1. Check the specific guide (Basic Usage, Configuration, Test Framework) 2. Search for keywords in all docs 3. Review related driver documentation 4. Open GitHub issue with details ### Build/Configuration Issues If you have build or configuration problems: 1. Check [Configuration Guide - Troubleshooting](/hf-tle92466ed-driver/development/examples/esp32/docs/README_CONFIGURATION.html#troubleshooting-configuration) 2. Verify ESP-IDF version (v5.3+) 3. Clean and rebuild: `idf.py fullclean && idf.py build` 4. Check `sdkconfig` for conflicts ### Hardware/Test Issues If tests fail or hardware doesn't work: 1. **Driver Integration Test**: Check [Driver Integration Test - Troubleshooting](/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html#troubleshooting) 2. **Solenoid Control Test**: Check [Solenoid Control Test - Troubleshooting](/hf-tle92466ed-driver/development/examples/esp32/docs/README_SOLENOID_CONTROL_TEST.html#troubleshooting) 3. Verify wiring against pin configuration 4. Measure power supplies (VDD: 5V for central logic; VIO: 3.0-5.5V for SPI I/O levels; VBAT: 5.5-41V for solenoids) 5. Test SPI communication with logic analyzer 6. Try lower SPI frequency (100kHz) for debugging ### Support Channels - **GitHub Issues**: Bug reports, feature requests - **GitHub Discussions**: Questions, general help - **Driver Documentation**: Technical reference --- ## ğŸ“Š Example Statistics ### Driver Integration Test | Metric | Value |--------|-------| **Total Tests** | 40+ | **Test Sections** | 13 | **Typical Execution Time** | 10-15 seconds | **Flash Size** | ~350KB | **RAM Usage** | ~15KB | **Stack per Task** | 8KB | ### Test Breakdown | Section | Tests | Time |---------|-------|------| **Initialization** | 5 | ~50-100ms | **Mode Control** | 3 | ~30-50ms | **Global Configuration** | 3 | ~200-300ms | **Channel Control** | 4 | ~500-800ms | **Current Control** | 2 | ~2000-3000ms | **PWM Configuration** | 2 | ~300-500ms | **Dither Configuration** | 2 | ~300-500ms | **Diagnostics** | 7 | ~1000-1500ms | **Fault Management** | 2 | ~100-200ms | **Watchdog** | 1 | ~200-300ms | **GPIO Control** | 1 | ~200-300ms | **Multi-Channel** | 1 | ~2000-3000ms | **Parallel Operation** | 1 | ~300-500ms | **Error Conditions** | 1 | ~100-200ms | ### Solenoid Control Test | Metric | Value |--------|-------| **Control Update Rate** | 10 Hz (100ms) | **Telemetry Update Rate** | 1 Hz (1 second) | **ADC Sampling Rate** | 1 kHz | **Flash Size** | ~380KB | **RAM Usage** | ~18KB | **Stack** | 8KB | --- ## ğŸ‰ Success Criteria You've successfully set up the examples when: - âœ… Build completes without errors - âœ… Flash and monitor show output - âœ… All tests pass (100% success rate) - âœ… GPIO14 toggles during execution - âœ… Test summary shows timing information - âœ… System restarts automatically after tests Example success output: ```text â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ TEST RESULTS SUMMARY â•‘ â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â•‘ Total Tests: 7 â•‘ â•‘ Passed: 7 â•‘ â•‘ Failed: 0 â•‘ â•‘ Success Rate: 100.00% â•‘ â•‘ Total Time: 234.56 ms â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• âœ… ALL TESTS PASSED! System will restart in 10 seconds... ```text --- **Documentation Version**: 1.0.0 **Last Updated**: 2025-10-21 **Status**: âœ… Complete **Next**: Start with [Driver Integration Test](/hf-tle92466ed-driver/development/examples/esp32/docs/README_DRIVER_INTEGRATION_TEST.html) â†’ ",
    "url": "/hf-tle92466ed-driver/development/examples/esp32/docs/",
    
    "relUrl": "/examples/esp32/docs/"
  }
}
